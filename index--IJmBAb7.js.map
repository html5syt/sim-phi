{"version":3,"file":"index--IJmBAb7.js","sources":["../src/js/common.js","../src/components/Timer.ts","../src/utils/parseCSV.ts","../src/utils/stringify.ts","../src/utils/Type.ts","../src/utils/Chart.ts","../src/utils/structInfo.ts","../node_modules/crypt/crypt.js","../node_modules/charenc/charenc.js","../node_modules/is-buffer/index.js","../node_modules/md5/md5.js","../src/utils/reader.ts","../src/components/HitManager.ts","../src/components/Stat.ts","../src/utils/createCtx.ts","../node_modules/stackblur-canvas/dist/stackblur-es.js","../src/utils/ImageTools.ts","../src/components/Checkbox.ts","../src/components/HitEvents.ts","../src/components/HitFeedback.ts","../src/components/HitImage.ts","../src/components/HitWord.ts","../src/components/ScaledNote.ts","../src/utils/adjustSize.ts","../src/components/MessageHandler.ts","../src/index.ts","../src/components/Stage.ts","../src/core.ts","../src/components/StatusManager.ts","../src/components/FrameTimer.ts","../src/components/FrameAnimater.ts","../src/utils/checkSupport.ts","../src/utils/fixme.ts"],"sourcesContent":["// 全屏相关\nexport const full = {\n  /**\n   * @param {HTMLElement} [elem]\n   * @returns {Promise<void>}\n   */\n  toggle(elem) {\n    // 踩坑：Apple第三方浏览器可能根本没有包含full的属性或方法\n    if (!this.enabled) return Promise.reject(new Error('Fullscreen is not supported'));\n    const onFullscreen = () => new Promise((resolve, reject) => {\n      document.addEventListener(this.onchange, resolve, { once: true });\n      document.addEventListener(this.onerror, reject, { once: true });\n    });\n    if (this.element) {\n      const handler = document.exitFullscreen || document.webkitExitFullscreen || document.mozCancelFullScreen;\n      if (handler) { handler.call(document); return onFullscreen() }\n    } else {\n      const element = elem instanceof HTMLElement ? elem : document.body;\n      const handler = element.requestFullscreen || element.webkitRequestFullscreen || element.mozRequestFullScreen;\n      if (handler) { handler.call(element); return onFullscreen() }\n    }\n    return Promise.reject(new Error('Fullscreen is not supported'));\n  },\n  check(elem) {\n    const element = elem instanceof HTMLElement ? elem : document.body;\n    return this.element === element;\n  },\n  get onchange() {\n    if (document.onfullscreenchange !== undefined) return 'fullscreenchange';\n    if (document.onwebkitfullscreenchange !== undefined) return 'webkitfullscreenchange';\n    if (document.onmozfullscreenchange !== undefined) return 'mozfullscreenchange';\n    return null;\n  },\n  get onerror() {\n    if (document.onfullscreenerror !== undefined) return 'fullscreenerror';\n    if (document.onwebkitfullscreenerror !== undefined) return 'webkitfullscreenerror';\n    if (document.onmozfullscreenerror !== undefined) return 'mozfullscreenerror';\n    return null;\n  },\n  get element() {\n    return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || null;\n  },\n  get enabled() {\n    return document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || false;\n  }\n};\nexport const orientation = {\n  async checkSupport() {\n    const s = screen.orientation;\n    if (!s) return false;\n    try {\n      await s.lock(s.type);\n      s.unlock();\n      hook.toast('如果你看到了这个提示，请联系开发者：Unexpected Allow Orientation Lock Without Permission');\n      return true;\n    } catch (e) {\n      if (e.name === 'SecurityError') {\n        if (e.message === 'The operation is insecure.') return false; // Firefox\n        return true;\n      } else if (e.name === 'NotSupportedError') return false;\n      else if (e.name === 'TypeError') return false; // Safari 16.4\n      throw e;\n    }\n  },\n  lockLandscape() {\n    const s = screen.orientation;\n    if (!s) return Promise.reject(new Error('Orientation is not supported'));\n    return s.lock('landscape-primary');\n  },\n  lockPortrait() {\n    const s = screen.orientation;\n    if (!s) return Promise.reject(new Error('Orientation is not supported'));\n    return s.lock('portrait-primary');\n  },\n  unlock() {\n    const s = screen.orientation;\n    if (!s) return Promise.reject(new Error('Orientation is not supported'));\n    return s.unlock();\n  }\n};\n// function loadJS(url, callback) {\n//   const script = document.createElement('script');\n//   const fn = callback || function() {};\n//   script.type = 'text/javascript';\n//   script.onload = function() {\n//     fn();\n//   };\n//   script.src = url;\n//   document.getElementsByTagName('head')[0].appendChild(script);\n// }\n// function loadJS2(url) {\n//   return new Promise((resolve, reject) => {\n//     const script = document.createElement('script');\n//     script.type = 'text/javascript';\n//     script.onload = resolve;\n//     script.onerror = reject;\n//     script.src = url;\n//     document.getElementsByTagName('head')[0].appendChild(script);\n//   });\n// }\n// self.onerror=(...a)=>console.log('awa',a);\n// self.addEventListener('error',(...a)=>console.log('awa',a));\nexport const urls0 = {\n  jszip: ['//unpkg.com/jszip/dist/jszip.min.js', '//cdn.jsdelivr.net/npm/jszip', '//fastly.jsdelivr.net/npm/jszip'],\n  blur: ['//unpkg.com/stackblur-canvas/dist/stackblur.min.js', '//cdn.jsdelivr.net/npm/stackblur-canvas', '//fastly.jsdelivr.net/npm/stackblur-canvas'],\n  md5: ['//unpkg.com/md5-js/md5.min.js', '//cdn.jsdelivr.net/npm/md5-js', '//fastly.jsdelivr.net/npm/md5-js']\n};\nexport const getConstructorName = obj => {\n  if (obj === null) return 'Null';\n  if (obj === undefined) return 'Undefined';\n  return obj.constructor.name;\n};\nexport const isUndefined = name => self[name] === undefined;\n// Legacy\n{\n  // EventTarget.constructor polyfill for Safari 14-\n  try {\n    Reflect.construct(EventTarget, []);\n  } catch (e) {\n    self.EventTarget = function() {\n      this.listeners = {};\n    };\n    EventTarget.prototype = {\n      constructor: EventTarget,\n      addEventListener(type, callback) {\n        if (!(type in this.listeners)) this.listeners[type] = [];\n        this.listeners[type].push(callback);\n      },\n      removeEventListener(type, callback) {\n        if (!(type in this.listeners)) return;\n        const stack = this.listeners[type];\n        for (let i = 0, l = stack.length; i < l; i++) {\n          if (stack[i] === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      },\n      dispatchEvent(event) {\n        if (!(event.type in this.listeners)) return true;\n        const stack = this.listeners[event.type];\n        // event.target = this;\n        for (let i = 0, l = stack.length; i < l; i++) {\n          stack[i].call(this, event);\n        }\n        return !event.defaultPrevented;\n      }\n    };\n  }\n  // Error.cause polyfill for Safari 15-\n  const error = new Error();\n  if (new Error('', { cause: error }).cause !== error) {\n    class Error extends self.Error {\n      constructor(message, { cause } = {}) {\n        super(message);\n        this.cause = cause;\n      }\n    }\n    Object.defineProperty(Error, 'name', { value: 'Error' });\n    self.Error = Error;\n  }\n  // DOMException.stack polyfill for All Browsers\n  class DOMException extends self.DOMException {\n    constructor(message, name) {\n      super(message, name);\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, DOMException); // 过滤自身stack\n      } else {\n        this.stack = new Error().stack.replace(/.+\\n/, '');\n      }\n    }\n  }\n  Object.defineProperty(DOMException, 'name', { value: 'DOMException' });\n  self.DOMException = DOMException;\n  // AudioContext constructor polyfill for Safari 14.5-\n  if (isUndefined('AudioContext')) {\n    self.AudioContext = self.webkitAudioContext;\n  }\n  // Object.hasOwn polyfill for Safari 15.4-\n  if (Object.hasOwn === undefined) {\n    Object.defineProperty(Object, 'hasOwn', {\n      value(obj, prop) {\n        // eslint-disable-next-line prefer-object-has-own\n        return Object.prototype.hasOwnProperty.call(obj, prop);\n      }\n    });\n  }\n  // Array.prototype.toReversed polyfill\n  if (Array.prototype.toReversed === undefined) {\n    // eslint-disable-next-line no-extend-native\n    Object.defineProperty(Array.prototype, 'toReversed', {\n      value() {\n        return this.slice().reverse();\n      }\n    });\n  }\n}\nexport function loadJS(...args) {\n  const arr = Array.from(args[0] instanceof Array ? args[0] : args, i => new URL(i, location).href);\n  const args0 = (function *(arg) { yield* arg }(arr));\n  const load = url => new Promise((resolve, reject) => {\n    if (!url) { reject(new DOMException(`All urls are invalid\\n${arr.join('\\n')}`, 'NetworkError')); return }\n    const script = document.createElement('script');\n    script.onload = () => resolve(script);\n    script.onerror = () => load(args0.next().value).then(s => resolve(s)).catch(e => reject(e));\n    script.src = url;\n    if (!location.port) script.crossOrigin = 'anonymous';\n    document.head.appendChild(script);\n  });\n  return load(args0.next().value);\n}\n","export class Timer {\n  private t0: number;\n  private t1: number;\n  private isPaused: boolean;\n  public constructor() {\n    this.t0 = 0;\n    this.t1 = 0;\n    this.isPaused = true;\n  }\n  public get time(): number {\n    if (this.isPaused) return this.t0;\n    return this.t0 + performance.now() - this.t1;\n  }\n  public get second(): number {\n    return this.time / 1e3;\n  }\n  public play(): void {\n    if (!this.isPaused) throw new Error('Time has been playing');\n    this.t1 = performance.now();\n    this.isPaused = false;\n  }\n  public pause(): void {\n    if (this.isPaused) throw new Error('Time has been paused');\n    this.t0 = this.time;\n    this.isPaused = true;\n  }\n  public reset(): void {\n    this.t0 = 0;\n    this.t1 = 0;\n    this.isPaused = true;\n  }\n  public addTime(num = 0): void {\n    this.t0 += num;\n  }\n}\n","export function parseCSV(rawText: string, isObject: false): string[][];\nexport function parseCSV(rawText: string, isObject: true): Record<string, string>[];\nexport function parseCSV(rawText: string, isObject: boolean): Record<string, string>[] | string[][] {\n  const lines = rawText.replace(/\\ufeff|\\r/g, '').split('\\n');\n  const rows = [];\n  for (const line of lines) {\n    let rowText = '';\n    let isQuot = false;\n    let beforeQuot = false;\n    const row = [];\n    for (const char of line) {\n      if (char === '\"') {\n        if (!isQuot) isQuot = true;\n        else if (beforeQuot) {\n          rowText += char; beforeQuot = false;\n        } else beforeQuot = true;\n      } else if (char === ',') {\n        if (!isQuot) {\n          row.push(rowText);\n          rowText = '';\n        } else if (beforeQuot) {\n          row.push(rowText);\n          rowText = '';\n          isQuot = false;\n          beforeQuot = false;\n        } else rowText += char;\n      } else if (beforeQuot) throw new SyntaxError('Unexpected token , (-1)');\n      else rowText += char;\n    }\n    if (!isQuot) {\n      row.push(rowText);\n      rowText = '';\n    } else if (beforeQuot) {\n      row.push(rowText);\n      rowText = '';\n      isQuot = false;\n      beforeQuot = false;\n    } else throw new SyntaxError('Unexpected token , (-2)');\n    rows.push(row);\n  }\n  if (!isObject) return rows;\n  const arr = [];\n  for (let i = 1; i < rows.length; i++) {\n    const obj = {} as Record<string, string>;\n    for (let j = 0; j < rows[0].length; j++) obj[rows[0][j]] = rows[i][j];\n    arr.push(obj);\n  }\n  return arr;\n}\n","export function stringify(bfs: BufferSource): string {\n  const labels = ['utf-8', 'gbk', 'big5', 'shift_jis'];\n  for (const label of labels) {\n    const decoder = new TextDecoder(label, { fatal: true }); // '\\ufffd'\n    try {\n      return decoder.decode(bfs);\n    } catch (e) {\n      if (label === labels[labels.length - 1]) throw e;\n    }\n  }\n  throw new Error('Unknown encoding');\n}\n","namespace Type {\n  export function int(a: unknown): number {\n    return Number(a) | 0;\n  }\n  export function float(a: unknown): number {\n    return Number(a) || 0;\n  }\n  export function bool(a: unknown): boolean {\n    return Boolean(a);\n  }\n  export function str(a: unknown): string {\n    return String(a);\n  }\n  export function arr<T>(a: unknown, constructor: new (b: Record<string, unknown>) => T): T[] {\n    return Array.isArray(a) ? a.map((i?: Record<string, unknown>) => new constructor(i || {})) : [];\n  }\n  export function obj<T>(a: unknown, constructor: new (b: Record<string, unknown>) => T): T {\n    return new constructor((a as Record<string, unknown> | null) || {});\n  }\n}\nexport default Type;\n","import Type from './Type';\nexport class SpeedEvent {\n  public startTime: number;\n  public endTime: number;\n  public value: number;\n  public constructor(event: Record<string, unknown>) {\n    this.startTime = Type.int(event.startTime);\n    this.endTime = Type.int(event.endTime);\n    this.value = Type.float(event.value);\n  }\n}\nexport class Note {\n  public type: number;\n  public time: number;\n  public positionX: number;\n  public holdTime: number;\n  public speed: number;\n  public floorPosition: number;\n  public constructor(note: Record<string, unknown>) {\n    this.type = Type.int(note.type);\n    this.time = Type.int(note.time);\n    this.positionX = Type.float(note.positionX);\n    this.holdTime = Type.int(note.holdTime);\n    this.speed = Type.float(note.speed);\n    this.floorPosition = Type.float(note.floorPosition);\n  }\n}\nexport class JudgeLineEvent {\n  public startTime: number;\n  public endTime: number;\n  public start: number;\n  public end: number;\n  public start2: number;\n  public end2: number;\n  public constructor(event: Record<string, unknown>) {\n    this.startTime = Type.int(event.startTime);\n    this.endTime = Type.int(event.endTime);\n    this.start = Type.float(event.start);\n    this.end = Type.float(event.end);\n    this.start2 = Type.float(event.start2);\n    this.end2 = Type.float(event.end2);\n  }\n}\nexport class JudgeLine {\n  public numOfNotes: number;\n  public numOfNotesAbove: number;\n  public numOfNotesBelow: number;\n  public bpm: number;\n  public speedEvents: SpeedEvent[];\n  public notesAbove: Note[];\n  public notesBelow: Note[];\n  public judgeLineDisappearEvents: JudgeLineEvent[];\n  public judgeLineMoveEvents: JudgeLineEvent[];\n  public judgeLineRotateEvents: JudgeLineEvent[];\n  public constructor(line: Record<string, unknown>) {\n    this.numOfNotes = Type.int(line.numOfNotes);\n    this.numOfNotesAbove = Type.int(line.numOfNotesAbove);\n    this.numOfNotesBelow = Type.int(line.numOfNotesBelow);\n    this.bpm = Type.float(line.bpm);\n    this.speedEvents = Type.arr(line.speedEvents, SpeedEvent);\n    this.notesAbove = Type.arr(line.notesAbove, Note);\n    this.notesBelow = Type.arr(line.notesBelow, Note);\n    if (line.numOfNotesAbove == null) this.numOfNotesAbove = this.notesAbove.length;\n    if (line.numOfNotesBelow == null) this.numOfNotesBelow = this.notesBelow.length;\n    if (line.numOfNotes == null) this.numOfNotes = this.numOfNotesAbove + this.numOfNotesBelow;\n    this.judgeLineDisappearEvents = Type.arr(line.judgeLineDisappearEvents, JudgeLineEvent);\n    this.judgeLineMoveEvents = Type.arr(line.judgeLineMoveEvents, JudgeLineEvent);\n    this.judgeLineRotateEvents = Type.arr(line.judgeLineRotateEvents, JudgeLineEvent);\n  }\n}\nexport class Chart {\n  public formatVersion: number;\n  public offset: number;\n  public numOfNotes: number;\n  public judgeLineList: JudgeLine[];\n  public constructor(input?: Record<string, unknown>) {\n    const chart = input || {};\n    this.formatVersion = Type.int(chart.formatVersion);\n    this.offset = Type.float(chart.offset);\n    this.numOfNotes = Type.int(chart.numOfNotes);\n    this.judgeLineList = Type.arr(chart.judgeLineList, JudgeLine);\n    if (chart.numOfNotes == null) this.numOfNotes = this.judgeLineList.reduce((a, b) => a + b.numOfNotes, 0);\n  }\n  public duplicate(): Chart {\n    return Type.obj(this, Chart);\n  }\n}\ninterface ChartData {\n  data: Chart;\n  messages: BetterMessage[];\n}\nexport function structChart(chart: ChartPGS, filename: string): ChartData {\n  const result = Type.obj(chart, Chart);\n  switch (result.formatVersion) {\n    case 1:\n      for (const line of result.judgeLineList) {\n        for (const evt of line.judgeLineMoveEvents) {\n          evt.start2 = evt.start % 1000 / 520;\n          evt.end2 = evt.end % 1000 / 520;\n          evt.start = Math.floor(evt.start / 1000) / 880;\n          evt.end = Math.floor(evt.end / 1000) / 880;\n        }\n      } // fallthrough\n    case 3:\n    case 3473:\n      break;\n    default:\n      throw new Error(`Unsupported formatVersion: ${result.formatVersion}`);\n  }\n  const errors = [];\n  const messages: BetterMessage[] = [];\n  const numOfLines = result.judgeLineList.length;\n  // if (result.offset < 0) throw new Error('Offset must be non-negative');\n  // if (result.numOfNotes <= 0) throw new Error('At least one note is required');\n  const warn = (code: number, name: string, message: string) => messages.push({ host: 'Core', code, name, message, target: filename });\n  if (numOfLines > 100) warn(1, 'LineCountWarning', `Expected at most 100 items in judgeLineList, but got ${numOfLines}`);\n  let maxNoteSeconds = 0;\n  for (const { bpm, notesAbove, notesBelow } of result.judgeLineList) {\n    for (const { type, time, holdTime } of notesAbove) {\n      const seconds = (time % 1e9 + (type === 3 && holdTime > 0 ? holdTime : 0)) / bpm * 1.875;\n      if (seconds > maxNoteSeconds) maxNoteSeconds = seconds;\n    }\n    for (const { type, time, holdTime } of notesBelow) {\n      const seconds = (time % 1e9 + (type === 3 && holdTime > 0 ? holdTime : 0)) / bpm * 1.875;\n      if (seconds > maxNoteSeconds) maxNoteSeconds = seconds;\n    }\n  }\n  for (let i = 0; i < numOfLines; i++) {\n    const line = result.judgeLineList[i];\n    const subErrors = [];\n    if (line.bpm > 0) {\n      const maxNoteTime = Math.ceil(maxNoteSeconds * line.bpm / 1.875);\n      type KeyOfType<T, U> = { [K in keyof T]: T[K] extends U ? K : never }[keyof T];\n      type KeyOfJudgeLine = KeyOfType<JudgeLine, (JudgeLineEvent | SpeedEvent)[]>;\n      const checkMaxEventTime = (key: KeyOfJudgeLine) => {\n        if (line[key].length) {\n          let maxEndTime = 0;\n          for (const { endTime } of line[key]) {\n            if (endTime > maxEndTime) maxEndTime = endTime;\n          }\n          if (maxEndTime < maxNoteTime) subErrors.push(`Maximum time for ${key} is too small`);\n        } else subErrors.push(`Expected at least 1 item in ${key}`);\n      };\n      checkMaxEventTime('speedEvents');\n      checkMaxEventTime('judgeLineDisappearEvents');\n      checkMaxEventTime('judgeLineMoveEvents');\n      checkMaxEventTime('judgeLineRotateEvents');\n    } else subErrors.push(`Expected bpm > 0, but got ${line.bpm}`);\n    if (subErrors.length) errors.push(`JudgeLine ${i}:\\n${subErrors.map(e => `  ${e}`).join('\\n')}`);\n  }\n  if (errors.length) throw new Error(`Invalid chart input\\n${errors.map(e => `  ${e.split('\\n').join('\\n  ')}`).join('\\n')}`);\n  if (!numOfLines) throw new Error('No judge lines available');\n  return { data: result, messages };\n}\n","export function structInfoData(record: Record<string, string | null>[], path: string): ChartInfoData[] {\n  const result = [];\n  for (const i of record) {\n    if (i.Chart == null) continue;\n    const data: ChartInfoData = { chart: i.Chart };\n    if (i.Name != null) data.name = i.Name;\n    if (i.Musician != null) data.artist = i.Musician; // Alternative\n    if (i.Composer != null) data.artist = i.Composer; // Alternative\n    if (i.Artist != null) data.artist = i.Artist;\n    if (i.Level != null) data.level = i.Level;\n    if (i.Illustrator != null) data.illustrator = i.Illustrator;\n    if (i.Designer != null) data.charter = i.Designer; // Alternative\n    if (i.Charter != null) data.charter = i.Charter;\n    if (i.Music != null) data.music = i.Music;\n    if (i.Image != null) data.image = i.Image;\n    if (i.AspectRatio != null) {\n      const v = parseFloat(i.AspectRatio);\n      if (isFinite(v)) data.aspectRatio = v;\n    }\n    if (i.ScaleRatio != null) { // Legacy\n      const v = 8080 / parseFloat(i.ScaleRatio);\n      if (isFinite(v)) data.noteScale = v;\n    }\n    if (i.NoteScale != null) {\n      const v = parseFloat(i.NoteScale);\n      if (isFinite(v)) data.noteScale = v;\n    }\n    if (i.GlobalAlpha != null) { // Legacy\n      const v = parseFloat(i.GlobalAlpha);\n      if (isFinite(v)) data.backgroundDim = v;\n    }\n    if (i.BackgroundDim != null) {\n      const v = parseFloat(i.BackgroundDim);\n      if (isFinite(v)) data.backgroundDim = v;\n    }\n    if (i.Offset != null) {\n      const v = parseFloat(i.Offset);\n      if (isFinite(v)) data.offset = v;\n    }\n    result.push(data);\n    if (path) {\n      data.chart = `${path}/${data.chart}`;\n      if (data.music != null) data.music = `${path}/${data.music}`;\n      if (data.image != null) data.image = `${path}/${data.image}`;\n    }\n  }\n  return result;\n}\nexport function structLineData(record: Record<string, string | null>[], path: string): ChartLineData[] {\n  const result = [];\n  for (const i of record) {\n    if (i.Chart == null) continue;\n    const data: ChartLineData = { chart: i.Chart };\n    if (i.LineId != null) data.lineId = Number(i.LineId);\n    if (i.Image != null) data.image = i.Image;\n    if (i.Vert != null) { // Legacy\n      const v = parseFloat(i.Vert);\n      if (isFinite(v)) data.scaleOld = v;\n    }\n    if (i.Horz != null) { // Legacy\n      const v = parseFloat(i.Horz);\n      if (isFinite(v)) data.aspect = v;\n    }\n    if (i.IsDark != null) { // Legacy\n      const v = parseFloat(i.IsDark);\n      if (isFinite(v)) data.useBackgroundDim = Boolean(v);\n    }\n    if (i.Scale != null) {\n      const v = parseFloat(i.Scale);\n      if (isFinite(v)) data.scale = v;\n    }\n    if (i.Aspect != null) {\n      const v = parseFloat(i.Aspect);\n      if (isFinite(v)) data.aspect = v;\n    }\n    if (i.UseBackgroundDim != null) {\n      const v = parseFloat(i.UseBackgroundDim);\n      if (isFinite(v)) data.useBackgroundDim = Boolean(v);\n    }\n    if (i.UseLineColor != null) {\n      const v = parseFloat(i.UseLineColor);\n      if (isFinite(v)) data.useLineColor = Boolean(v);\n    }\n    if (i.UseLineScale != null) {\n      const v = parseFloat(i.UseLineScale);\n      if (isFinite(v)) data.useLineScale = Boolean(v);\n    }\n    result.push(data);\n    if (path) {\n      data.chart = `${path}/${data.chart}`;\n      if (data.image != null) data.image = `${path}/${data.image}`;\n    }\n  }\n  return result;\n}\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","import { parseCSV } from './parseCSV';\nimport { stringify } from './stringify';\nimport { structChart } from './Chart';\nimport { structInfoData, structLineData } from './structInfo';\nimport md5 from 'md5';\n// @ts-expect-error: vite-plugin-worker-loader\nimport Zip from '@/zip.worker?worker';\nexport class FileEmitter extends EventTarget {\n  private readonly input: HTMLInputElement;\n  public constructor() {\n    super();\n    this.input = Object.assign(document.createElement('input'), {\n      type: 'file',\n      accept: '',\n      multiple: true,\n      onchange: () => {\n        this.fireChange(this.input.files);\n        for (const i of this.input.files || []) {\n          // 加载文件\n          const reader = new FileReader();\n          reader.readAsArrayBuffer(i);\n          reader.onprogress = evt => this.fireProgress(evt.loaded, evt.total);\n          reader.onload = evt => evt.target && evt.target.result instanceof ArrayBuffer && this.fireLoad(i, evt.target.result);\n        }\n        this.input.value = ''; // allow same file\n      }\n    });\n  }\n  public uploadFile(): void {\n    this.input.webkitdirectory = false;\n    this.input.click();\n  }\n  public uploadDir(): void {\n    this.input.webkitdirectory = true;\n    this.input.click();\n  }\n  public fireChange(files: FileList | null): boolean {\n    return this.dispatchEvent(Object.assign(new Event('change'), { files }));\n  }\n  public fireProgress(loaded: number, total: number): boolean {\n    return this.dispatchEvent(new ProgressEvent('progress', { lengthComputable: true, loaded, total }));\n  }\n  public fireLoad(file: Pick<File, 'name'>, buffer: ArrayBuffer): boolean {\n    return this.dispatchEvent(Object.assign(new ProgressEvent('load'), { file, buffer }));\n  }\n}\nexport class ZipReader extends EventTarget {\n  public total: number;\n  private worker: Worker | null;\n  private readonly handler: (data: ByteData) => Promise<unknown>;\n  public constructor({ handler = async data => Promise.resolve(data) }: ReaderOptions) {\n    super();\n    this.worker = null;\n    this.total = 0;\n    this.handler = handler;\n  }\n  public read(result0: ByteData): void {\n    if (!this.worker) {\n      this.dispatchEvent(new CustomEvent('loadstart'));\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      const worker = new Zip() as Worker; // 以后考虑indexedDB存储url\n      worker.addEventListener('message', msg => {\n        const handler = async() => {\n          const { data } = msg as { data: { data: ByteData; total: number } };\n          this.total = data.total;\n          const result = await this.handler(data.data);\n          this.dispatchEvent(new CustomEvent('read', { detail: result }));\n        };\n        handler().catch((err: Error) => this.dispatchEvent(new CustomEvent('error', { detail: err })));\n      });\n      this.worker = worker;\n    }\n    this.worker.postMessage(result0, [result0.buffer]);\n  }\n  public terminate(): void {\n    if (this.worker) {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }\n}\ninterface ReaderInit {\n  pattern: RegExp;\n  /** binary(not text)/text(not json)/json */\n  type?: 'binary' | 'json' | 'text';\n  mustMatch?: boolean;\n  weight?: number;\n  read: (data: ByteData, path: string, options?: Record<string, unknown>) => Promise<ReaderData | null> | ReaderData | null;\n}\nfunction defineReader(readerInit: ReaderInit): ByteReader {\n  const { pattern, type = 'binary', mustMatch = false, weight = 0, read } = readerInit;\n  const reader = { pattern, type, mustMatch, weight, read };\n  if (type === 'text') {\n    reader.read = async(i: ByteData, path: string) => {\n      if (i.isText == null) {\n        try {\n          i.text = stringify(i.buffer);\n          i.isText = true;\n        } catch (error) {\n          i.isText = false;\n        }\n      }\n      return i.isText ? read(i, path) : null;\n    };\n  }\n  if (type === 'json') {\n    reader.read = async(i: ByteData, path: string) => {\n      if (i.isText == null) {\n        try {\n          i.text = stringify(i.buffer);\n          i.isText = true;\n        } catch (error) {\n          i.isText = false;\n        }\n      }\n      if (i.isJSON == null) {\n        try {\n          i.data = JSON.parse(i.text!);\n          i.isJSON = true;\n        } catch (error) {\n          i.isJSON = false;\n        }\n      }\n      return i.isJSON ? read(i, path) : null;\n    };\n  }\n  return reader;\n}\nconst readerInit: ReaderInit[] = [\n  {\n    pattern: /\\.(mp3|ogg|wav|mp4|webm|ogv|mpg|mpeg|avi|mov|flv|wmv|mkv)$/i,\n    async read(i: ByteData, _path, { createAudioBuffer }: Record<string, unknown> = {}) {\n      return readMediaData(i, async(arraybuffer: ArrayBuffer) => {\n        if (typeof createAudioBuffer === 'function') return createAudioBuffer(arraybuffer) as AudioBuffer;\n        return defaultDecode(arraybuffer);\n      });\n    }\n  }, {\n    pattern: /\\.json$/i,\n    type: 'json',\n    read(i: ByteData/* , path */) {\n      const text = i.text!;\n      const json = JSON.parse(text, (_, value) => typeof value === 'number' ? Math.fround(value) : value as unknown) as ChartPGS;\n      const { data: jsonData, messages } = structChart(json, i.name);\n      const format = `PGS(${jsonData.formatVersion})`;\n      return { type: 'chart', name: i.name, md5: md5(text), data: jsonData, msg: messages, format };\n    }\n  }, {\n    pattern: /\\.(png|jpg|jpeg|gif|bmp|webp|svg)$/i,\n    async read(i: ByteData) {\n      const data = new Blob([i.buffer]);\n      const imageData = await createImageBitmap(data);\n      return { type: 'image' as const, name: i.name, data: imageData };\n    }\n  }, {\n    pattern: /^line\\.csv$/i,\n    type: 'text',\n    mustMatch: true,\n    read(i: ByteData, path: string) {\n      const data = i.text!;\n      const chartLine = structLineData(parseCSV(data, true), path);\n      return { type: 'line' as const, data: chartLine };\n    }\n  }, {\n    pattern: /^info\\.csv$/i,\n    type: 'text',\n    mustMatch: true,\n    read(i: ByteData, path: string) {\n      const data = i.text!;\n      const chartInfo = structInfoData(parseCSV(data, true), path);\n      return { type: 'info' as const, data: chartInfo };\n    }\n  }\n];\nasync function defaultDecode(arraybuffer: ArrayBuffer) {\n  const actx: AudioContext = new self.AudioContext();\n  await actx.close();\n  // return actx.decodeAudioData(arraybuffer);\n  return new Promise((resolve: (value: AudioBuffer) => void, reject) => {\n    const a = actx.decodeAudioData(arraybuffer, resolve, reject);\n    if (a instanceof Promise) a.then(resolve, reject);\n  }).catch(err => {\n    if (err == null) throw new DOMException('Unable to decode audio data', 'EncodingError');\n    throw err;\n  });\n}\nfunction createReader(define: ((readerInit: ReaderInit) => ByteReader)) {\n  const readers = readerInit.map(define);\n  return {\n    async read(i: ByteData, options = {}): Promise<ReaderData> {\n      const { name, path } = splitPath(i.name);\n      const filtered = readers.filter(a => a.pattern.test(name) || !a.mustMatch);\n      filtered.sort((a, b) => {\n        if (a.pattern.test(name) && !b.pattern.test(name)) return -1;\n        if (!a.pattern.test(name) && b.pattern.test(name)) return 1;\n        if (a.weight > b.weight) return -1;\n        if (a.weight < b.weight) return 1;\n        return 0;\n      });\n      const errors = [] as Error[];\n      const errorHandler = (reader: ByteReader, err: Error) => {\n        if (reader.pattern.test(name)) errors.push(err);\n      };\n      for (const reader of filtered) {\n        try {\n          const data = await reader.read(i, path, options);\n          if (data) return data;\n        } catch (err) {\n          errorHandler(reader, err as Error);\n        }\n      }\n      return { type: 'unknown', name, data: errors.join('\\n') }; // TODO: 完善错误信息\n    },\n    use(reader: ReaderInit | ReaderInit[]) {\n      if (Array.isArray(reader)) {\n        for (const i of reader) this.use(i);\n      } else {\n        readers.push(define(reader));\n      }\n    }\n  } as const;\n}\nexport const reader = createReader(defineReader);\nfunction splitPath(i: string) {\n  const j = i.lastIndexOf('/');\n  const name = i.slice(j + 1);\n  const path = ~j ? i.slice(0, j) : '';\n  return { name, path };\n}\nasync function readMediaData(i: ByteData, createAudioBuffer: (arraybuffer: ArrayBuffer) => Promise<AudioBuffer>) {\n  const videoElement = document.createElement('video');\n  await new Promise(resolve => {\n    videoElement.src = URL.createObjectURL(new Blob([i.buffer]));\n    videoElement.preload = 'metadata';\n    videoElement.onloadedmetadata = resolve;\n    videoElement.onerror = resolve;\n  });\n  const { videoWidth: width, videoHeight: height } = videoElement;\n  const data = {\n    audio: await createAudioBuffer(i.buffer.slice(0)),\n    video: width && height ? videoElement : null\n  };\n  return { type: 'media' as const, name: i.name, data };\n}\n","type HitType = 'keyboard' | 'mouse' | 'touch';\nclass HitEvent {\n  public type: HitType;\n  public id: number | string;\n  public offsetX: number;\n  public offsetY: number;\n  public isActive: boolean;\n  public isTapped: boolean;\n  public isMoving: boolean;\n  public lastDeltaX: number;\n  public lastDeltaY: number;\n  public nowDeltaX: number;\n  public nowDeltaY: number;\n  public deltaTime: number;\n  public currentTime: number;\n  public flicking: boolean;\n  public flicked: boolean;\n  public constructor(type: HitType, id: number | string, offsetX: number, offsetY: number) {\n    this.type = type;\n    this.id = id;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.isActive = true; // 是否标记为按下，若false则可以移除\n    this.isTapped = false; // 是否触发过Tap判定\n    this.isMoving = false; // 是否正在移动\n    // flick(speed)\n    this.lastDeltaX = 0;\n    this.lastDeltaY = 0;\n    this.nowDeltaX = 0;\n    this.nowDeltaY = 0;\n    this.deltaTime = 0; // 按下时间差\n    this.currentTime = performance.now(); // 按下时间\n    this.flicking = false; // 是否触发Flick判定\n    this.flicked = false; // 是否触发过Flick判定\n  }\n  public move(offsetX: number, offsetY: number): void {\n    this.lastDeltaX = this.nowDeltaX;\n    this.lastDeltaY = this.nowDeltaY;\n    this.nowDeltaX = offsetX - this.offsetX;\n    this.nowDeltaY = offsetY - this.offsetY;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    const time = performance.now();\n    this.deltaTime = time - this.currentTime;\n    this.currentTime = time;\n    this.isMoving = true;\n    const flickSpeed = (this.nowDeltaX * this.lastDeltaX + this.nowDeltaY * this.lastDeltaY) / Math.sqrt(this.lastDeltaX ** 2 + this.lastDeltaY ** 2) / this.deltaTime;\n    if (this.flicking && flickSpeed < 0.5) {\n      this.flicking = false;\n      this.flicked = false;\n    } else if (!this.flicking && flickSpeed > 1.0) this.flicking = true;\n  }\n}\nexport class HitManager {\n  public list: HitEvent[];\n  public constructor() {\n    this.list = [];\n  }\n  public activate(type: HitType, id: number | string, offsetX: number, offsetY: number): void {\n    const { list } = this;\n    const idx = list.findIndex(hit => hit.type === type && hit.id === id);\n    if (idx !== -1) list.splice(idx, 1);\n    list.push(new HitEvent(type, id, offsetX, offsetY));\n  }\n  public moving(type: HitType, id: number | string, offsetX: number, offsetY: number): void {\n    const hitEl = this.list.find(hit => hit.type === type && hit.id === id);\n    if (hitEl) hitEl.move(offsetX, offsetY);\n  }\n  public deactivate(type: HitType, id: number | string): void {\n    const hitEl = this.list.find(hit => hit.type === type && hit.id === id);\n    if (hitEl) hitEl.isActive = false;\n  }\n  public update(): void {\n    const { list } = this;\n    for (let i = 0; i < list.length; i++) {\n      const hitEl = list[i];\n      if (hitEl.isActive) {\n        hitEl.isTapped = true;\n        hitEl.isMoving = false;\n      } else list.splice(i--, 1);\n    }\n  }\n  public clear(type: HitType): void {\n    for (const i of this.list) if (i.type === type) this.deactivate(type, i.id);\n  }\n}\nexport class JudgeEvent {\n  public offsetX: number;\n  public offsetY: number;\n  public type: number;\n  public judged: boolean;\n  public event?: HitEvent;\n  public preventBad: boolean;\n  public constructor(offsetX: number, offsetY: number, type: number, event?: HitEvent) {\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.type = type | 0; // 1-Tap,2-Hold/Drag,3-Move\n    this.judged = false; // 是否被判定\n    this.event = event; // Flick专用回调\n    this.preventBad = false; // 是否阻止判定为Bad\n  }\n}\n","export class Stat {\n  public level: number;\n  public noteRank: [number, number, number, number, number, number, number, number];\n  public combos: [number, number, number, number, number];\n  public maxcombo: number;\n  public combo: number;\n  private cumDisp: number;\n  private curDisp: number;\n  private numDisp: number;\n  private numOfNotes: number;\n  private data: Record<string, string>;\n  private id: string;\n  public format: string;\n  public constructor() {\n    this.level = 0;\n    this.noteRank = [0, 0, 0, 0, 0, 0, 0, 0];\n    this.combos = [0, 0, 0, 0, 0];\n    this.cumDisp = 0;\n    this.curDisp = 0;\n    this.numDisp = 0;\n    this.maxcombo = 0;\n    this.combo = 0;\n    this.numOfNotes = 0;\n    this.data = {};\n    this.id = '';\n    this.format = '';\n  }\n  public get good(): number {\n    return this.noteRank[7] + this.noteRank[3];\n  }\n  public get bad(): number {\n    return this.noteRank[6] + this.noteRank[2];\n  }\n  public get great(): number {\n    return this.noteRank[5] + this.noteRank[1];\n  }\n  public get perfect(): number {\n    return this.noteRank[4] + this.great;\n  }\n  public get all(): number {\n    return this.perfect + this.good + this.bad;\n  }\n  public get scoreNum(): number {\n    const a = 1e6 * (this.perfect * 0.9 + this.good * 0.585 + this.maxcombo * 0.1) / this.numOfNotes;\n    return isFinite(a) ? a : 0;\n  }\n  public get scoreStr(): string {\n    const a = this.scoreNum.toFixed(0);\n    return '0'.repeat(a.length < 7 ? 7 - a.length : 0) + a;\n  }\n  public get accNum(): number {\n    const a = (this.perfect + this.good * 0.65) / this.all;\n    return isFinite(a) ? a : 1;\n  }\n  public get accStr(): string {\n    return `${(100 * this.accNum).toFixed(2)}\\uff05`;\n  }\n  public get avgDispStr(): string {\n    const a = Math.trunc(this.cumDisp / this.numDisp * 1e3) || 0;\n    return `${a > 0 ? '+' : ''}${a.toFixed(0)}ms`;\n  }\n  public get curDispStr(): string {\n    const a = Math.trunc(this.curDisp * 1e3);\n    return `${a > 0 ? '+' : ''}${a.toFixed(0)}ms`;\n  }\n  public get lineStatus(): 0 | 1 | 3 {\n    if (this.bad) return 0;\n    if (this.good) return 3;\n    return 1;\n  }\n  public get rankStatus(): 0 | 1 | 2 | 3 | 4 | 5 | 6 {\n    const a = Math.round(this.scoreNum);\n    if (a >= 1e6) return 0;\n    if (a >= 9.6e5) return 1;\n    if (a >= 9.2e5) return 2;\n    if (a >= 8.8e5) return 3;\n    if (a >= 8.2e5) return 4;\n    if (a >= 7e5) return 5;\n    return 6;\n  }\n  public get localData(): string {\n    const l1 = Math.round(this.accNum * 1e4 + 566).toString(22).slice(-3);\n    const l2 = Math.round(this.scoreNum + 40672).toString(32).slice(-4);\n    const l3 = this.level.toString(36).slice(-1);\n    return l1 + l2 + l3;\n  }\n  public static removeLegacy(key: string): void {\n    const item = localStorage.getItem('phi');\n    if (item == null) return;\n    localStorage.setItem(key, item);\n    localStorage.removeItem('phi');\n  }\n  public getData(isAuto: boolean, speed = ''): StatData {\n    const s1 = this.data[this.id].slice(0, 3);\n    const s2 = this.data[this.id].slice(3, 7);\n    const l1 = Math.round(this.accNum * 1e4 + 566).toString(22).slice(-3);\n    const l2 = Math.round(this.scoreNum + 40672).toString(32).slice(-4);\n    const l3 = this.level.toString(36).slice(-1);\n    const na = parseInt(s2, 32) - 40672;\n    const sa = na.toFixed(0);\n    const sb = '0'.repeat(sa.length < 7 ? 7 - sa.length : 0) + sa;\n    if (!isAuto) this.data[this.id] = (s1 > l1 ? s1 : l1) + (s2 > l2 ? s2 : l2) + l3;\n    const arr = [];\n    for (const [i, v] of Object.entries(this.data)) arr.push(i + v);\n    localStorage.setItem(`phi-${speed}`, arr.sort(() => Math.random() - 0.5).join(''));\n    const pbj = {\n      newBestColor: s2 < l2 ? '#18ffbf' : '#fff',\n      newBestStr: s2 < l2 ? 'NEW BEST' : 'BEST',\n      scoreBest: sb,\n      scoreDelta: `${s2 > l2 ? '- ' : '+ '}${Math.abs(na - Math.round(this.scoreNum))}`,\n      textAboveColor: '#65fe43',\n      textAboveStr: '  ( Speed {SPEED}x )',\n      textBelowColor: '#fe4365',\n      textBelowStr: 'AUTO PLAY'\n    };\n    if (isAuto) {\n      return Object.assign(pbj, {\n        newBestColor: '#fff',\n        newBestStr: 'BEST',\n        scoreDelta: ''\n      });\n    }\n    if (this.lineStatus === 1) {\n      return Object.assign(pbj, {\n        textBelowStr: 'ALL  PERFECT',\n        textBelowColor: '#ffc500'\n      });\n    }\n    if (this.lineStatus === 3) {\n      return Object.assign(pbj, {\n        textBelowStr: 'FULL  COMBO',\n        textBelowColor: '#00bef1'\n      });\n    }\n    return Object.assign(pbj, { textBelowStr: '' });\n  }\n  public reset(numOfNotes: number, id: string, format: string, speed = ''): void {\n    const key = `phi-${speed}`;\n    this.numOfNotes = numOfNotes | 0;\n    this.combo = 0;\n    this.maxcombo = 0;\n    this.noteRank = [0, 0, 0, 0, 0, 0, 0, 0]; // 4:PM,5:PE,1:PL,7:GE,3:GL,6:BE,2:BL\n    this.combos = [0, 0, 0, 0, 0]; // 不同种类note实时连击次数\n    this.cumDisp = 0;\n    this.curDisp = 0;\n    this.numDisp = 0;\n    if (speed === '') Stat.removeLegacy(key);\n    const str = localStorage.getItem(key) ?? (localStorage.setItem(key, ''), ''); // 初始化存储\n    for (let i = 0; i < Math.floor(str.length / 40); i++) {\n      const data = str.slice(i * 40, i * 40 + 40);\n      this.data[data.slice(0, 32)] = data.slice(-8);\n    }\n    if (id) {\n      if (!this.data[id]) this.data[id] = this.localData;\n      this.id = id;\n    }\n    this.format = format;\n  }\n  public addCombo(status: number, type: number): void {\n    this.noteRank[status]++;\n    this.combo = status % 4 === 2 ? 0 : this.combo + 1;\n    if (this.combo > this.maxcombo) this.maxcombo = this.combo;\n    this.combos[0]++;\n    this.combos[type]++;\n  }\n  public addDisp(disp: number): void {\n    this.curDisp = disp;\n    this.cumDisp += disp;\n    this.numDisp++;\n  }\n}\n","export default function(\n  width: number, height: number,\n  options?: CanvasRenderingContext2DSettings\n): CanvasRenderingContext2D {\n  const canvas = document.createElement('canvas');\n  Object.assign(canvas, { width, height });\n  const ctx = canvas.getContext('2d', options);\n  if (!ctx) throw new TypeError('Failed to create canvas context');\n  return ctx;\n}\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/* eslint-disable no-bitwise -- used for calculations */\n\n/* eslint-disable unicorn/prefer-query-selector -- aiming at\n  backward-compatibility */\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.\n*\n* @module StackBlur\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @param {boolean} useOffset\n * @param {boolean} skipStyles\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel, useOffset, skipStyles) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n\n  if (!img || !('naturalWidth' in img)) {\n    return;\n  }\n\n  var dimensionType = useOffset ? 'offset' : 'natural';\n  var w = img[dimensionType + 'Width'];\n  var h = img[dimensionType + 'Height'];\n\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n\n  if (!skipStyles) {\n    canvas.style.width = w + 'px';\n    canvas.style.height = h + 'px';\n  }\n\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, w, h);\n\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method ' + 'in processCanvasRGB(A) calls!');\n  }\n\n  var context = canvas.getContext('2d');\n\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null,\n      stackOut = null,\n      yw = 0,\n      yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (var y = 0; y < height; y++) {\n    stack = stackStart;\n    var pr = pixels[yi],\n        pg = pixels[yi + 1],\n        pb = pixels[yi + 2],\n        pa = pixels[yi + 3];\n\n    for (var _i = 0; _i < radiusPlus1; _i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    var rInSum = 0,\n        gInSum = 0,\n        bInSum = 0,\n        aInSum = 0,\n        rOutSum = radiusPlus1 * pr,\n        gOutSum = radiusPlus1 * pg,\n        bOutSum = radiusPlus1 * pb,\n        aOutSum = radiusPlus1 * pa,\n        rSum = sumFactor * pr,\n        gSum = sumFactor * pg,\n        bSum = sumFactor * pb,\n        aSum = sumFactor * pa;\n\n    for (var _i2 = 1; _i2 < radiusPlus1; _i2++) {\n      var p = yi + ((widthMinus1 < _i2 ? widthMinus1 : _i2) << 2);\n      var r = pixels[p],\n          g = pixels[p + 1],\n          b = pixels[p + 2],\n          a = pixels[p + 3];\n      var rbs = radiusPlus1 - _i2;\n      rSum += (stack.r = r) * rbs;\n      gSum += (stack.g = g) * rbs;\n      bSum += (stack.b = b) * rbs;\n      aSum += (stack.a = a) * rbs;\n      rInSum += r;\n      gInSum += g;\n      bInSum += b;\n      aInSum += a;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var x = 0; x < width; x++) {\n      var paInitial = aSum * mulSum >> shgSum;\n      pixels[yi + 3] = paInitial;\n\n      if (paInitial !== 0) {\n        var _a2 = 255 / paInitial;\n\n        pixels[yi] = (rSum * mulSum >> shgSum) * _a2;\n        pixels[yi + 1] = (gSum * mulSum >> shgSum) * _a2;\n        pixels[yi + 2] = (bSum * mulSum >> shgSum) * _a2;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n\n      var _p = x + radius + 1;\n\n      _p = yw + (_p < widthMinus1 ? _p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[_p];\n      gInSum += stackIn.g = pixels[_p + 1];\n      bInSum += stackIn.b = pixels[_p + 2];\n      aInSum += stackIn.a = pixels[_p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      var _stackOut = stackOut,\n          _r = _stackOut.r,\n          _g = _stackOut.g,\n          _b = _stackOut.b,\n          _a = _stackOut.a;\n      rOutSum += _r;\n      gOutSum += _g;\n      bOutSum += _b;\n      aOutSum += _a;\n      rInSum -= _r;\n      gInSum -= _g;\n      bInSum -= _b;\n      aInSum -= _a;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (var _x = 0; _x < width; _x++) {\n    yi = _x << 2;\n\n    var _pr = pixels[yi],\n        _pg = pixels[yi + 1],\n        _pb = pixels[yi + 2],\n        _pa = pixels[yi + 3],\n        _rOutSum = radiusPlus1 * _pr,\n        _gOutSum = radiusPlus1 * _pg,\n        _bOutSum = radiusPlus1 * _pb,\n        _aOutSum = radiusPlus1 * _pa,\n        _rSum = sumFactor * _pr,\n        _gSum = sumFactor * _pg,\n        _bSum = sumFactor * _pb,\n        _aSum = sumFactor * _pa;\n\n    stack = stackStart;\n\n    for (var _i3 = 0; _i3 < radiusPlus1; _i3++) {\n      stack.r = _pr;\n      stack.g = _pg;\n      stack.b = _pb;\n      stack.a = _pa;\n      stack = stack.next;\n    }\n\n    var yp = width;\n    var _gInSum = 0,\n        _bInSum = 0,\n        _aInSum = 0,\n        _rInSum = 0;\n\n    for (var _i4 = 1; _i4 <= radius; _i4++) {\n      yi = yp + _x << 2;\n\n      var _rbs = radiusPlus1 - _i4;\n\n      _rSum += (stack.r = _pr = pixels[yi]) * _rbs;\n      _gSum += (stack.g = _pg = pixels[yi + 1]) * _rbs;\n      _bSum += (stack.b = _pb = pixels[yi + 2]) * _rbs;\n      _aSum += (stack.a = _pa = pixels[yi + 3]) * _rbs;\n      _rInSum += _pr;\n      _gInSum += _pg;\n      _bInSum += _pb;\n      _aInSum += _pa;\n      stack = stack.next;\n\n      if (_i4 < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = _x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var _y = 0; _y < height; _y++) {\n      var _p2 = yi << 2;\n\n      pixels[_p2 + 3] = _pa = _aSum * mulSum >> shgSum;\n\n      if (_pa > 0) {\n        _pa = 255 / _pa;\n        pixels[_p2] = (_rSum * mulSum >> shgSum) * _pa;\n        pixels[_p2 + 1] = (_gSum * mulSum >> shgSum) * _pa;\n        pixels[_p2 + 2] = (_bSum * mulSum >> shgSum) * _pa;\n      } else {\n        pixels[_p2] = pixels[_p2 + 1] = pixels[_p2 + 2] = 0;\n      }\n\n      _rSum -= _rOutSum;\n      _gSum -= _gOutSum;\n      _bSum -= _bOutSum;\n      _aSum -= _aOutSum;\n      _rOutSum -= stackIn.r;\n      _gOutSum -= stackIn.g;\n      _bOutSum -= stackIn.b;\n      _aOutSum -= stackIn.a;\n      _p2 = _x + ((_p2 = _y + radiusPlus1) < heightMinus1 ? _p2 : heightMinus1) * width << 2;\n      _rSum += _rInSum += stackIn.r = pixels[_p2];\n      _gSum += _gInSum += stackIn.g = pixels[_p2 + 1];\n      _bSum += _bInSum += stackIn.b = pixels[_p2 + 2];\n      _aSum += _aInSum += stackIn.a = pixels[_p2 + 3];\n      stackIn = stackIn.next;\n      _rOutSum += _pr = stackOut.r;\n      _gOutSum += _pg = stackOut.g;\n      _bOutSum += _pb = stackOut.b;\n      _aOutSum += _pa = stackOut.a;\n      _rInSum -= _pr;\n      _gInSum -= _pg;\n      _bInSum -= _pb;\n      _aInSum -= _pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n  var p, rbs;\n  var yw = 0,\n      yi = 0;\n\n  for (var y = 0; y < height; y++) {\n    var pr = pixels[yi],\n        pg = pixels[yi + 1],\n        pb = pixels[yi + 2],\n        rOutSum = radiusPlus1 * pr,\n        gOutSum = radiusPlus1 * pg,\n        bOutSum = radiusPlus1 * pb,\n        rSum = sumFactor * pr,\n        gSum = sumFactor * pg,\n        bSum = sumFactor * pb;\n    stack = stackStart;\n\n    for (var _i5 = 0; _i5 < radiusPlus1; _i5++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    var rInSum = 0,\n        gInSum = 0,\n        bInSum = 0;\n\n    for (var _i6 = 1; _i6 < radiusPlus1; _i6++) {\n      p = yi + ((widthMinus1 < _i6 ? widthMinus1 : _i6) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - _i6);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >> shgSum;\n      pixels[yi + 1] = gSum * mulSum >> shgSum;\n      pixels[yi + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (var _x2 = 0; _x2 < width; _x2++) {\n    yi = _x2 << 2;\n\n    var _pr2 = pixels[yi],\n        _pg2 = pixels[yi + 1],\n        _pb2 = pixels[yi + 2],\n        _rOutSum2 = radiusPlus1 * _pr2,\n        _gOutSum2 = radiusPlus1 * _pg2,\n        _bOutSum2 = radiusPlus1 * _pb2,\n        _rSum2 = sumFactor * _pr2,\n        _gSum2 = sumFactor * _pg2,\n        _bSum2 = sumFactor * _pb2;\n\n    stack = stackStart;\n\n    for (var _i7 = 0; _i7 < radiusPlus1; _i7++) {\n      stack.r = _pr2;\n      stack.g = _pg2;\n      stack.b = _pb2;\n      stack = stack.next;\n    }\n\n    var _rInSum2 = 0,\n        _gInSum2 = 0,\n        _bInSum2 = 0;\n\n    for (var _i8 = 1, yp = width; _i8 <= radius; _i8++) {\n      yi = yp + _x2 << 2;\n      _rSum2 += (stack.r = _pr2 = pixels[yi]) * (rbs = radiusPlus1 - _i8);\n      _gSum2 += (stack.g = _pg2 = pixels[yi + 1]) * rbs;\n      _bSum2 += (stack.b = _pb2 = pixels[yi + 2]) * rbs;\n      _rInSum2 += _pr2;\n      _gInSum2 += _pg2;\n      _bInSum2 += _pb2;\n      stack = stack.next;\n\n      if (_i8 < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = _x2;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var _y2 = 0; _y2 < height; _y2++) {\n      p = yi << 2;\n      pixels[p] = _rSum2 * mulSum >> shgSum;\n      pixels[p + 1] = _gSum2 * mulSum >> shgSum;\n      pixels[p + 2] = _bSum2 * mulSum >> shgSum;\n      _rSum2 -= _rOutSum2;\n      _gSum2 -= _gOutSum2;\n      _bSum2 -= _bOutSum2;\n      _rOutSum2 -= stackIn.r;\n      _gOutSum2 -= stackIn.g;\n      _bOutSum2 -= stackIn.b;\n      p = _x2 + ((p = _y2 + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      _rSum2 += _rInSum2 += stackIn.r = pixels[p];\n      _gSum2 += _gInSum2 += stackIn.g = pixels[p + 1];\n      _bSum2 += _bInSum2 += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      _rOutSum2 += _pr2 = stackOut.r;\n      _gOutSum2 += _pg2 = stackOut.g;\n      _bOutSum2 += _pb2 = stackOut.b;\n      _rInSum2 -= _pr2;\n      _gInSum2 -= _pg2;\n      _bInSum2 -= _pb2;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n *\n */\n\n\nvar BlurStack =\n/**\n * Set properties.\n */\nfunction BlurStack() {\n  _classCallCheck(this, BlurStack);\n\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\n\nexport { BlurStack, processCanvasRGB as canvasRGB, processCanvasRGBA as canvasRGBA, processImage as image, processImageDataRGB as imageDataRGB, processImageDataRGBA as imageDataRGBA };\n","import createCtx from './createCtx';\nimport { canvasRGBA } from 'stackblur-canvas';\n// 十六进制color转rgba数组\nexport function hex2rgba(color: string): Uint8ClampedArray {\n  const ctx = createCtx(1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.getImageData(0, 0, 1, 1).data;\n}\nexport async function imgPainter(img: ImageBitmap, color: string, limit = 512): Promise<ImageBitmap> {\n  const dataRGBA = hex2rgba(color);\n  const ctx = createCtx(img.width, img.height, { willReadFrequently: true }); // Warning\n  ctx.drawImage(img, 0, 0);\n  for (let dy = 0; dy < img.height; dy += limit) {\n    for (let dx = 0; dx < img.width; dx += limit) {\n      const imgData = ctx.getImageData(dx, dy, limit, limit);\n      for (let i = 0; i < imgData.data.length / 4; i++) {\n        imgData.data[i * 4] = dataRGBA[0];\n        imgData.data[i * 4 + 1] = dataRGBA[1];\n        imgData.data[i * 4 + 2] = dataRGBA[2];\n        imgData.data[i * 4 + 3] *= dataRGBA[3] / 255;\n      }\n      ctx.putImageData(imgData, dx, dy);\n    }\n  }\n  return createImageBitmap(ctx.canvas);\n}\nexport async function imgBlur(img: ImageBitmap): Promise<ImageBitmap> {\n  const ctx = createCtx(img.width, img.height);\n  const { width: w, height: h } = ctx.canvas;\n  ctx.drawImage(img, 0, 0);\n  canvasRGBA(ctx.canvas, 0, 0, w, h, Math.ceil(Math.min(w, h) * 0.0125));\n  return createImageBitmap(ctx.canvas);\n}\nexport async function imgShader(img: ImageBitmap, color: string, limit = 512): Promise<ImageBitmap> {\n  const dataRGBA = hex2rgba(color);\n  const ctx = createCtx(img.width, img.height, { willReadFrequently: true }); // warning\n  ctx.drawImage(img, 0, 0);\n  for (let dy = 0; dy < img.height; dy += limit) {\n    for (let dx = 0; dx < img.width; dx += limit) {\n      const imgData = ctx.getImageData(dx, dy, limit, limit);\n      for (let i = 0; i < imgData.data.length / 4; i++) {\n        imgData.data[i * 4] *= dataRGBA[0] / 255;\n        imgData.data[i * 4 + 1] *= dataRGBA[1] / 255;\n        imgData.data[i * 4 + 2] *= dataRGBA[2] / 255;\n        imgData.data[i * 4 + 3] *= dataRGBA[3] / 255;\n      }\n      ctx.putImageData(imgData, dx, dy);\n    }\n  }\n  return createImageBitmap(ctx.canvas);\n}\nexport namespace ImgAny{\n  export function decode(img: ImageBitmap, border = 0): ArrayBuffer {\n    const ctx1 = createCtx(img.width - border * 2, img.height - border * 2);\n    ctx1.drawImage(img, -border, -border);\n    const id = ctx1.getImageData(0, 0, ctx1.canvas.width, ctx1.canvas.width);\n    const ab = new Uint8Array(id.data.length / 4 * 3);\n    for (let i = 0; i < ab.length; i++) ab[i] = id.data[(i / 3 | 0) * 4 + i % 3] ^ i * 3473;\n    const size = new DataView(ab.buffer, 0, 4).getUint32(0);\n    return ab.buffer.slice(4, size + 4);\n  }\n  export function decodeAlt(img: ImageBitmap): ArrayBuffer {\n    const ctx = createCtx(img.width, img.height);\n    ctx.drawImage(img, 0, 0);\n    const id = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n    const ab = new Uint8Array(id.data.length / 4 * 3);\n    const mask = (v = 0, i = 0) => v ^ i ** 2 * 3473 & 255;\n    for (let i = 0; i < ab.length; i++) ab[i] = id.data[(i / 3 | 0) * 4 + i % 3];\n    const combined = new Uint8Array(ab.length / 2);\n    for (let i = 0; i < ab.length / 2; i++) combined[i] = mask((ab[i * 2] + 8) / 17 << 4 | (ab[i * 2 + 1] + 8) / 17, i);\n    const size = new DataView(combined.buffer, 0, 4).getUint32(0);\n    return combined.buffer.slice(4, size + 4);\n  }\n}\nexport async function imgSplit(img: ImageBitmap, limitX?: number, limitY?: number): Promise<ImageBitmap[]> {\n  const dx = Math.floor(limitX ?? Math.min(img.width, img.height));\n  const dy = Math.floor(limitY ?? dx);\n  const arr = [];\n  for (let sy = 0; sy < img.height; sy += dy) {\n    for (let sx = 0; sx < img.width; sx += dx) {\n      arr.push(createImageBitmap(img, sx, sy, dx, dy));\n    }\n  }\n  return Promise.all(arr);\n}\n","export class Checkbox {\n  public container: HTMLDivElement;\n  public checkbox: HTMLInputElement;\n  public label: HTMLLabelElement;\n  public constructor(text: string, checked = false) {\n    this.container = document.createElement('div');\n    this.checkbox = document.createElement('input');\n    this.checkbox.type = 'checkbox';\n    this.checkbox.id = Utils.randomUUID();\n    this.checkbox.checked = checked;\n    this.label = document.createElement('label');\n    this.label.htmlFor = this.checkbox.id;\n    this.label.textContent = text;\n    this.container.appendChild(this.checkbox);\n    this.container.appendChild(this.label);\n  }\n  public get checked(): boolean {\n    return this.checkbox.checked;\n  }\n  public set checked(value: boolean) {\n    this.checkbox.checked = value;\n    this.checkbox.dispatchEvent(new Event('change'));\n  }\n  public appendTo(container: HTMLElement): this {\n    container.appendChild(this.container);\n    return this;\n  }\n  public appendBefore(node: HTMLElement): this {\n    if (node.parentNode == null) throw new Error('Node must have a parent node');\n    node.parentNode.insertBefore(this.container, node);\n    return this;\n  }\n  public toggle(): void {\n    this.checked = !this.checkbox.checked;\n  }\n  public hook(callback: (arg0: HTMLInputElement, arg1: HTMLDivElement) => void): this {\n    callback(this.checkbox, this.container);\n    return this;\n  }\n}\n","interface HitEventsOptions<T> {\n  updateCallback?: (arg0: T) => boolean;\n  iterateCallback?: (arg0: T) => void;\n}\nexport class HitEvents<T> extends Array<T> {\n  public update: () => void;\n  public animate: () => void;\n  public constructor({\n    updateCallback = () => false,\n    iterateCallback = () => {}\n  }: HitEventsOptions<T> = {}) {\n    super();\n    this.update = this.defilter.bind(this, updateCallback);\n    this.animate = this.iterate.bind(this, iterateCallback);\n  }\n  private defilter(predicate: (arg0: T) => boolean): this {\n    let i = this.length;\n    while (i--) if (predicate(this[i])) this.splice(i, 1);\n    return this;\n  }\n  private iterate(callback: (arg0: T) => void): void {\n    for (const i of this) callback(i);\n  }\n  public add(value: T): void {\n    this[this.length] = value;\n  }\n  public clear(): void {\n    this.length = 0;\n  }\n}\n","export class HitFeedback {\n  public offsetX: number;\n  public offsetY: number;\n  public color: string;\n  public text: string;\n  public time: number;\n  public constructor(offsetX: number, offsetY: number, n1: string, n2: string) {\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.color = n1;\n    this.text = n2;\n    this.time = 0;\n  }\n  public static tap(offsetX: number, offsetY: number): HitFeedback {\n    // console.log('Tap', offsetX, offsetY);\n    return new HitFeedback(offsetX, offsetY, 'cyan', '');\n  }\n  public static hold(offsetX: number, offsetY: number): HitFeedback {\n    // console.log('Hold', offsetX, offsetY);\n    return new HitFeedback(offsetX, offsetY, 'lime', '');\n  }\n  public static move(offsetX: number, offsetY: number): HitFeedback {\n    // console.log('Move', offsetX, offsetY);\n    return new HitFeedback(offsetX, offsetY, 'violet', '');\n  }\n}\n","import type { Renderer } from '@/core';\nimport type { ScaledNote } from './ScaledNote';\nexport class HitImage {\n  public offsetX: number;\n  public offsetY: number;\n  public time: number;\n  public duration: number;\n  public effects: ScaledNote[];\n  public direction: number[][];\n  public color: string;\n  public constructor(offsetX: number, offsetY: number, n1: string, n3: string) {\n    const packs = hook.noteRender.hitFX[n1]; // TODO: Refactor\n    this.offsetX = offsetX || 0;\n    this.offsetY = offsetY || 0;\n    this.time = performance.now();\n    this.duration = packs.duration;\n    this.effects = packs.effects;\n    this.direction = Array(packs.numOfParts || 0).fill(0).map(() => [Math.random() * 80 + 185, Math.random() * 2 * Math.PI]);\n    this.color = n3;\n  }\n  public static perfect(offsetX: number, offsetY: number, _note: Renderer.Note): HitImage {\n    // console.log(note);\n    return new HitImage(offsetX, offsetY, 'Perfect', '#ffeca0');\n  }\n  public static good(offsetX: number, offsetY: number, _note: Renderer.Note): HitImage {\n    // console.log(note);\n    return new HitImage(offsetX, offsetY, 'Good', '#b4e1ff');\n  }\n}\n","export class HitWord {\n  public offsetX: number;\n  public offsetY: number;\n  public time: number;\n  public duration: number;\n  public color: string;\n  public text: string;\n  public constructor(offsetX: number, offsetY: number, n1: string, n2: string) {\n    this.offsetX = offsetX || 0;\n    this.offsetY = offsetY || 0;\n    this.time = performance.now();\n    this.duration = 250;\n    this.color = n1;\n    this.text = n2;\n  }\n  public static early(offsetX: number, offsetY: number): HitWord {\n    // console.log('Tap', offsetX, offsetY);\n    return new HitWord(offsetX, offsetY, '#03aaf9', 'Early');\n  }\n  public static late(offsetX: number, offsetY: number): HitWord {\n    // console.log('Hold', offsetX, offsetY);\n    return new HitWord(offsetX, offsetY, '#ff4612', 'Late');\n  }\n}\n","export class ScaledNote {\n  public full: (ctx: CanvasRenderingContext2D) => void;\n  public head: (ctx: CanvasRenderingContext2D) => void;\n  public body: (ctx: CanvasRenderingContext2D, offset: number, length: number) => void;\n  public tail: (ctx: CanvasRenderingContext2D, offset: number) => void;\n  // private readonly img: ImageBitmap;\n  // private readonly scale: number;\n  public constructor(img: ImageBitmap, scale: number, compacted = false) {\n    // this.img = img;\n    // this.scale = scale;\n    const dx = -img.width / 2 * scale;\n    const dy = -img.height / 2 * scale;\n    const dw = img.width * scale;\n    const dh = img.height * scale;\n    this.full = ctx => ctx.drawImage(img, dx, dy, dw, dh);\n    this.head = ctx => ctx.drawImage(img, dx, 0, dw, dh);\n    this.body = (ctx, offset, length) => ctx.drawImage(img, dx, offset, dw, length);\n    this.tail = (ctx, offset) => ctx.drawImage(img, dx, offset - dh, dw, dh);\n    if (compacted) {\n      this.head = ctx => ctx.drawImage(img, dx, dy, dw, dh);\n      this.tail = (ctx, offset) => ctx.drawImage(img, dx, offset - dh - dy, dw, dh);\n    }\n  }\n}\n","interface Size {\n  width: number;\n  height: number;\n}\n// 调节画面尺寸和全屏相关(返回source播放aegleseeker会出现迷之error)\nexport function adjustSize(source: Size, dest: Size, scale: number): [number, number, number, number] {\n  const { width: sw, height: sh } = source;\n  const { width: dw, height: dh } = dest;\n  if (dw * sh > dh * sw) return [dw * (1 - scale) / 2, (dh - dw * sh / sw * scale) / 2, dw * scale, dw * sh / sw * scale];\n  return [(dw - dh * sw / sh * scale) / 2, dh * (1 - scale) / 2, dh * sw / sh * scale, dh * scale];\n}\n","class BetterMessageBox {\n  public host: string;\n  public code: number;\n  public name: string;\n  public target: string;\n  public list: BetterMessage[];\n  public updateHTML: (...args: any[]) => void;\n  public constructor(msg: BetterMessage) {\n    this.host = msg.host;\n    this.code = msg.code;\n    this.name = msg.name;\n    this.target = msg.target;\n    this.list = [msg];\n    this.updateHTML = () => {};\n  }\n  public appendMessage(msg: BetterMessage): boolean {\n    if (this.host !== msg.host) return false;\n    if (this.code !== msg.code) return false;\n    if (this.name !== msg.name) return false;\n    if (this.target !== msg.target) return false;\n    this.list.push(msg);\n    this.updateHTML();\n    return true;\n  }\n}\nexport abstract class MessageHandler {\n  private lastMessage = '';\n  private readonly betterMessageBoxes: BetterMessageBox[];\n  public abstract nodeText: HTMLElement;\n  public abstract nodeView: HTMLElement;\n  public constructor() {\n    this.betterMessageBoxes = [];\n  }\n  private addBox(type = 'warn'): HTMLDivElement {\n    const msgbox = document.createElement('div');\n    msgbox.setAttribute('type', type);\n    msgbox.classList.add('msgbox');\n    return this.nodeView.appendChild(msgbox);\n  }\n  private removeNodeBox(nodeBox: HTMLDivElement): void {\n    nodeBox.remove();\n    this.updateText(this.lastMessage);\n  }\n  private removeBetterMessageBox(msgbox: BetterMessageBox): void {\n    const index = this.betterMessageBoxes.indexOf(msgbox);\n    if (index !== -1) this.betterMessageBoxes.splice(index, 1);\n  }\n  private msgbox(msg = '', type = '', fatal = false): void {\n    const msgbox = this.addBox(type);\n    msgbox.innerHTML = msg;\n    const btn = document.createElement('a');\n    btn.innerText = '忽略';\n    btn.style.float = 'right';\n    btn.onclick = () => this.removeNodeBox(msgbox);\n    btn.classList.toggle('disabled', fatal);\n    msgbox.appendChild(btn);\n  }\n  private bmsgbox(msg: BetterMessage): BetterMessageBox {\n    const msgbox = new BetterMessageBox(msg);\n    const page = { page: 1, size: 5, get pages() { return Math.ceil(msgbox.list.length / this.size) } };\n    // 日志文本\n    const text = document.createTextNode('');\n    // 按钮[全部忽略]\n    const btnIgnoreAll = document.createElement('a');\n    btnIgnoreAll.innerText = '全部忽略';\n    btnIgnoreAll.classList.add('bm-rbtn');\n    // 当前页数(可编辑)\n    const nodePageNum = document.createElement('span');\n    nodePageNum.textContent = String(page.page);\n    nodePageNum.contentEditable = 'true';\n    nodePageNum.style.cssText = ';color:red;outline:none;text-decoration:underline';\n    // 总页数\n    const nodePages = document.createElement('span');\n    nodePages.textContent = String(page.pages);\n    // 按钮[上一页]\n    const btnPrevousPage = document.createElement('a');\n    btnPrevousPage.innerText = '上一页';\n    // 按钮[下一页]\n    const btnNextPage = document.createElement('a');\n    btnNextPage.innerText = '下一页';\n    // 控制栏\n    const nodeControl = document.createElement('div');\n    nodeControl.classList.add('bm-item');\n    nodeControl.append(nodePageNum, ' / ', nodePages, ' 页 ', btnPrevousPage, ' ', btnNextPage);\n    // 消息框\n    const nodeBMsg = this.addBox(['notice', 'warn', 'error'][msgbox.code]);\n    nodeBMsg.append(text, btnIgnoreAll, nodeControl);\n    // 脚本\n    btnIgnoreAll.setAttribute('bm-ctrl', '');\n    nodeControl.setAttribute('bm-ctrl', '');\n    const updatePage = (num: number) => {\n      if (!isNaN(num)) page.page = Math.max(1, Math.min(num, page.pages));\n      nodePageNum.textContent = String(page.page);\n      msgbox.updateHTML();\n    };\n    nodePageNum.onblur = () => updatePage(parseInt(nodePageNum.textContent!));\n    btnPrevousPage.onclick = () => updatePage(page.page - 1);\n    btnNextPage.onclick = () => updatePage(page.page + 1);\n    btnIgnoreAll.onclick = () => {\n      this.removeBetterMessageBox(msgbox);\n      this.removeNodeBox(nodeBMsg);\n    };\n    // 防抖\n    let timer = 0;\n    msgbox.updateHTML = () => {\n      clearTimeout(timer);\n      timer = self.setTimeout((() => {\n        const { pages } = page;\n        if (page.page > pages) page.page = pages;\n        const start = (page.page - 1) * page.size;\n        text.textContent = `${msgbox.code ? `${msgbox.host}: 检测到${msgbox.list.length}个${msgbox.name}\\n` : ''}来自${msgbox.target}`;\n        nodePageNum.textContent = String(page.page);\n        nodePages.textContent = String(pages);\n        for (const i of nodeBMsg.querySelectorAll('[bm-ctrl]')) (i as HTMLElement).classList.toggle('hide', pages <= 1);\n        for (const i of nodeBMsg.querySelectorAll('[bm-cell]')) i.remove();\n        for (const i of msgbox.list.slice(start, start + page.size)) {\n          const btnIgnore = document.createElement('a');\n          btnIgnore.innerText = '忽略';\n          btnIgnore.classList.add('bm-rbtn');\n          btnIgnore.onclick = () => {\n            msgbox.list.splice(msgbox.list.indexOf(i), 1);\n            msgbox.updateHTML();\n            if (msgbox.list.length === 0) {\n              this.removeBetterMessageBox(msgbox);\n              this.removeNodeBox(nodeBMsg);\n            } else this.updateText(this.lastMessage);\n          };\n          const div = document.createElement('div');\n          div.setAttribute('bm-cell', '');\n          div.classList.add('bm-item');\n          div.append(`${i.name}: ${i.message}`, btnIgnore);\n          nodeBMsg.appendChild(div);\n        }\n      }));\n    };\n    this.betterMessageBoxes.push(msgbox);\n    return msgbox;\n  }\n  private getBetterMessageBox(msg: BetterMessage): BetterMessageBox {\n    for (const i of this.betterMessageBoxes) {\n      if (i.appendMessage(msg)) return i;\n    }\n    return this.bmsgbox(msg);\n  }\n  public updateText(msg = '', type = ''): void {\n    const num = this.nodeView.querySelectorAll('.msgbox[type=warn]').length + this.betterMessageBoxes.reduce((a, b) => a + b.list.length - 1, 0);\n    if (type === 'error') {\n      this.nodeText.className = 'error';\n      this.nodeText.innerText = msg;\n    } else {\n      this.nodeText.className = num ? 'warning' : 'accept';\n      this.nodeText.innerText = msg + (num ? `（发现${num}个问题，点击查看）` : '');\n      this.lastMessage = msg;\n    }\n  }\n  public sendWarning(msg: BetterMessage | string = '', isHTML = false): void {\n    if (typeof msg === 'string') this.msgbox(isHTML ? msg : Utils.escapeHTML(msg), 'warn');\n    else this.getBetterMessageBox(msg).updateHTML();\n    this.updateText(this.lastMessage);\n  }\n  public sendError(msg = '', html = '', fatal = false): void {\n    if (html) {\n      const exp = /([A-Za-z][A-Za-z+-.]{2,}:\\/\\/|www\\.)[^\\s\\x00-\\x20\\x7f-\\x9f\"]{2,}[^\\s\\x00-\\x20\\x7f-\\x9f\"!'),.:;?\\]}]/g;\n      const ahtml = html.replace(exp, (match = '') => {\n        const url = match.startsWith('www.') ? `//${match}` : match;\n        const rpath = match.replace(`${location.origin}/`, '');\n        if (match.includes(location.origin)) return `<a href=\"#\"style=\"color:#023b8f;text-decoration:underline;\">${rpath}</a>`;\n        return `<a href=\"${url}\"target=\"_blank\"style=\"color:#023b8f;text-decoration:underline;\">${rpath}</a>`;\n      });\n      this.msgbox(ahtml, 'error', fatal);\n    }\n    this.updateText(msg, 'error');\n  }\n}\n","import './style.css';\nimport { lastupdate, pubdate, version } from '../scripts/meta.json';\nimport { full, orientation } from '@/js/common.js';\nimport { FrameAnimater } from '@/components/FrameAnimater';\nimport { FrameTimer } from '@/components/FrameTimer';\nimport { Timer } from '@/components/Timer';\nimport { FileEmitter, ZipReader, reader } from '@/utils/reader';\nimport { Renderer } from '@/core';\nimport { HitManager, JudgeEvent } from '@/components/HitManager';\nimport { Stat } from '@/components/Stat';\nimport { InteractProxy, audio } from '@/external';\nimport createCtx from '@/utils/createCtx';\nimport { ImgAny, imgBlur, imgPainter, imgShader, imgSplit } from '@/utils/ImageTools';\nimport { Checkbox, HitEvents, HitFeedback, HitImage, HitWord, ScaledNote, StatusManager } from '@/components';\nimport { Stage } from '@/components/Stage';\nimport { checkSupport } from '@/utils/checkSupport';\nimport { adjustSize } from '@/utils/adjustSize';\nimport { fixme } from '@/utils/fixme';\nimport { MessageHandler } from '@/components/MessageHandler';\nself._i = ['Phixos', version.split('.'), pubdate, lastupdate];\nconst $id = (query: string): HTMLElement => document.getElementById(query) || (() => { throw new Error(`Cannot find element: ${query}`) })();\nconst $ = (query: string) => document.body.querySelector(query);\nconst $$ = (query: string) => document.body.querySelectorAll(query);\nconst viewNav = $id('view-nav') as HTMLDivElement;\nconst viewCfg = $id('view-cfg') as HTMLDivElement;\nconst viewMsg = $id('view-msg') as HTMLDivElement;\nconst viewNav2 = $id('view-nav2') as HTMLDivElement;\nconst viewRmg = $id('view-rmg') as HTMLDivElement;\nconst viewExt = $id('view-ext') as HTMLDivElement;\nconst coverDark = $id('cover-dark') as HTMLDivElement;\nconst coverRmg = $id('cover-rmg') as HTMLDivElement;\nconst coverView = $id('cover-view') as HTMLDivElement;\nconst buttonRmg = $id('btn-rmg') as HTMLInputElement;\nconst buttonDocs = $id('btn-docs') as HTMLInputElement;\nconst buttonMore = $id('btn-more') as HTMLInputElement;\nconst anchorCfg = $id('nav-cfg') as HTMLAnchorElement;\nconst anchorMsg = $id('nav-msg') as HTMLAnchorElement;\nconst anchorRmg = $id('nav-rmg') as HTMLAnchorElement;\nconst strongOut = $id('msg-out');\nconst blockUploader = $id('uploader') as HTMLDivElement;\nconst stageEl = $id('stage') as HTMLDivElement;\nconst selectNoteScale = $id('select-note-scale') as HTMLSelectElement;\nconst selectAspectRatio = $id('select-aspect-ratio') as HTMLSelectElement;\nconst selectBackgroundDim = $id('select-background-dim') as HTMLSelectElement;\nconst checkHighLight = $id('highLight') as HTMLInputElement;\nconst inputOffset = $id('input-offset') as HTMLInputElement;\nconst lineColor = $id('lineColor') as HTMLInputElement;\nconst checkAutoPlay = $id('autoplay') as HTMLInputElement;\nconst showTransition = $id('showTransition') as HTMLInputElement;\nconst checkFeedback = $id('feedback') as HTMLInputElement;\nconst checkImageBlur = $id('imageBlur') as HTMLInputElement;\nconst selectbg = $id('select-bg') as HTMLSelectElement;\nconst btnPlay = $id('btn-play') as HTMLInputElement;\nconst btnPause = $id('btn-pause') as HTMLInputElement;\nconst selectbgm = $id('select-bgm') as HTMLSelectElement;\nconst selectchart = $id('select-chart') as HTMLSelectElement;\nconst selectflip = $id('select-flip') as HTMLSelectElement;\nconst selectspeed = $id('select-speed') as HTMLSelectElement;\nconst inputName = $id('input-name') as HTMLInputElement;\nconst inputArtist = $id('input-artist') as HTMLInputElement;\nconst inputCharter = $id('input-charter') as HTMLInputElement;\nconst inputIllustrator = $id('input-illustrator') as HTMLInputElement;\nconst selectDifficulty = $id('select-difficulty') as HTMLSelectElement;\nconst selectLevel = $id('select-level') as HTMLSelectElement;\nconst selectVolume = $id('select-volume') as HTMLSelectElement;\nconst blockUploaderSelect = $id('uploader-select') as HTMLDivElement;\nconst blockUpload = $id('uploader-upload') as HTMLInputElement;\nconst blockUploadFile = $id('uploader-file') as HTMLLabelElement;\nconst blockUploadDir = $id('uploader-dir') as HTMLLabelElement;\nconst blockSelect = $id('select') as HTMLDivElement;\nconst blockMask = $id('mask') as HTMLDivElement;\nconst tween = {\n  easeInSine: (t: number) => 1 - Math.cos(t * Math.PI / 2),\n  easeOutSine: (t: number) => Math.sin(t * Math.PI / 2),\n  easeOutCubic: (t: number) => 1 + (t - 1) ** 3\n};\nconst time2Str = (time = 0) => `${Math.floor(time / 60)}:${`00${Math.floor(time % 60)}`.slice(-2)}`;\ninterface MainOptions {\n  modify: (chart: Chart) => Chart;\n  pressTime: number;\n  before: Map<string, () => Promise<void> | void>;\n  now: Map<string, (time: number) => void>;\n  after: Map<string, () => void>;\n  end: Map<string, () => Promise<void> | void>;\n  customDraw: ((ctx: CanvasRenderingContext2D) => void) | null;\n  filter: ((ctx: CanvasRenderingContext2D, time: number, now: number) => CanvasImageSource) | null;\n  filterOptions: Record<string, unknown>;\n  handleFile: (tag: string, total: number, promise: Promise<unknown>, oncomplete?: () => void) => Promise<unknown>;\n  uploader: typeof uploader;\n  awawa: boolean;\n  fireModal: (navHTML: string, contentHTML: string) => HTMLDivElement;\n  toast: (msg: string) => HTMLDivElement;\n  error: (msg?: string) => HTMLDivElement;\n  define: (arg0: ModuleConfig) => ModuleConfig;\n  use: (module: Promise<ModuleBase>) => Promise<unknown>;\n  stat: typeof stat;\n  app: typeof app;\n  res: typeof res;\n  audio: typeof audio;\n  sendText: (msg?: string, type?: string) => void;\n  sendWarning: (msg?: BetterMessage | string, isHTML?: boolean) => void;\n  sendError: (msg?: string, html?: string, fatal?: boolean) => void;\n  frameAnimater: typeof frameAnimater;\n  timeEnd: typeof timeEnd;\n  bgms: typeof bgms;\n  inputName: typeof inputName;\n  selectbgm: typeof selectbgm;\n  selectchart: typeof selectchart;\n  chartsMD5: typeof chartsMD5;\n  noteRender: typeof noteRender;\n  reader: typeof reader;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  ZipReader: typeof ZipReader;\n  status: typeof status;\n  tmps: typeof tmps;\n  pause: unknown;\n}\nconst main = {} as MainOptions;\nmain.modify = a => a;\nmain.pressTime = 0;\nmain.before = new Map();\nmain.now = new Map();\nmain.after = new Map();\nmain.end = new Map();\nmain.filter = null;\nmain.filterOptions = {};\ndocument.oncontextmenu = e => e.preventDefault();\nfor (const i of viewNav.children) {\n  i.addEventListener('click', function(this: HTMLElement) {\n    for (const j of viewNav.children) j.classList.toggle('active', j === this);\n    // if (!viewDoc.src) { viewDoc.src = 'docs/use.html' } // 避免阻塞页面\n    // viewDoc.classList.toggle('hide', this.id !== 'nav-use');\n    viewCfg.classList.toggle('hide', this.id !== 'nav-cfg');\n    viewMsg.classList.toggle('hide', this.id !== 'nav-msg');\n  });\n}\nfor (const i of viewNav2.children) {\n  i.addEventListener('click', function(this: HTMLElement) {\n    for (const j of viewNav2.children) j.classList.toggle('active', j === this);\n    viewRmg.classList.toggle('hide', this.id !== 'nav-rmg');\n    viewExt.classList.toggle('hide', this.id !== 'nav-ext');\n  });\n}\ncoverDark.addEventListener('click', () => {\n  coverDark.classList.add('fade');\n  coverRmg.classList.add('fade');\n  coverView.classList.add('fade');\n});\nbuttonRmg.addEventListener('click', () => {\n  coverDark.classList.remove('fade');\n  coverRmg.classList.remove('fade');\n  anchorRmg.click();\n});\nbuttonDocs.addEventListener('click', () => {\n  main.fireModal('<p>提示</p>', '<p><a href=\"https://docs.lchz\\x68.net/project/sim-phi-core\" target=\"_blank\">点击此处</a>查看使用说明</p>');\n});\nbuttonMore.addEventListener('click', () => {\n  coverDark.classList.remove('fade');\n  coverView.classList.remove('fade');\n  anchorCfg.click();\n});\nstrongOut.addEventListener('click', () => {\n  coverDark.classList.remove('fade');\n  coverView.classList.remove('fade');\n  anchorMsg.click();\n});\nconst msgHandler = new class extends MessageHandler {\n  public nodeView = viewMsg;\n  public nodeText = strongOut;\n}();\nconst sendText = msgHandler.updateText.bind(msgHandler);\nconst sendWarning = msgHandler.sendWarning.bind(msgHandler);\nconst sendError = msgHandler.sendError.bind(msgHandler);\nconst stat = new Stat();\nconst stage = new Stage(stageEl);\nconst app = new Renderer(stageEl); // test\nconst { canvas, ctx, canvasfg, ctxfg } = app;\nself.addEventListener('resize', () => stage.resize());\nclass Emitter extends EventTarget {\n  private status: string;\n  public constructor(statusInit = '') {\n    super();\n    this.status = statusInit;\n  }\n  public emit(status = '') {\n    if (this.status === status) return;\n    this.status = status;\n    this.dispatchEvent(new Event('change'));\n  }\n  public eq(status = '') {\n    return this.status === status;\n  }\n  public ne(status = '') {\n    return this.status !== status;\n  }\n}\nconst emitter = new Emitter('stop');\nconst status2 = {\n  text: '',\n  list: [] as { toString: (target: EventTarget) => void }[],\n  reg(target: EventTarget, type: string, handler: (target: EventTarget) => string) {\n    this.list[this.list.length] = { toString: () => handler(target) };\n    target.addEventListener(type, this.update.bind(this));\n  },\n  update() {\n    const arr = this.list.map(String).filter(Boolean);\n    this.text = arr.length === 0 ? '' : `(${arr.join('+')})`;\n  }\n};\nlet levelText = '';\nclass ImageStore {\n  public base: ImageBitmap;\n  public width: number;\n  public height: number;\n  private _blur: ImageBitmap | null;\n  public constructor(image: ImageBitmap) {\n    this.base = image;\n    this.width = image.width;\n    this.height = image.height;\n    this._blur = null;\n  }\n  public get blur() {\n    this.setBlur();\n    return this._blur || this.base;\n  }\n  public async setBlur() {\n    this.setBlur = async() => {};\n    this._blur = await imgBlur(this.base);\n  }\n}\nconst bgs = new Map() as Map<string, ImageStore>;\nconst bgms = new Map() as Map<string, { audio: AudioBuffer; video: HTMLVideoElement | null }>;\nconst charts = new Map() as Map<string, Chart>;\nconst chartsMD5 = new Map() as Map<string, string>;\nconst chartsFormat = new Map() as Map<string, string>;\nconst chartLineData: ChartLineData[] = []; // Line.csv\nconst chartInfoData: ChartInfoData[] = []; // Info.csv\nselectNoteScale.addEventListener('change', evt => app.setNoteScale(Number((evt.target as HTMLSelectElement).value)));\nselectAspectRatio.addEventListener('change', evt => stage.resize(Number((evt.target as HTMLSelectElement).value)));\nselectBackgroundDim.addEventListener('change', evt => app.brightness = Number((evt.target as HTMLSelectElement).value));\ncheckHighLight.addEventListener('change', evt => app.multiHint = (evt.target as HTMLInputElement).checked);\nconst status = new StatusManager('sim-phi-status').init(data => data.resetCfg);\nstatus.reg('feedback', checkFeedback);\nstatus.reg('imageBlur', checkImageBlur);\nstatus.reg('highLight', checkHighLight);\nstatus.reg('lineColor', lineColor);\nstatus.reg('autoplay', checkAutoPlay);\nstatus.reg('showTransition', showTransition);\nconst resetCfg = new Checkbox('恢复默认设置(刷新生效)').appendTo(viewCfg).hook(status.reg.bind(status, 'resetCfg'));\nconst showCE2 = new Checkbox('Early/Late特效').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'showCE2'));\nconst showPoint = new Checkbox('显示定位点').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'showPoint'));\nconst showAcc = new Checkbox('显示Acc').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'showAcc'));\nconst showStat = new Checkbox('显示统计').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'showStat'));\nconst lowRes = new Checkbox('低分辨率').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'lowRes'));\nconst lockOri = new Checkbox('横屏锁定', true).appendBefore(resetCfg.container).hook(status.reg.bind(status, 'lockOri'));\nconst maxFrame = new Checkbox('限制帧率').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'maxFrame'));\nconst autoDelay = new Checkbox('音画实时同步(若声音卡顿则建议关闭)', true).appendBefore(resetCfg.container).hook(status.reg.bind(status, 'autoDelay'));\nconst enableVP = new Checkbox('隐藏距离较远的音符').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'enableVP'));\nenableVP.checkbox.addEventListener('change', evt => app.enableVP = (evt.target as HTMLInputElement).checked);\nenableVP.checkbox.dispatchEvent(new Event('change'));\nconst enableFR = new Checkbox('使用单精度浮点运算').appendBefore(resetCfg.container).hook(status.reg.bind(status, 'enableFR'));\nenableFR.checkbox.addEventListener('change', evt => app.enableFR = (evt.target as HTMLInputElement).checked);\nenableFR.checkbox.dispatchEvent(new Event('change'));\nselectflip.addEventListener('change', evt => app.mirrorView(Number((evt.target as HTMLInputElement).value)));\nstatus.reg('selectFlip', selectflip);\nselectspeed.addEventListener('change', evt => {\n  const dict = { slowest: -9, slower: -4, faster: 3, fastest: 5 } as Record<string, number | undefined>;\n  app.speed = 2 ** ((dict[(evt.target as HTMLInputElement).value.toLowerCase()] ?? 0) / 12);\n});\nstatus.reg('selectSpeed', selectspeed);\n// 自动填写歌曲信息\nfunction adjustInfo() {\n  for (const i of chartInfoData) {\n    if (selectchart.value.trim() === i.chart) {\n      if (i.name != null) inputName.value = i.name;\n      if (i.artist != null) inputArtist.value = i.artist;\n      if (i.level != null) {\n        levelText = i.level;\n        const p = levelText.toLocaleUpperCase().split('LV.').map(a => a.trim());\n        if (p[0]) selectDifficulty.value = p[0];\n        if (p[1]) selectLevel.value = p[1];\n      }\n      if (i.illustrator != null) inputIllustrator.value = i.illustrator;\n      if (i.charter != null) inputCharter.value = i.charter;\n      if (i.music != null && bgms.has(i.music)) selectbgm.value = i.music;\n      if (i.image != null && bgs.has(i.image)) {\n        selectbg.value = i.image;\n        selectbg.dispatchEvent(new Event('change'));\n      }\n      if (i.aspectRatio != null) {\n        selectAspectRatio.value = i.aspectRatio.toString();\n        stage.resize(i.aspectRatio);\n      }\n      if (i.noteScale != null) {\n        selectNoteScale.value = i.noteScale.toString();\n        app.setNoteScale(i.noteScale);\n      }\n      if (i.backgroundDim != null) {\n        selectBackgroundDim.value = i.backgroundDim.toString();\n        app.brightness = i.backgroundDim;\n      }\n      if (i.offset != null) inputOffset.value = i.offset.toString();\n    }\n  }\n}\n// Uploader\nconst uploader = new FileEmitter();\n(function() {\n  const dones: Record<string, number> = {};\n  const totals: Record<string, number> = {};\n  let uploaderDone = 0;\n  let uploaderTotal = 0;\n  const handleFile = async(tag: string, total: number, promise: unknown, oncomplete?: () => void) => {\n    totals[tag] = total;\n    uploaderTotal = Object.values(totals).reduce((a, b) => a + b, 0);\n    await (promise instanceof Promise ? promise : Promise.resolve(promise));\n    dones[tag] = (dones[tag] || 0) + 1;\n    uploaderDone = Object.values(dones).reduce((a, b) => a + b, 0);\n    sendText(`读取文件：${uploaderDone}/${uploaderTotal}`);\n    if (dones[tag] === totals[tag] && oncomplete != null) oncomplete();\n    loadComplete();\n  };\n  main.handleFile = handleFile;\n  let fileTotal = 0;\n  const options = { async createAudioBuffer(_: ArrayBuffer) { return audio.decode(_) } };\n  const zip = new ZipReader({ handler: async data => reader.read(data, options) });\n  zip.addEventListener('loadstart', () => sendText('加载zip组件...'));\n  zip.addEventListener('read', evt => { handleFile('zip', zip.total, pick((evt as CustomEvent<ReaderData>).detail)) });\n  blockUpload.addEventListener('click', uploader.uploadFile.bind(uploader));\n  blockUploadFile.addEventListener('click', uploader.uploadFile.bind(uploader));\n  blockUploadDir.addEventListener('click', uploader.uploadDir.bind(uploader));\n  uploader.addEventListener('change', loadComplete);\n  uploader.addEventListener('progress', evt => { // 显示加载文件进度\n    if (!(evt as ProgressEvent).total) return;\n    const percent = Math.floor((evt as ProgressEvent).loaded / (evt as ProgressEvent).total * 100);\n    sendText(`加载文件：${percent}% (${bytefm((evt as ProgressEvent).loaded)}/${bytefm((evt as ProgressEvent).total)})`);\n  });\n  uploader.addEventListener('load', evt => {\n    // console.log(evt);\n    const { file: { name, webkitRelativePath: path }, buffer } = evt as ProgressEvent & { file: File; buffer: ArrayBuffer };\n    const isZip = buffer.byteLength > 4 && new DataView(buffer).getUint32(0, false) === 0x504b0304;\n    const data = { name, buffer, path: path || name };\n    const handler = async() => {\n      fileTotal++;\n      const result = await reader.read(data, options);\n      await handleFile('file', fileTotal, pick(result));\n    };\n    // 检测buffer是否为zip\n    if (isZip) zip.read(data);\n    else handler();\n  });\n  function pick(data: ReaderData) {\n    console.log(data);\n    switch (data.type) {\n      case 'line':\n        chartLineData.push(...data.data);\n        break;\n      case 'info':\n        chartInfoData.push(...data.data);\n        break;\n      case 'media': {\n        const basename = getUniqueName(data.name, bgms);\n        bgms.set(basename, data.data);\n        selectbgm.appendChild(createOption(basename, data.name));\n        selectbgm.dispatchEvent(new Event('change'));\n        break;\n      }\n      case 'image': {\n        const basename = getUniqueName(data.name, bgs);\n        bgs.set(basename, new ImageStore(data.data));\n        selectbg.appendChild(createOption(basename, data.name));\n        selectbg.dispatchEvent(new Event('change'));\n        break;\n      }\n      case 'chart': {\n        if (data.msg) data.msg.forEach(v => sendWarning(v));\n        if (data.info) chartInfoData.push(...data.info);\n        if (data.line) chartLineData.push(...data.line);\n        const basename = getUniqueName(data.name, charts);\n        charts.set(basename, data.data);\n        chartsMD5.set(basename, data.md5);\n        chartsFormat.set(basename, data.format);\n        selectchart.appendChild(createOption(basename, data.name));\n        selectchart.dispatchEvent(new Event('change'));\n        break;\n      }\n      default:\n        console.warn(`Unsupported file: ${data.name}`);\n        console.log(data.data);\n        sendWarning(`不支持的文件：${data.name}\\n${data.data as string || 'Error: Unknown File Type'}`);\n    }\n  }\n  function createOption(value: string, innerhtml: string) {\n    const option = document.createElement('option');\n    const isHidden = /(^|\\/)\\./.test(innerhtml);\n    option.innerHTML = isHidden ? '' : innerhtml;\n    option.value = value;\n    if (isHidden) option.classList.add('hide');\n    return option;\n  }\n  function loadComplete() {\n    if (uploaderDone === uploaderTotal) {\n      blockUploader.classList.remove('disabled');\n      adjustInfo();\n    } else blockUploader.classList.add('disabled');\n  }\n  function getUniqueName(name: string, set: Map<string, unknown>): string {\n    let basename = name;\n    while (set.has(basename)) basename += '\\n';\n    return basename;\n  }\n}());\nmain.uploader = uploader;\nimport('@/plugins/demo/index.js').then(a => a.default());\n// Hit start\nconst hitManager = new HitManager();\nconst exitFull = () => {\n  if (full.onchange) document.removeEventListener(full.onchange, exitFull);\n  hitManager.clear('keyboard'); // Esc退出全屏只有onchange事件能检测到\n  stage.setFull(full.check());\n  stage.resize();\n};\n// TODO: better way to handle this\nconst timeIn = new Timer();\nconst timeOut = new Timer();\nconst timeEnd = new Timer();\nconst specialClick = {\n  time: [0, 0, 0, 0],\n  func: [\n    async() => Promise.resolve().then(atPause),\n    async() => Promise.resolve().then(atStop).then(atStop),\n    async() => Promise.resolve().then(() => showStat.toggle()),\n    async() => {\n      const isFull = stage.getFull();\n      try {\n        await full.toggle();\n        if (!stage.setFull(full.check())) return;\n        if (full.onchange) document.addEventListener(full.onchange, exitFull);\n        if (!lockOri.checked) return;\n        await orientation.lockLandscape();\n      } catch (e) {\n        console.warn(e); // TODO: 未知错误处理\n        stage.setFull(!isFull);\n      } finally {\n        stage.resize();\n      }\n    }\n  ],\n  click(id: number) {\n    const now = performance.now();\n    if (now - this.time[id] < 300) {\n      this.func[id]().catch((err: Error) => {\n        console.warn(err);\n        main.toast(`按太多下了！(${err.message})`); // TODO: 忽略操作\n      });\n    }\n    this.time[id] = now;\n  },\n  activate(offsetX: number, offsetY: number) {\n    const { lineScale } = app;\n    if (offsetX < lineScale * 1.5 && offsetY < lineScale * 1.5) this.click(0);\n    if (offsetX > canvasfg.width - lineScale * 1.5 && offsetY < lineScale * 1.5) this.click(1);\n    if (offsetX < lineScale * 1.5 && offsetY > canvasfg.height - lineScale * 1.5) this.click(2);\n    if (offsetX > canvasfg.width - lineScale * 1.5 && offsetY > canvasfg.height - lineScale * 1.5) this.click(3);\n    if (timeEnd.second > 0) main.pressTime = main.pressTime > 0 ? -timeEnd.second : timeEnd.second;\n  }\n};\nfunction getJudgeOffset(judgeEvent: JudgeEvent, note: Renderer.Note) {\n  const { offsetX, offsetY } = judgeEvent;\n  const { offsetX: x, offsetY: y, cosr, sinr } = note;\n  return Math.abs((offsetX - x) * cosr + (offsetY - y) * sinr) || 0;\n}\nfunction getJudgeDistance(judgeEvent: JudgeEvent, note: Renderer.Note) {\n  const { offsetX, offsetY } = judgeEvent;\n  const { offsetX: x, offsetY: y, cosr, sinr } = note;\n  return Math.abs((offsetX - x) * cosr + (offsetY - y) * sinr) + Math.abs((offsetX - x) * sinr - (offsetY - y) * cosr) || 0;\n}\nconst res = {} as ResourceMap; // 存放资源\nlet nowTimeMS = 0; // 当前绝对时间(ms)\nlet curTime = 0; // 最近一次暂停的音乐时间(s)\nlet curTimeMS = 0; // 最近一次播放的绝对时间(ms)\nlet timeBgm = 0; // 当前音乐时间(s)\nlet timeChart = 0; // 当前谱面时间(s)\nlet duration0 = 0; // 音乐时长(s)\nlet isInEnd = false; // 开头过渡动画\nlet isOutStart = false; // 结尾过渡动画\nlet isOutEnd = false; // 临时变量\n// 必要组件\nconst frameTimer = new FrameTimer();\nconst frameAnimater = new FrameAnimater();\nframeAnimater.setCallback(mainLoop);\nconst handlerHide = () => { if (document.visibilityState === 'hidden' && emitter.eq('play')) atPause(); };\ndocument.addEventListener('visibilitychange', handlerHide);\ndocument.addEventListener('pagehide', handlerHide); // 兼容Safari\nlet isOutOver = false;\nlet tempStat = null as StatData | null;\nconst tmps = {\n  bgImage: null as unknown as ImageBitmap,\n  bgVideo: null as HTMLVideoElement | null,\n  bgMusicHack: (_: AudioBufferSourceNode): void => {},\n  progress: 0,\n  name: '',\n  artist: '',\n  illustrator: '',\n  charter: '',\n  level: '',\n  combo: '',\n  combo2: '',\n  showStat: false,\n  customForeDraw: null as ((ctx: CanvasRenderingContext2D) => void) | null,\n  customBackDraw: null as ((ctx: CanvasRenderingContext2D) => void) | null\n};\nfunction playBgm(data: AudioBuffer, offset?: number) {\n  curTimeMS = performance.now();\n  tmps.bgMusicHack = audio.play(data, {\n    offset: (offset ?? 0) || 0,\n    playbackrate: app.speed,\n    gainrate: app.musicVolume,\n    interval: autoDelay.checked ? 1 : 0\n  }) as (_: AudioBufferSourceNode) => void;\n}\nasync function playVideo(data: HTMLVideoElement, offset?: number) {\n  data.currentTime = (offset ?? 0) || 0;\n  data.playbackRate = app.speed;\n  data.muted = true;\n  await data.play();\n}\nconst hitImageList = new HitEvents({\n  // 存放点击特效\n  updateCallback: (i: HitImage) => nowTimeMS >= i.time + i.duration,\n  iterateCallback(i: HitImage) {\n    const tick = (nowTimeMS - i.time) / i.duration;\n    const { effects } = i;\n    ctxfg.globalAlpha = 1;\n    ctxfg.setTransform(app.noteScaleRatio * 6, 0, 0, app.noteScaleRatio * 6, i.offsetX, i.offsetY); // 缩放\n    // ctxfg.rotate(i.rotation);\n    (effects[Math.floor(tick * effects.length)] ?? effects[effects.length - 1]).full(ctxfg); // 停留约0.5秒\n    ctxfg.fillStyle = i.color;\n    ctxfg.globalAlpha = 1 - tick; // 不透明度\n    const r3 = 30 * (((0.2078 * tick - 1.6524) * tick + 1.6399) * tick + 0.4988); // 方块大小\n    for (const j of i.direction) {\n      const ds = j[0] * (9 * tick / (8 * tick + 1)); // 打击点距离\n      ctxfg.fillRect(ds * Math.cos(j[1]) - r3 / 2, ds * Math.sin(j[1]) - r3 / 2, r3, r3);\n    }\n  }\n});\nconst hitWordList = new HitEvents({\n  // 存放点击特效\n  updateCallback: (i: HitWord) => nowTimeMS >= i.time + i.duration,\n  iterateCallback(i: HitWord) {\n    const tick = (nowTimeMS - i.time) / i.duration;\n    ctxfg.setTransform(1, 0, 0, 1, i.offsetX, i.offsetY); // 缩放\n    ctxfg.font = `bold ${app.noteScaleRatio * (256 + 128 * (((0.2078 * tick - 1.6524) * tick + 1.6399) * tick + 0.4988))}px Custom,Noto Sans SC`;\n    ctxfg.textAlign = 'center';\n    ctxfg.fillStyle = i.color;\n    ctxfg.globalAlpha = 1 - tick; // 不透明度\n    ctxfg.fillText(i.text, 0, -app.noteScaleRatio * 128);\n  }\n});\nconst judgeManager = {\n  list: [] as JudgeEvent[],\n  addEvent(notes: Renderer.Note[], seconds: number) {\n    const { list } = this;\n    list.length = 0;\n    if (app.playMode === 1) {\n      const dispTime = Math.min(frameTimer.disp, 0.04);\n      for (const i of notes) {\n        if (i.scored) continue;\n        const deltaTime = i.seconds - seconds;\n        if (i.type === 1) {\n          if (deltaTime < dispTime) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 1);\n        } else if (i.type === 2) {\n          if (deltaTime < dispTime) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 2);\n        } else if (i.type === 3) {\n          if (i.holdTapTime) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 2);\n          else if (deltaTime < dispTime) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 1);\n        } else if (i.type === 4) if (deltaTime < dispTime) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 3);\n      }\n    } else if (emitter.eq('play')) {\n      for (const i of hitManager.list) {\n        if (!i.isTapped) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 1);\n        if (i.isActive) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 2);\n        if (i.type === 'keyboard') list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 3); // 以后加上Flick判断\n        if (i.flicking && !i.flicked) list[list.length] = new JudgeEvent(i.offsetX, i.offsetY, 3, i);\n      // i.flicked = true; 不能在这里判断，因为可能会判定不到\n      }\n    }\n  },\n  execute(notes: Renderer.Note[], seconds: number, width: number) {\n    const { list } = this;\n    for (const note of notes) {\n      if (note.scored) continue; // 跳过已判分的Note\n      const deltaTime = note.seconds - seconds;\n      if (deltaTime > 0.2) break; // 跳过判定范围外的Note\n      if (note.type !== 1 && deltaTime > 0.16) continue;\n      if (deltaTime < -0.16 && note.frameCount > 4 && !note.holdStatus) {\n        // 超时且不为Hold拖判，判为Miss\n        // console.log('Miss', i.name);\n        note.status = 2;\n        stat.addCombo(2, note.type);\n        note.scored = true;\n      } else if (note.type === 2) {\n        // Drag音符\n        if (deltaTime > 0) {\n          for (const judgeEvent of list) {\n            if (judgeEvent.type !== 1) continue; // 跳过非Tap判定\n            if (getJudgeOffset(judgeEvent, note) > width) continue;\n            judgeEvent.preventBad = true;\n          }\n        }\n        if (note.status !== 4) {\n          for (const judgeEvent of list) {\n            if (judgeEvent.type !== 2) continue; // 跳过非Drag判定\n            if (getJudgeOffset(judgeEvent, note) > width) continue;\n            // console.log('Perfect', i.name);\n            note.status = 4;\n            break;\n          }\n        } else if (deltaTime < 0) {\n          audio.play(res.HitSong1, { gainrate: app.soundVolume });\n          hitImageList.add(HitImage.perfect(note.projectX, note.projectY, note));\n          stat.addCombo(4, 2);\n          note.scored = true;\n        }\n      } else if (note.type === 4) {\n        // Flick音符\n        if (deltaTime > 0 || note.status !== 4) {\n          for (const judgeEvent of list) {\n            if (judgeEvent.type !== 1) continue;\n            // 跳过非Tap判定\n            if (getJudgeOffset(judgeEvent, note) > width) continue;\n            judgeEvent.preventBad = true;\n          }\n        }\n        if (note.status !== 4) {\n          for (const judgeEvent of list) {\n            if (judgeEvent.type !== 3) continue;\n            // 跳过非Move判定\n            if (getJudgeOffset(judgeEvent, note) > width) continue;\n            let distance = getJudgeDistance(judgeEvent, note);\n            let noteJudge = note;\n            let nearcomp = false;\n            for (const nearNote of note.nearNotes) {\n              if (nearNote.status) continue;\n              if (nearNote.seconds - seconds > 0.16) break;\n              if (getJudgeOffset(judgeEvent, nearNote) > width) continue;\n              const nearDistance = getJudgeDistance(judgeEvent, nearNote);\n              if (nearDistance < distance) {\n                distance = nearDistance;\n                noteJudge = nearNote;\n                nearcomp = true;\n              }\n            }\n            // console.log('Perfect', i.name);\n            if (judgeEvent.event == null) {\n              noteJudge.status = 4;\n              if (!nearcomp) break;\n            } else if (!judgeEvent.event.flicked) {\n              noteJudge.status = 4;\n              judgeEvent.event.flicked = true;\n              if (!nearcomp) break;\n            }\n          }\n        } else if (deltaTime < 0) {\n          audio.play(res.HitSong2, { gainrate: app.soundVolume });\n          hitImageList.add(HitImage.perfect(note.projectX, note.projectY, note));\n          stat.addCombo(4, 4);\n          note.scored = true;\n        }\n      } else {\n        // Hold音符\n        if (note.type === 3 && note.holdTapTime) {\n          // 是否触发头判\n          if ((performance.now() - note.holdTapTime) * note.holdTime >= 1.6e4 * note.holdSeconds) {\n            // 间隔时间与bpm成反比\n            if (note.holdStatus % 4 === 0) hitImageList.add(HitImage.perfect(note.projectX, note.projectY, note));\n            else if (note.holdStatus % 4 === 1) hitImageList.add(HitImage.perfect(note.projectX, note.projectY, note));\n            else if (note.holdStatus % 4 === 3) hitImageList.add(HitImage.good(note.projectX, note.projectY, note));\n            note.holdTapTime = performance.now();\n          }\n          if (deltaTime + note.holdSeconds < 0.2) {\n            if (!note.status) stat.addCombo(note.status = note.holdStatus, 3);\n            if (deltaTime + note.holdSeconds < 0) note.scored = true;\n            continue;\n          }\n          note.holdBroken = true; // 若1帧内未按住并使其转为false，则判定为Miss\n        }\n        for (const judgeEvent of list) {\n          if (note.holdTapTime) {\n            // 头判\n            if (judgeEvent.type !== 2) continue;\n            if (getJudgeOffset(judgeEvent, note) <= width) {\n              note.holdBroken = false;\n              break;\n            }\n            continue;\n          }\n          if (judgeEvent.type !== 1) continue;\n          // 跳过非Tap判定\n          if (judgeEvent.judged) continue;\n          // 跳过已触发的判定\n          if (getJudgeOffset(judgeEvent, note) > width) continue;\n          let deltaTime2 = deltaTime;\n          let distance = getJudgeDistance(judgeEvent, note);\n          let noteJudge = note;\n          let nearcomp = false;\n          for (const nearNote of note.nearNotes) {\n            if (nearNote.status) continue;\n            if (nearNote.holdTapTime) continue;\n            const nearDeltaTime = nearNote.seconds - seconds;\n            if (nearDeltaTime > 0.2) break;\n            if (nearNote.type === 3 && nearDeltaTime > 0.16) continue;\n            if (getJudgeOffset(judgeEvent, nearNote) > width) continue;\n            const nearDistance = getJudgeDistance(judgeEvent, nearNote);\n            if (nearDistance < distance) {\n              deltaTime2 = nearDeltaTime;\n              distance = nearDistance;\n              noteJudge = nearNote;\n              nearcomp = true;\n            }\n          }\n          if (deltaTime2 > 0.16) {\n            if (judgeEvent.preventBad) continue;\n            noteJudge.status = 6; // console.log('Bad', i.name);\n            noteJudge.badTime = performance.now();\n          } else {\n            const note1 = noteJudge;\n            stat.addDisp(Math.max(deltaTime2, (-1 - note1.frameCount) * 0.04 || 0));\n            audio.play(res.HitSong0, { gainrate: app.soundVolume });\n            if (deltaTime2 > 0.08) {\n              note1.holdStatus = 7; // console.log('Good(Early)', i.name);\n              hitImageList.add(HitImage.good(note1.projectX, note1.projectY, note1));\n              hitWordList.add(HitWord.early(note1.projectX, note1.projectY));\n            } else if (deltaTime2 > 0.04) {\n              note1.holdStatus = 5; // console.log('Perfect(Early)', i.name);\n              hitImageList.add(HitImage.perfect(note1.projectX, note1.projectY, note1));\n              hitWordList.add(HitWord.early(note1.projectX, note1.projectY));\n            } else if (deltaTime2 > -0.04 || note1.frameCount < 1) {\n              note1.holdStatus = 4; // console.log('Perfect(Max)', i.name);\n              hitImageList.add(HitImage.perfect(note1.projectX, note1.projectY, note1));\n            } else if (deltaTime2 > -0.08 || note1.frameCount < 2) {\n              note1.holdStatus = 1; // console.log('Perfect(Late)', i.name);\n              hitImageList.add(HitImage.perfect(note1.projectX, note1.projectY, note1));\n              hitWordList.add(HitWord.late(note1.projectX, note1.projectY));\n            } else {\n              note1.holdStatus = 3; // console.log('Good(Late)', i.name);\n              hitImageList.add(HitImage.good(note1.projectX, note1.projectY, note1));\n              hitWordList.add(HitWord.late(note1.projectX, note1.projectY));\n            }\n            if (note1.type === 1) note1.status = note1.holdStatus;\n          }\n          if (noteJudge.status) {\n            stat.addCombo(noteJudge.status, 1);\n            noteJudge.scored = true;\n          } else {\n            noteJudge.holdTapTime = performance.now();\n            noteJudge.holdBroken = false;\n          }\n          judgeEvent.judged = true;\n          noteJudge.statOffset = deltaTime2; // TODO: (Replay)也许是统计偏移量？\n          if (!nearcomp) break;\n        }\n        if (emitter.eq('play') && note.holdTapTime && note.holdBroken) {\n          note.status = 2; // console.log('Miss', i.name);\n          stat.addCombo(2, 3);\n          note.scored = true;\n        }\n      }\n    }\n  }\n};\nconst hitFeedbackList = new HitEvents({\n  // 存放点击特效\n  updateCallback: (i: HitFeedback) => i.time++ > 0,\n  iterateCallback(i: HitFeedback) {\n    ctxfg.globalAlpha = 0.85;\n    ctxfg.setTransform(1, 0, 0, 1, i.offsetX, i.offsetY); // 缩放\n    ctxfg.fillStyle = i.color;\n    ctxfg.beginPath();\n    ctxfg.arc(0, 0, app.lineScale * 0.5, 0, 2 * Math.PI);\n    ctxfg.fill();\n  }\n});\nconst interact = new InteractProxy(canvas);\n// 兼容PC鼠标\ninteract.setMouseEvent({\n  mousedownCallback(evt: MouseEvent) {\n    const idx = evt.button;\n    const { x, y } = getPos(evt);\n    if (idx === 1) hitManager.activate('mouse', 4, x, y);\n    else if (idx === 2) hitManager.activate('mouse', 2, x, y);\n    else hitManager.activate('mouse', 1 << idx, x, y);\n    specialClick.activate(x, y);\n  },\n  mousemoveCallback(evt: MouseEvent) {\n    const idx = evt.buttons;\n    const { x, y } = getPos(evt);\n    for (let i = 1; i < 32; i <<= 1) {\n      // 同时按住多个键时，只有最后一个键的move事件会触发\n      if (idx & i) hitManager.moving('mouse', i, x, y);\n      else hitManager.deactivate('mouse', i);\n    }\n  },\n  mouseupCallback(evt: MouseEvent) {\n    const idx = evt.button;\n    if (idx === 1) hitManager.deactivate('mouse', 4);\n    else if (idx === 2) hitManager.deactivate('mouse', 2);\n    else hitManager.deactivate('mouse', 1 << idx);\n  }\n});\n// 兼容键盘(喵喵喵?)\ninteract.setKeyboardEvent({\n  keydownCallback(evt: KeyboardEvent) {\n    if (emitter.eq('stop')) return;\n    if (evt.key === 'Shift') btnPause.click();\n    else if (hitManager.list.find(i => i.type === 'keyboard' && i.id === evt.code) == null) {\n      hitManager.activate('keyboard', evt.code, NaN, NaN); // 按住一个键时，会触发多次keydown事件\n    }\n  },\n  keyupCallback(evt: KeyboardEvent) {\n    if (emitter.eq('stop')) return;\n    if (evt.key !== 'Shift') hitManager.deactivate('keyboard', evt.code);\n  }\n});\nself.addEventListener('blur', () => {\n  hitManager.clear('keyboard');\n});\n// 兼容移动设备\ninteract.setTouchEvent({\n  touchstartCallback(evt: TouchEvent) {\n    for (const i of evt.changedTouches) {\n      const { x, y } = getPos(i);\n      hitManager.activate('touch', i.identifier, x, y);\n      specialClick.activate(x, y);\n    }\n  },\n  touchmoveCallback(evt: TouchEvent) {\n    for (const i of evt.changedTouches) {\n      const { x, y } = getPos(i);\n      hitManager.moving('touch', i.identifier, x, y);\n    }\n  },\n  touchendCallback(evt: TouchEvent) {\n    for (const i of evt.changedTouches) hitManager.deactivate('touch', i.identifier);\n  },\n  touchcancelCallback(evt: TouchEvent) {\n    // if (emitter.eq('play')) atPause(); TODO: 意外暂停提醒\n    for (const i of evt.changedTouches) hitManager.deactivate('touch', i.identifier);\n  }\n});\nfunction getPos(obj: MouseEvent | Touch) {\n  const rect = canvas.getBoundingClientRect();\n  return {\n    x: (obj.clientX - rect.left) / canvas.offsetWidth * canvas.width - (canvas.width - canvasfg.width) / 2,\n    y: (obj.clientY - rect.top) / canvas.offsetHeight * canvas.height\n  };\n}\n// Hit end\nconst noteRender = {\n  note: {} as Record<string, ScaledNote>,\n  hitFX: {} as Record<string, ScaledHitFX>,\n  async update(name: string, img: ImageBitmap, scale: number, compacted = false): Promise<void> {\n    this.note[name] = new ScaledNote(img, scale, compacted);\n    if (name === 'Tap') this.note.TapBad = new ScaledNote(await imgPainter(img, '#6c4343'), scale);\n  },\n  async updateFX(img0: ImageBitmap, scale: number, limitX?: number, limitY?: number, hideParts = false, duration?: number): Promise<void> {\n    const hitRaw = await imgSplit(img0, limitX, limitY);\n    const hitPerfect = hitRaw.map(async img => new ScaledNote(await imgShader(img, 'rgba(255,236,160,0.8823529)'), scale)); // #fce491,#ffeca0e1\n    const hitGood = hitRaw.map(async img => new ScaledNote(await imgShader(img, 'rgba(180,225,255,0.9215686)'), scale)); // #9ed5f3,#b4e1ffeb\n    img0.close();\n    this.hitFX.Perfect = {\n      effects: await Promise.all(hitPerfect),\n      numOfParts: hideParts ? 0 : 4,\n      duration: Number(duration) | 0 || 500\n    };\n    this.hitFX.Good = {\n      effects: await Promise.all(hitGood),\n      numOfParts: hideParts ? 0 : 3,\n      duration: Number(duration) | 0 || 500\n    };\n    hitRaw.forEach(img => img.close());\n  }\n};\n// 初始化(踩坑：监听DOMContentLoaded似乎会阻塞页面导致长时间白屏)\nwindow.addEventListener('load', (): void => {\n  const handler = async(): Promise<void> => {\n    canvas.classList.add('fade');\n    // let loadedNum = 0;\n    // let errorNum = 0;\n    sendText('初始化...');\n    if (await checkSupport({\n      messageCallback: sendText,\n      warnCallback: sendWarning,\n      errorCallback: sendError,\n      mobileCallback: () => blockUploaderSelect.style.display = 'none',\n      orientNotSupportCallback: () => {\n        lockOri.checked = false;\n        lockOri.container.classList.add('disabled');\n        lockOri.label.textContent += '(当前设备或浏览器不支持)';\n      }\n    })) return;\n    await import('@/utils/reader-');\n    const raw = await loadResource(atob('aHR0cHM6Ly9sY2h6aC5uZXQvZGF0YS9wYWNrLmpzb24=')).catch(() => null) || {\n    // const raw = await loadResource('local/ptres.json').catch(() => null) || {\n      image: {} as Record<string, string>,\n      audio: {} as Record<string, string>,\n      alternative: {} as Record<string, string>,\n      format: ''\n    };\n    // if (!raw) return; // 占位符\n    // shit start\n    await readResource(raw);\n    // .then(result => {\n    //   loadedNum += result.loadedNum;\n    //   errorNum += result.errorNum;\n    // })\n    // shit end\n    // if (errorNum) {\n    //   sendError(`错误：${errorNum}个资源加载失败（点击查看详情）`);\n    //   return;\n    // }\n    const entries = ['Tap', 'TapHL', 'Drag', 'DragHL', 'HoldHead', 'HoldHeadHL', 'Hold', 'HoldHL', 'HoldEnd', 'Flick', 'FlickHL'];\n    await fixme(raw, res);\n    await Promise.all(entries.map(async i => noteRender.update(i, res[i] as ImageBitmap, 8080 / Number(raw.image[i].split('|')[1]))));\n    // for (const i of entries) await noteRender.update(i, res[i], 8080 / raw.image[i].split('|')[1]);\n    await noteRender.updateFX(res.HitFXRaw, 8080 / Number(raw.image.HitFXRaw.split('|')[1]));\n    res.NoImageBlack = await createImageBitmap(new ImageData(new Uint8ClampedArray(4).fill(0), 1, 1));\n    res.NoImageWhite = await createImageBitmap(new ImageData(new Uint8ClampedArray(4).fill(255), 1, 1));\n    res.JudgeLineMP = await imgShader(res.JudgeLine, '#feffa9');\n    res.JudgeLineFC = await imgShader(res.JudgeLine, '#a2eeff');\n    res.Ranks = await imgSplit(res.Rank);\n    res.Rank.close();\n    res.mute = audio.mute(1);\n    if ((() => {\n      const b = createCtx(1, 1);\n      b.drawImage(res.JudgeLine, 0, 0);\n      return b.getImageData(0, 0, 1, 1).data[0];\n    })() === 0) {\n      sendError('检测到图片加载异常，请关闭所有应用程序然后重试');\n      return;\n    }\n    sendText('等待上传文件...');\n    blockUploader.classList.remove('disabled');\n    blockSelect.classList.remove('disabled');\n    emitter.dispatchEvent(new CustomEvent('change'));\n  };\n  handler();\n}, { once: true });\nasync function loadResource(url: string) {\n  const res1 = await fetch(url);\n  const text = await res1.text();\n  try {\n    return JSON.parse(text) as {\n      image: Record<string, string>;\n      audio: Record<string, string>;\n      alternative: Record<string, string>;\n    };\n  } catch (err) {\n    sendError('错误：解析资源时出现问题（点击查看详情）', Utils.escapeHTML(`解析资源时出现问题：\\n${(err as Error).message}\\n原始数据：\\n${text}`), true);\n    return null;\n  }\n}\nasync function readResource(raw: {\n  format?: string;\n  image: Record<string, string>;\n  audio: Record<string, string>;\n  alternative: Record<string, string>;\n}) {\n  let loadedNum = 0;\n  let errorNum = 0;\n  const res0: Record<string, string> = {};\n  Object.assign(res0, raw.image);\n  Object.assign(res0, raw.audio);\n  // 加载资源\n  const res1 = [] as Promise<void>[];\n  if (raw.format === 'raw') {\n    res1.push(...Object.entries(raw.image).map(async([name, src]) => {\n      const [url, ext] = src.split('|');\n      console.log(url, ext);\n      await fetch(url, { referrerPolicy: 'no-referrer' }).then(async a => a.blob()).then(async blob => {\n        const img = await createImageBitmap(blob);\n        res[name] = img;\n        sendText(`加载资源：${Math.floor(loadedNum++ / res1.length * 100)}%`);\n      }).catch(() => {\n        errorNum++;\n        sendWarning(`资源加载失败，请检查您的网络连接然后重试：\\n${new URL(url, location.toString()).toString()}`);\n      });\n    }));\n    res1.push(...Object.entries(raw.audio).map(async([name, src]) => {\n      await fetch(src, { referrerPolicy: 'no-referrer' }).then(async a => a.arrayBuffer()).then(async buffer => {\n        res[name] = await audio.decode(buffer);\n        sendText(`加载资源：${Math.floor(loadedNum++ / res1.length * 100)}%`);\n      }).catch(() => {\n        errorNum++;\n        sendWarning(`资源加载失败，请检查您的网络连接然后重试：\\n${new URL(src, location.toString()).toString()}`);\n      });\n    }));\n  } else {\n    res1.push(...Object.entries(res0).map(async([name, src]) => {\n      const [url, ext] = src.split('|') as [string, string | null];\n      await fetch(url, { referrerPolicy: 'no-referrer' }).then(async a => a.blob()).then(async blob => {\n        const img = await createImageBitmap(blob);\n        if (ext != null && ext.startsWith('m')) {\n          const data = ImgAny.decode(img, Number(ext.slice(1)));\n          img.close();\n          res[name] = await audio.decode(data).catch(async(_err: DOMException | Error) => {\n            const blob1 = await fetch(raw.alternative[name], {\n              referrerPolicy: 'no-referrer'\n            }).then(async i => i.blob());\n            return createImageBitmap(blob1).then(ImgAny.decodeAlt).then(async ab => audio.decode(ab)).catch((err: Error) => {\n              sendWarning(`音频加载存在问题，将导致以下音频无法正常播放：\\n${name}(${err.message})\\n如果多次刷新问题仍然存在，建议更换设备或浏览器。`);\n              return audio.mute(1);\n            });\n          });\n        } else res[name] = img;\n        sendText(`加载资源：${Math.floor(loadedNum++ / res1.length * 100)}%`);\n      }).catch(err => {\n        console.error(err);\n        sendError(`错误：${errorNum++}个资源加载失败（点击查看详情）`, `资源加载失败，请检查您的网络连接然后重试：\\n${new URL(url, location.toString()).toString()}`, true);\n      });\n    }));\n  }\n  await Promise.all(res1);\n  return { loadedNum, errorNum };\n}\nconst background = {\n  isBlur: false,\n  image: null as ImageStore | null,\n  getImage() {\n    if (!this.image) return res.NoImageWhite;\n    return this.image.base;\n  },\n  getImageBlur() {\n    if (!this.image) return res.NoImageWhite;\n    return this.isBlur ? this.image.blur : this.image.base;\n  }\n};\ncheckImageBlur.addEventListener('change', () => {\n  background.isBlur = checkImageBlur.checked;\n});\ncheckImageBlur.dispatchEvent(new Event('change'));\n// 作图\nfunction mainLoop() {\n  frameTimer.addTick(); // 计算fps\n  const { lineScale } = app;\n  nowTimeMS = performance.now();\n  app.resizeCanvas();\n  // 计算时间\n  if (timeOut.second < 0.67) {\n    loopNoCanvas();\n    for (const i of main.now.values()) i(timeBgm * app.speed);\n    loopCanvas();\n  } else if (!isOutOver) {\n    isOutOver = true;\n    audio.stop();\n    btnPause.classList.add('disabled'); // TODO: 优化\n    ctxfg.globalCompositeOperation = 'source-over';\n    ctxfg.resetTransform();\n    ctxfg.globalAlpha = 1;\n    const bgImageBlur = background.getImageBlur();\n    ctxfg.drawImage(bgImageBlur, ...adjustSize(bgImageBlur, canvasfg, 1));\n    ctxfg.fillStyle = '#000'; // 背景变暗\n    ctxfg.globalAlpha = app.brightness; // 背景不透明度\n    ctxfg.fillRect(0, 0, canvasfg.width, canvasfg.height);\n    self.setTimeout(() => {\n      if (!isOutOver) return; // 避免快速重开后直接结算\n      const difficulty = ['ez', 'hd', 'in', 'at'].indexOf(levelText.slice(0, 2).toLocaleLowerCase());\n      audio.play(res[`LevelOver${difficulty < 0 ? 2 : difficulty}_v1`] as AudioBuffer, { loop: true });\n      timeEnd.reset();\n      timeEnd.play();\n      stat.level = Number(/\\d+$/.exec(levelText));\n      tempStat = stat.getData(app.playMode === 1, selectspeed.value);\n    }, 1e3);\n  } // 只让它执行一次\n  if (tempStat != null) atDraw3(tempStat);\n  ctx.globalAlpha = 1;\n  const bgImageBlur = background.getImageBlur();\n  ctx.drawImage(bgImageBlur, ...adjustSize(bgImageBlur, canvas, 1.1));\n  ctx.fillStyle = '#000';\n  ctx.globalAlpha = 0.4;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.globalAlpha = 1;\n  ctx.drawImage(canvasfg, (canvas.width - canvasfg.width) / 2, 0);\n  // Copyright\n  ctx.globalCompositeOperation = 'difference';\n  ctx.font = `${lineScale * 0.4}px Custom,Noto Sans SC`;\n  ctx.fillStyle = '#fff';\n  ctx.globalAlpha = 0.8;\n  ctx.textAlign = 'right';\n  ctx.fillText(`${self._i[0]} v${self._i[1].join('.')} - Code by lchz\\x683\\x3473`, (canvas.width + canvasfg.width) / 2 - lineScale * 0.1, canvas.height - lineScale * 0.1);\n  ctx.globalCompositeOperation = 'source-over';\n}\nfunction loopNoCanvas() {\n  if (app.chart == null) throw new Error('Not initialized: Chart');\n  if (!isInEnd && timeIn.second >= 3 && emitter.eq('play')) { // fixed: 修复关闭过渡动画时重开1帧内点击暂停产生显示暂停实际音乐播放的问题\n    isInEnd = true;\n    playBgm(app.bgMusic);\n    if (app.bgVideo != null) playVideo(app.bgVideo);\n  }\n  if (emitter.eq('play') && isInEnd && !isOutStart) timeBgm = curTime + (nowTimeMS - curTimeMS) / 1e3;\n  if (timeBgm < 0) timeBgm = 0; // fixed: 修复重开后时间轴不归零的问题\n  if (timeBgm >= duration0) isOutStart = true;\n  if (showTransition.checked && isOutStart && !isOutEnd) {\n    isOutEnd = true;\n    timeOut.play();\n  }\n  timeChart = Math.max(timeBgm - (app.chart.offset + Number(inputOffset.value) / 1e3 || 0) / app.speed, 0);\n  // 遍历判定线events和Note\n  app.updateByTime(timeChart);\n  // 更新打击特效和触摸点动画\n  hitFeedbackList.update();\n  hitImageList.update();\n  hitWordList.update();\n  for (const i of hitManager.list) {\n    if (i.type === 'keyboard') continue;\n    if (!i.isTapped) hitFeedbackList.add(HitFeedback.tap(i.offsetX, i.offsetY));\n    else if (i.isMoving) hitFeedbackList.add(HitFeedback.move(i.offsetX, i.offsetY));\n    else if (i.isActive) hitFeedbackList.add(HitFeedback.hold(i.offsetX, i.offsetY)); // TODO: 动态特效\n  }\n  // 触发判定和播放打击音效\n  if (isInEnd) {\n    const judgeWidth = canvasfg.width * 0.118125;\n    judgeManager.addEvent(app.notes, timeChart);\n    judgeManager.execute(app.drags, timeChart, judgeWidth);\n    judgeManager.execute(app.flicks, timeChart, judgeWidth);\n    judgeManager.execute(app.tapholds, timeChart, judgeWidth);\n  }\n  // 更新判定\n  hitManager.update();\n  // if (awawa && stat.good + stat.bad) {\n  //   stat.level = Number(levelText.match(/\\d+$/));\n  //   stat.reset();\n  //   Promise.resolve().then(atStop).then(atStop);\n  // }\n  tmps.bgImage = background.getImageBlur();\n  tmps.bgVideo = app.bgVideo;\n  tmps.progress = (main.awawa ? duration0 - timeBgm : timeBgm) / duration0;\n  tmps.name = inputName.value || inputName.placeholder;\n  tmps.artist = inputArtist.value;\n  tmps.illustrator = inputIllustrator.value || inputIllustrator.placeholder;\n  tmps.charter = inputCharter.value || inputCharter.placeholder;\n  tmps.level = levelText;\n  if (stat.combo > 2) {\n    tmps.combo = `${stat.combo}`;\n    tmps.combo2 = app.playMode === 1 ? 'Autoplay' : 'combo';\n  } else {\n    tmps.combo = '';\n    tmps.combo2 = '';\n  }\n  tmps.showStat = true;\n  tmps.customForeDraw = null;\n  tmps.customBackDraw = null;\n}\nfunction loopCanvas() {\n  const { lineScale, wlen, hlen } = app;\n  const { bgImage, bgVideo } = tmps;\n  ctxfg.clearRect(0, 0, canvasfg.width, canvasfg.height); // 重置画面\n  // 绘制背景\n  ctxfg.globalAlpha = 1;\n  ctxfg.drawImage(bgImage, ...adjustSize(bgImage, canvasfg, 1));\n  if (isInEnd && bgVideo != null && !main.awawa) {\n    const { videoWidth: width, videoHeight: height } = bgVideo;\n    ctxfg.drawImage(bgVideo, ...adjustSize({ width, height }, canvasfg, 1));\n  }\n  // if (awawa) ctxfg.filter = `hue-rotate(${stat.combo*360/7}deg)`;\n  if (timeIn.second >= 2.5 && !stat.lineStatus) drawLine(0, lineScale);\n  // 绘制判定线(背景后0)\n  // if (awawa) ctxfg.filter = 'none';\n  ctxfg.resetTransform();\n  ctxfg.fillStyle = '#000'; // 背景变暗\n  ctxfg.globalAlpha = app.brightness; // 背景不透明度\n  ctxfg.fillRect(0, 0, canvasfg.width, canvasfg.height);\n  if (timeIn.second >= 2.5 && tmps.customBackDraw != null) tmps.customBackDraw(ctxfg); // 自定义背景\n  // if (awawa) ctxfg.filter = `hue-rotate(${stat.combo*360/7}deg)`;\n  if (timeIn.second >= 2.5) drawLine(stat.lineStatus ? 2 : 1, lineScale);\n  // 绘制判定线(背景前1)\n  // if (awawa) ctxfg.filter = 'none';\n  ctxfg.resetTransform();\n  if (timeIn.second >= 3 && timeOut.second === 0) {\n    // 绘制note\n    drawNotes();\n    if (showPoint.checked) {\n      // 绘制定位点\n      ctxfg.font = `${lineScale}px Custom,Noto Sans SC`;\n      ctxfg.textAlign = 'center';\n      for (const i of app.linesReversed) {\n        ctxfg.setTransform(i.cosr, i.sinr, -i.sinr, i.cosr, i.offsetX, i.offsetY);\n        ctxfg.globalAlpha = 1;\n        ctxfg.fillStyle = 'violet';\n        ctxfg.fillRect(-lineScale * 0.2, -lineScale * 0.2, lineScale * 0.4, lineScale * 0.4);\n        ctxfg.fillStyle = 'yellow';\n        ctxfg.globalAlpha = (i.alpha + 0.5) / 1.5;\n        ctxfg.fillText(i.lineId.toString(), 0, -lineScale * 0.3);\n      }\n      for (const i of app.notesReversed) {\n        if (!i.visible) continue;\n        ctxfg.setTransform(i.cosr, i.sinr, -i.sinr, i.cosr, i.offsetX, i.offsetY);\n        ctxfg.globalAlpha = 1;\n        ctxfg.fillStyle = 'lime';\n        ctxfg.fillRect(-lineScale * 0.2, -lineScale * 0.2, lineScale * 0.4, lineScale * 0.4);\n        ctxfg.fillStyle = 'cyan';\n        ctxfg.globalAlpha = i.seconds > timeChart ? 1 : 0.5;\n        ctxfg.fillText(i.name, 0, -lineScale * 0.3);\n      }\n    }\n  }\n  // if (awawa) ctxfg.filter = `hue-rotate(${stat.combo*360/7}deg)`;\n  hitImageList.animate(); // 绘制打击特效1\n  // if (awawa) ctxfg.filter = 'none';\n  if (showCE2.checked) hitWordList.animate(); // 绘制打击特效2\n  ctxfg.globalAlpha = 1;\n  // 绘制进度条\n  ctxfg.setTransform(canvasfg.width / 1920, 0, 0, canvasfg.width / 1920, 0, lineScale * (timeIn.second < 0.67 ? tween.easeOutSine(timeIn.second * 1.5) - 1 : -tween.easeOutSine(timeOut.second * 1.5)) * 1.75);\n  ctxfg.drawImage(res.ProgressBar, tmps.progress * 1920 - 1920, 0);\n  // 绘制文字\n  ctxfg.resetTransform();\n  for (const i of main.after.values()) i();\n  ctxfg.fillStyle = '#fff';\n  // 开头过渡动画\n  if (timeIn.second < 3) {\n    if (timeIn.second < 0.67) ctxfg.globalAlpha = tween.easeOutSine(timeIn.second * 1.5);\n    else if (timeIn.second >= 2.5) ctxfg.globalAlpha = tween.easeOutSine(6 - timeIn.second * 2);\n    ctxfg.textAlign = 'center';\n    // 曲名、曲师、曲绘和谱师\n    fillTextNode(tmps.name, wlen, hlen * 0.75, lineScale * 1.1, canvasfg.width - lineScale * 1.5);\n    fillTextNode(tmps.artist, wlen, hlen * 0.75 + lineScale * 1.25, lineScale * 0.55, canvasfg.width - lineScale * 1.5);\n    fillTextNode(`Illustration designed by ${tmps.illustrator}`, wlen, hlen * 1.25 + lineScale * 0.55, lineScale * 0.55, canvasfg.width - lineScale * 1.5);\n    fillTextNode(`Level designed by ${tmps.charter}`, wlen, hlen * 1.25 + lineScale * 1.4, lineScale * 0.55, canvasfg.width - lineScale * 1.5);\n    // 判定线(装饰用)\n    ctxfg.globalAlpha = 1;\n    ctxfg.setTransform(1, 0, 0, 1, wlen, hlen);\n    const imgW = lineScale * 48 * (timeIn.second < 0.67 ? tween.easeInSine(timeIn.second * 1.5) : 1);\n    const imgH = lineScale * 0.15; // 0.1333...\n    if (timeIn.second >= 2.5) ctxfg.globalAlpha = tween.easeOutSine(6 - timeIn.second * 2);\n    ctxfg.drawImage(lineColor.checked ? res.JudgeLineMP : res.JudgeLine, -imgW / 2, -imgH / 2, imgW, imgH);\n  }\n  // 绘制分数和combo\n  ctxfg.globalAlpha = 1;\n  ctxfg.setTransform(1, 0, 0, 1, 0, lineScale * (timeIn.second < 0.67 ? tween.easeOutSine(timeIn.second * 1.5) - 1 : -tween.easeOutSine(timeOut.second * 1.5)) * 1.75);\n  if (tmps.showStat) {\n    ctxfg.font = `${lineScale * 0.95}px Custom,Noto Sans SC`;\n    ctxfg.textAlign = 'right';\n    ctxfg.fillText(stat.scoreStr, canvasfg.width - lineScale * 0.65, lineScale * 1.375);\n    if (showAcc.checked) {\n      ctxfg.font = `${lineScale * 0.66}px Custom,Noto Sans SC`;\n      ctxfg.fillText(stat.accStr, canvasfg.width - lineScale * 0.65, lineScale * 2.05);\n    }\n  }\n  ctxfg.textAlign = 'center';\n  ctxfg.font = `${lineScale * 1.32}px Custom,Noto Sans SC`;\n  ctxfg.fillText(tmps.combo, wlen, lineScale * 1.375);\n  ctxfg.globalAlpha = timeIn.second < 0.67 ? tween.easeOutSine(timeIn.second * 1.5) : 1 - tween.easeOutSine(timeOut.second * 1.5);\n  ctxfg.font = `${lineScale * 0.66}px Custom,Noto Sans SC`;\n  ctxfg.fillText(tmps.combo2, wlen, lineScale * 2.05);\n  // 绘制曲名和等级\n  ctxfg.globalAlpha = 1;\n  ctxfg.setTransform(1, 0, 0, 1, 0, lineScale * (timeIn.second < 0.67 ? 1 - tween.easeOutSine(timeIn.second * 1.5) : tween.easeOutSine(timeOut.second * 1.5)) * 1.75);\n  ctxfg.textAlign = 'right';\n  fillTextNode(tmps.level, canvasfg.width - lineScale * 0.75, canvasfg.height - lineScale * 0.66, lineScale * 0.63, wlen - lineScale);\n  ctxfg.textAlign = 'left';\n  fillTextNode(tmps.name, lineScale * 0.65, canvasfg.height - lineScale * 0.66, lineScale * 0.63, wlen - lineScale);\n  ctxfg.resetTransform();\n  // 绘制时间和帧率以及note打击数\n  ctxfg.fillStyle = '#fff';\n  if (timeIn.second < 0.67) ctxfg.globalAlpha = tween.easeOutSine(timeIn.second * 1.5);\n  else ctxfg.globalAlpha = 1 - tween.easeOutSine(timeOut.second * 1.5);\n  ctxfg.font = `${lineScale * 0.4}px Custom,Noto Sans SC`;\n  ctxfg.textAlign = 'left';\n  ctxfg.fillText(`${time2Str(main.awawa ? duration0 - timeBgm : timeBgm)}/${time2Str(duration0)}${status2.text}`, lineScale * 0.05, lineScale * 0.6);\n  ctxfg.fillText(stat.format, canvasfg.width - lineScale * 4.35, lineScale * 0.6);\n  ctxfg.textAlign = 'right';\n  ctxfg.fillText(frameTimer.fpsStr, canvasfg.width - lineScale * 0.05, lineScale * 0.6);\n  if (tmps.showStat && showStat.checked) {\n    ctxfg.textAlign = 'right';\n    [stat.noteRank[6], stat.noteRank[7], stat.noteRank[5], stat.noteRank[4], stat.noteRank[1], stat.noteRank[3], stat.noteRank[2]].forEach((val, idx) => {\n      const comboColor = ['#fe7b93', '#0ac3ff', 'lime', '#f0ed69', 'lime', '#0ac3ff', '#999'];\n      ctxfg.fillStyle = comboColor[idx];\n      ctxfg.fillText(val.toString(), canvasfg.width - lineScale * 0.05, canvasfg.height / 2 + lineScale * (idx - 2.8) * 0.5);\n    });\n    ctxfg.fillStyle = '#fff';\n    ctxfg.textAlign = 'left';\n    ctxfg.fillText(`DSP:  ${stat.curDispStr}`, lineScale * 0.05, canvasfg.height / 2 - lineScale * 0.15);\n    ctxfg.fillText(`AVG:  ${stat.avgDispStr}`, lineScale * 0.05, canvasfg.height / 2 + lineScale * 0.35);\n    ctxfg.textAlign = 'center';\n    stat.combos.forEach((val, idx) => {\n      const comboColor = ['#fff', '#0ac3ff', '#f0ed69', '#a0e9fd', '#fe4365'];\n      ctxfg.fillStyle = comboColor[idx];\n      ctxfg.fillText(val.toString(), lineScale * (idx + 0.55) * 1.1, canvasfg.height - lineScale * 0.1);\n    });\n  }\n  if (timeIn.second >= 2.5 && timeIn.second < 3) ctxfg.globalAlpha = 1 - tween.easeOutSine(6 - timeIn.second * 2);\n  else ctxfg.globalAlpha = 1 - tween.easeOutSine(timeOut.second * 1.5);\n  if (timeIn.second >= 2.5 && tmps.customForeDraw != null) tmps.customForeDraw(ctxfg); // 自定义前景\n  if (timeIn.second >= 2.5 && main.filter != null) main.filter(ctxfg, timeBgm, nowTimeMS / 1e3); // 滤镜处理\n  if (checkFeedback.checked) hitFeedbackList.animate(); // 绘制打击特效0\n  ctxfg.resetTransform();\n}\n// 判定线函数，undefined/0:默认,1:非,2:恒成立\nfunction drawLine(bool: number, lineScale: number) {\n  const tw = 1 - tween.easeOutSine(timeOut.second * 1.5);\n  for (const i of app.linesReversed) {\n    if (bool ^ Number(i.imageD) && timeOut.second < 0.67) {\n      ctxfg.globalAlpha = i.alpha;\n      ctxfg.setTransform(i.cosr * tw, i.sinr, -i.sinr * tw, i.cosr, app.wlen + (i.offsetX - app.wlen) * tw, i.offsetY); // Hiahiah\n      const imgS = (i.imageU ? lineScale * 18.75 : canvasfg.height) * i.imageS / 1080;\n      const imgW = imgS * i.imageW * i.imageA;\n      const imgH = imgS * i.imageH;\n      ctxfg.drawImage(i.imageL[i.imageC && lineColor.checked ? stat.lineStatus : 0], -imgW / 2, -imgH / 2, imgW, imgH);\n    }\n  }\n  ctxfg.globalAlpha = 1;\n}\nfunction fillTextNode(text: string, x: number, y: number, size: number, maxWidth: number) {\n  ctxfg.font = `${size}px Custom,Noto Sans SC`;\n  const dx = ctxfg.measureText(text).width;\n  if (dx > maxWidth) ctxfg.font = `${size / dx * maxWidth}px Custom,Noto Sans SC`;\n  ctxfg.fillText(text, x, y);\n  return dx;\n}\nfunction atDraw3(statData: StatData) {\n  ctxfg.resetTransform();\n  ctxfg.clearRect(0, 0, canvasfg.width, canvasfg.height);\n  ctxfg.globalAlpha = 1;\n  const bgImageBlur = background.getImageBlur();\n  ctxfg.drawImage(bgImageBlur, ...adjustSize(bgImageBlur, canvasfg, 1));\n  ctxfg.fillStyle = '#000'; // 背景变暗\n  ctxfg.globalAlpha = app.brightness; // 背景不透明度\n  ctxfg.fillRect(0, 0, canvasfg.width, canvasfg.height);\n  ctxfg.globalCompositeOperation = 'destination-out';\n  ctxfg.globalAlpha = 1;\n  const k = 3.7320508075688776; // tan75°\n  ctxfg.setTransform(canvasfg.width - canvasfg.height / k, 0, -canvasfg.height / k, canvasfg.height, canvasfg.height / k, 0);\n  ctxfg.fillRect(0, 0, 1, tween.easeOutCubic(clip((timeEnd.second - 0.13) * 0.94)));\n  ctxfg.resetTransform();\n  ctxfg.globalCompositeOperation = 'destination-over';\n  const skew = (canvasfg.width - canvasfg.height / k) / (16 - 9 / k);\n  ctxfg.setTransform(skew / 120, 0, 0, skew / 120, app.wlen - skew * 8, app.hlen - skew * 4.5); // ?\n  ctxfg.drawImage(res.LevelOver4, 183, 42, 1184, 228);\n  ctxfg.globalAlpha = clip((timeEnd.second - 0.27) / 0.83);\n  ctxfg.drawImage(res.LevelOver1, 102, 378);\n  ctxfg.globalCompositeOperation = 'source-over';\n  ctxfg.globalAlpha = 1;\n  ctxfg.drawImage(res.LevelOver5, 700 * tween.easeOutCubic(clip(timeEnd.second * 1.25)) - 369, 91, 20, 80);\n  // 曲名和等级\n  ctxfg.fillStyle = '#fff';\n  ctxfg.textAlign = 'left';\n  fillTextNode(inputName.value || inputName.placeholder, 700 * tween.easeOutCubic(clip(timeEnd.second * 1.25)) - 320, 160, 80, 1500);\n  const textWidth = fillTextNode(levelText, 700 * tween.easeOutCubic(clip(timeEnd.second * 1.25)) - 317, 212, 30, 750);\n  ctxfg.font = '30px Custom,Noto Sans SC';\n  // Rank图标\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.87) * 3.75);\n  const outerSize = 293 + clip((timeEnd.second - 1.87) * 3.75) * 100;\n  const innerSize = 410 - clip((timeEnd.second - 1.87) * 2.14) * 164;\n  ctxfg.drawImage(res.LevelOver3, 661 - outerSize / 2, 545 - outerSize / 2, outerSize, outerSize);\n  ctxfg.drawImage(res.Ranks[stat.rankStatus], 661 - innerSize / 2, 545 - innerSize / 2, innerSize, innerSize);\n  // 各种数据\n  ctxfg.globalAlpha = clip((timeEnd.second - 0.87) * 2.5);\n  ctxfg.fillStyle = statData.newBestColor;\n  ctxfg.fillText(statData.newBestStr, 898, 433);\n  ctxfg.fillStyle = '#fff';\n  ctxfg.textAlign = 'center';\n  ctxfg.fillText(statData.scoreBest, 1180, 433);\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.87) * 2.5);\n  ctxfg.textAlign = 'right';\n  ctxfg.fillText(statData.scoreDelta, 1414, 433);\n  ctxfg.globalAlpha = clip((timeEnd.second - 0.95) * 1.5);\n  ctxfg.textAlign = 'left';\n  ctxfg.fillText(stat.accStr, 352, 550);\n  ctxfg.fillText(stat.maxcombo.toString(), 1528, 550);\n  ctxfg.fillStyle = statData.textAboveColor;\n  ctxfg.fillText(app.speed === 1 ? '' : statData.textAboveStr.replace('{SPEED}', app.speed.toFixed(2)), 383 + Math.min(textWidth, 750), 212);\n  ctxfg.fillStyle = statData.textBelowColor;\n  ctxfg.fillText(statData.textBelowStr, 1355, 595);\n  ctxfg.fillStyle = '#fff';\n  ctxfg.textAlign = 'center';\n  ctxfg.font = '86px Custom,Noto Sans SC';\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.12) * 2.0);\n  ctxfg.fillText(stat.scoreStr, 1075, 569);\n  ctxfg.font = '26px Custom,Noto Sans SC';\n  ctxfg.globalAlpha = clip((timeEnd.second - 0.87) * 2.5);\n  ctxfg.fillText(stat.perfect.toString(), 891, 650);\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.07) * 2.5);\n  ctxfg.fillText(stat.good.toString(), 1043, 650);\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.27) * 2.5);\n  ctxfg.fillText(stat.noteRank[6].toString(), 1196, 650);\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.47) * 2.5);\n  ctxfg.fillText(stat.noteRank[2].toString(), 1349, 650);\n  ctxfg.font = '22px Custom,Noto Sans SC';\n  const transition = clip((main.pressTime > 0 ? timeEnd.second - main.pressTime : 0.2 - timeEnd.second - main.pressTime) * 5.0);\n  ctxfg.globalAlpha = 0.8 * clip((timeEnd.second - 0.87) * 2.5) * transition;\n  ctxfg.fillStyle = '#696';\n  ctxfg.fill(new Path2D('M841,718s-10,0-10,10v80s0,10,10,10h100s10,0,10-10v-80s0-10-10-10h-40l-10-20-10,20h-40z'));\n  ctxfg.globalAlpha = 0.8 * clip((timeEnd.second - 1.07) * 2.5) * transition;\n  ctxfg.fillStyle = '#669';\n  ctxfg.fill(new Path2D('M993,718s-10,0-10,10v80s0,10,10,10h100s10,0,10-10v-80s0-10-10-10h-40l-10-20-10,20h-40z'));\n  ctxfg.fillStyle = '#fff';\n  ctxfg.globalAlpha = clip((timeEnd.second - 0.97) * 2.5) * transition;\n  ctxfg.fillText(`Early: ${stat.noteRank[5]}`, 891, 759);\n  ctxfg.fillText(`Late: ${stat.noteRank[1]}`, 891, 792);\n  ctxfg.globalAlpha = clip((timeEnd.second - 1.17) * 2.5) * transition;\n  ctxfg.fillText(`Early: ${stat.noteRank[7]}`, 1043, 759);\n  ctxfg.fillText(`Late: ${stat.noteRank[3]}`, 1043, 792);\n  ctxfg.resetTransform();\n  ctxfg.globalCompositeOperation = 'destination-over';\n  ctxfg.globalAlpha = 1;\n  ctxfg.fillStyle = '#000';\n  const bgImage = background.getImage();\n  ctxfg.drawImage(bgImage, ...adjustSize(bgImage, canvasfg, 1));\n  ctxfg.fillRect(0, 0, canvasfg.width, canvasfg.height);\n  ctxfg.globalCompositeOperation = 'source-over';\n}\nfunction clip(num: number) {\n  if (num < 0) return 0;\n  if (num > 1) return 1;\n  return num;\n}\ninterface ScaledHitFX {\n  effects: ScaledNote[];\n  numOfParts: number;\n  duration: number;\n}\n// 绘制Note\nfunction drawNotes() {\n  for (const i of app.holds) drawHold(i, timeChart);\n  for (const i of app.dragsReversed) drawDrag(i);\n  for (const i of app.tapsReversed) drawTap(i);\n  for (const i of app.flicksReversed) drawFlick(i);\n}\nfunction drawTap(note: Renderer.Note) {\n  const HL = note.isMulti && app.multiHint;\n  const nsr = app.noteScaleRatio;\n  if (!note.visible || note.scored && note.badTime == null) return;\n  ctxfg.setTransform(nsr * note.cosr, nsr * note.sinr, -nsr * note.sinr, nsr * note.cosr, note.offsetX, note.offsetY);\n  if (note.badTime == null) {\n    ctxfg.globalAlpha = note.alpha || (note.showPoint && showPoint.checked ? 0.45 : 0);\n    if (main.awawa) ctxfg.globalAlpha *= Math.max(1 + (timeChart - note.seconds) / 1.5, 0);\n    // 过线前1.5s出现\n    noteRender.note[HL ? 'TapHL' : 'Tap'].full(ctxfg);\n  } else {\n    ctxfg.globalAlpha = 1 - clip((performance.now() - note.badTime) / 500);\n    noteRender.note.TapBad.full(ctxfg);\n  }\n}\nfunction drawDrag(note: Renderer.Note) {\n  const HL = note.isMulti && app.multiHint;\n  const nsr = app.noteScaleRatio;\n  if (!note.visible || note.scored && note.badTime == null) return;\n  ctxfg.setTransform(nsr * note.cosr, nsr * note.sinr, -nsr * note.sinr, nsr * note.cosr, note.offsetX, note.offsetY);\n  if (note.badTime == null) {\n    ctxfg.globalAlpha = note.alpha || (note.showPoint && showPoint.checked ? 0.45 : 0);\n    if (main.awawa) ctxfg.globalAlpha *= Math.max(1 + (timeChart - note.seconds) / 1.5, 0);\n    noteRender.note[HL ? 'DragHL' : 'Drag'].full(ctxfg);\n  } else {\n    // Nothing to do\n  }\n}\nfunction drawHold(note: Renderer.Note, seconds: number) {\n  const HL = note.isMulti && app.multiHint;\n  const nsr = app.noteScaleRatio;\n  if (!note.visible || note.seconds + note.holdSeconds < seconds) return; // 不绘制时空超界的Hold\n  ctxfg.globalAlpha = note.alpha || (note.showPoint && showPoint.checked ? 0.45 : 0);\n  if (main.awawa) ctxfg.globalAlpha *= Math.max(1 + (timeChart - note.seconds) / 1.5, 0);\n  ctxfg.setTransform(nsr * note.cosr, nsr * note.sinr, -nsr * note.sinr, nsr * note.cosr, note.offsetX, note.offsetY);\n  const baseLength = app.scaleY / nsr * note.speed * app.speed;\n  const holdLength = baseLength * note.holdSeconds;\n  if (note.seconds > seconds) {\n    noteRender.note[HL ? 'HoldHeadHL' : 'HoldHead'].head(ctxfg);\n    noteRender.note[HL ? 'HoldHL' : 'Hold'].body(ctxfg, -holdLength, holdLength);\n  } else noteRender.note[HL ? 'HoldHL' : 'Hold'].body(ctxfg, -holdLength, holdLength - baseLength * (seconds - note.seconds));\n  noteRender.note.HoldEnd.tail(ctxfg, -holdLength);\n}\nfunction drawFlick(note: Renderer.Note) {\n  const HL = note.isMulti && app.multiHint;\n  const nsr = app.noteScaleRatio;\n  if (!note.visible || note.scored && note.badTime == null) return;\n  ctxfg.setTransform(nsr * note.cosr, nsr * note.sinr, -nsr * note.sinr, nsr * note.cosr, note.offsetX, note.offsetY);\n  if (note.badTime == null) {\n    ctxfg.globalAlpha = note.alpha || (note.showPoint && showPoint.checked ? 0.45 : 0);\n    if (main.awawa) ctxfg.globalAlpha *= Math.max(1 + (timeChart - note.seconds) / 1.5, 0);\n    noteRender.note[HL ? 'FlickHL' : 'Flick'].full(ctxfg);\n  } else {\n    // Nothing to do\n  }\n}\nconst lineImages = new Map() as Map<ImageBitmap, LineImage>;\nclass LineImage {\n  public image: ImageBitmap;\n  public imageFC: ImageBitmap | null;\n  public imageAP: null; // ImageBitmap | null;\n  public imageMP: ImageBitmap | null;\n  public constructor(image: ImageBitmap) {\n    this.image = image;\n    this.imageFC = null;\n    this.imageAP = null;\n    this.imageMP = null;\n  }\n  public async getFC() {\n    if (this.imageFC == null) this.imageFC = await imgShader(this.image, '#a2eeff');\n    return this.imageFC;\n  }\n  public async getAP() {\n    /* if (this.imageAP == null) */ this.imageAP = await Promise.resolve(null); // imgShader(this.image, '#a3ffac');\n    return this.imageAP;\n  }\n  public async getMP() {\n    if (this.imageMP == null) this.imageMP = await imgShader(this.image, '#feffa9');\n    return this.imageMP;\n  }\n}\nconst updateLineImage = (image: ImageBitmap) => {\n  const lineImage = lineImages.get(image) || new LineImage(image);\n  if (!lineImages.has(image)) lineImages.set(image, lineImage);\n  return lineImage;\n};\n// rgba数组(0-1)转十六进制\n// function rgba2hex(...rgba:number[]) {\n//   return '#' + rgba.map(i => ('00' + Math.round(Number(i) * 255 || 0).toString(16)).slice(-2)).join('');\n// }\n// byte转人类可读\nfunction bytefm(byte = 0) {\n  let result = byte;\n  if (result < 1024) return `${result}B`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}KB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}MB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}GB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}TB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}PB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}EB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}ZB`;\n  if ((result /= 1024) < 1024) return `${result.toFixed(2)}YB`;\n  result /= 1024; return `${result}BB`;\n}\nconst updateLevelText = (type: number) => {\n  const table = { sp: [0, 0], ez: [1, 7], hd: [3, 12], in: [6, 15], at: [13, 16] } as Record<string, [number, number]>;\n  let diffStr = (selectDifficulty.value || 'SP').toLowerCase();\n  let levelNum = Number(selectLevel.value) | 0;\n  if (type === 0) {\n    const diff = table[diffStr];\n    if (levelNum < diff[0]) levelNum = diff[0];\n    if (levelNum > diff[1]) levelNum = diff[1];\n    selectLevel.value = levelNum.toString();\n    selectLevel.value = selectLevel.value;\n  } else if (type === 1) {\n    const keys = Object.keys(table);\n    if (table[diffStr][1] < levelNum) diffStr = keys.find(key => table[key][1] >= levelNum) ?? 'SP';\n    else if (table[diffStr][0] > levelNum) diffStr = keys.reverse().find(key => table[key][0] <= levelNum) ?? 'SP';\n    selectDifficulty.value = diffStr.toUpperCase();\n    selectDifficulty.value = selectDifficulty.value;\n  }\n  const diffString = selectDifficulty.value || 'SP';\n  const levelString = selectLevel.value || '?';\n  return [diffString, levelString].join('\\u2002Lv.');\n};\nlevelText = updateLevelText(-1);\nselectDifficulty.addEventListener('change', () => levelText = updateLevelText(0));\nselectLevel.addEventListener('change', () => levelText = updateLevelText(1));\nselectVolume.addEventListener('change', evt => {\n  const volume = Number((evt.target as HTMLInputElement).value);\n  app.musicVolume = Math.min(1, 1 / volume);\n  app.soundVolume = Math.min(1, volume);\n  Promise.resolve().then(atPause).then(atPause);\n});\nstatus.reg('selectVolume', selectVolume);\ncheckAutoPlay.addEventListener('change', evt => {\n  app.playMode = (evt.target as HTMLInputElement).checked ? 1 : 0;\n});\ncheckAutoPlay.dispatchEvent(new Event('change'));\nlowRes.checkbox.addEventListener('change', evt => {\n  app.setLowResFactor((evt.target as HTMLInputElement).checked ? 0.5 : 1);\n});\nlowRes.checkbox.dispatchEvent(new Event('change'));\nselectbg.onchange = () => {\n  const bg = bgs.get(selectbg.value);\n  background.image = bg || null;\n  if (bg) bg.setBlur();\n};\nselectchart.addEventListener('change', adjustInfo);\n(function() {\n  const input = document.createElement('input');\n  Object.assign(input, { type: 'number', min: 25, max: 1000, value: 60 });\n  input.style.cssText += ';width:50px;margin-left:10px';\n  input.addEventListener('change', function(this: HTMLInputElement) {\n    const value = Number(this.value);\n    if (value < 25) this.value = '25';\n    if (value > 1000) this.value = '1000';\n    frameAnimater.setFrameRate(Number(this.value));\n  });\n  status.reg('maxFrameNumber', input, false);\n  maxFrame.container.appendChild(input);\n  maxFrame.checkbox.addEventListener('change', function(this: HTMLInputElement) {\n    input.classList.toggle('disabled', !this.checked);\n    if (this.checked) input.dispatchEvent(new Event('change'));\n    else frameAnimater.setFrameRate(0);\n  });\n  maxFrame.checkbox.dispatchEvent(new Event('change'));\n}());\n// Play\nemitter.addEventListener('change', function(this: Emitter) {\n  canvas.classList.toggle('fade', this.eq('stop'));\n  blockMask.classList.toggle('fade', this.ne('stop'));\n  btnPlay.value = this.eq('stop') ? '播放' : '停止';\n  btnPause.value = this.eq('pause') ? '继续' : '暂停';\n  btnPause.classList.toggle('disabled', this.eq('stop'));\n  for (const i of $$('.disabled-when-playing')) i.classList.toggle('disabled', this.ne('stop'));\n  // console.log(this);\n});\nbtnPlay.addEventListener('click', function(this: HTMLInputElement) {\n  const handler = async() => {\n    if (this.classList.contains('disabled')) return;\n    this.classList.add('disabled');\n    await atStop();\n    this.classList.remove('disabled');\n  };\n  handler();\n});\nbtnPause.addEventListener('click', function(this: HTMLInputElement) {\n  const handler = async() => {\n    if (this.classList.contains('disabled')) return;\n    this.classList.add('disabled');\n    await atPause();\n    this.classList.remove('disabled');\n  };\n  handler();\n});\ninputOffset.addEventListener('input', function(this: HTMLInputElement) {\n  const value = Number(this.value);\n  if (value < -400) this.value = '-400';\n  if (value > 600) this.value = '600';\n});\nstatus2.reg(emitter, 'change', () => main.awawa ? 'Reversed' : ''); // TODO: 重构\nstatus2.reg(selectflip, 'change', target => ['', 'FlipX', 'FlipY', 'FlipX&Y'][Number((target as HTMLSelectElement).value)]);\nstatus2.reg(selectspeed, 'change', target => (target as HTMLSelectElement).value);\nstatus2.reg(emitter, 'change', target => (target as Emitter).eq('pause') ? 'Paused' : '');\nasync function atStop(): Promise<void> {\n  if (emitter.eq('stop')) {\n    if (!selectchart.value) {\n      main.error('未选择任何谱面');\n      return;\n    }\n    for (const i of main.before.values()) await i();\n    audio.play(res.mute, { loop: true, isOut: false }); // 播放空音频(避免音画不同步)\n    app.prerenderChart(main.modify(charts.get(selectchart.value)!));\n    const md5 = chartsMD5.get(selectchart.value)!;\n    const format = chartsFormat.get(selectchart.value)!;\n    stat.level = Number(/\\d+$/.exec(levelText));\n    if (app.chart != null) stat.reset(app.chart.numOfNotes, md5, format, selectspeed.value);\n    await loadLineData({ onwarn: sendWarning });\n    const bgm = bgms.get(selectbgm.value) || { audio: audio.mute(app.chart!.maxSeconds + 0.5), video: null };\n    app.bgMusic = bgm.audio;\n    app.bgVideo = bgm.video;\n    duration0 = app.bgMusic.duration / app.speed;\n    isInEnd = false;\n    isOutStart = false;\n    isOutEnd = false;\n    timeBgm = 0;\n    if (!showTransition.checked) timeIn.addTime(3e3);\n    frameAnimater.start();\n    timeIn.play();\n    interact.activate();\n    emitter.emit('play');\n  } else {\n    emitter.emit('stop');\n    interact.deactive();\n    audio.stop();\n    frameAnimater.stop();\n    // 清除原有数据\n    isOutOver = false;\n    tempStat = null;\n    hitFeedbackList.clear();\n    hitImageList.clear();\n    hitWordList.clear();\n    timeIn.reset();\n    timeOut.reset();\n    timeEnd.reset();\n    curTime = 0;\n    curTimeMS = 0;\n    duration0 = 0;\n    for (const i of main.end.values()) await i();\n  }\n}\nasync function loadLineData({\n  onwarn = (_: string) => {}\n} = {}) {\n  for (const i of app.lines) {\n    i.imageW = 6220.8; // 1920\n    i.imageH = 7.68; // 3\n    i.imageL = [res.JudgeLine, res.JudgeLineMP, null, res.JudgeLineFC];\n    i.imageS = 1; // 2.56\n    i.imageA = 1; // 1.5625\n    i.imageD = false;\n    i.imageC = true;\n    i.imageU = true;\n  }\n  for (const i of chartLineData) {\n    if (selectchart.value === i.chart) {\n      if (i.lineId == null) {\n        onwarn('未指定判定线id');\n        continue;\n      }\n      const line = app.lines[Number(i.lineId)] as Renderer.JudgeLine | null;\n      if (line == null) {\n        onwarn(`指定id的判定线不存在：${i.lineId}`);\n        continue;\n      }\n      let image = i.image == null ? null : bgs.get(i.image)?.base;\n      if (!image) {\n        if (i.image != null) onwarn(`图片不存在：${i.image}`);\n        image = res.NoImageBlack;\n      }\n      line.imageW = image.width;\n      line.imageH = image.height;\n      const lineImage = updateLineImage(image);\n      line.imageL = await Promise.all([image, lineImage.getMP(), lineImage.getAP(), lineImage.getFC()]);\n      if (i.scaleOld != null) { // Legacy\n        line.imageS = Math.abs(i.scaleOld) * 1080 / image.height;\n        line.imageU = i.scaleOld > 0;\n      }\n      if (i.scale != null) line.imageS = i.scale;\n      if (i.aspect != null) line.imageA = i.aspect;\n      if (i.useBackgroundDim != null) line.imageD = i.useBackgroundDim;\n      if (i.useLineColor != null) line.imageC = i.useLineColor;\n      if (i.useLineScale != null) line.imageU = i.useLineScale;\n    }\n  }\n}\nasync function atPause() {\n  if (emitter.eq('stop') || isOutOver) return;\n  if (emitter.eq('play')) {\n    if (app.bgVideo != null) app.bgVideo.pause();\n    timeIn.pause();\n    if (showTransition.checked && isOutStart) timeOut.pause();\n    curTime = timeBgm;\n    audio.stop();\n    audio.play(res.mute, { loop: true, isOut: false }); // TODO: 重构\n    emitter.emit('pause');\n  } else {\n    if (app.bgVideo != null) await playVideo(app.bgVideo, timeBgm * app.speed);\n    timeIn.play();\n    if (showTransition.checked && isOutStart) timeOut.play();\n    if (isInEnd && !isOutStart) playBgm(app.bgMusic, timeBgm * app.speed);\n    // console.log(app.bgVideo);\n    emitter.emit('play');\n  }\n}\n// Plugins\nconst debounce = (callback: () => void, delay: number) => {\n  let timer = 0;\n  return () => {\n    clearTimeout(timer);\n    timer = self.setTimeout(callback, delay);\n  };\n};\nconst loadPlugin = (searchValue: string, callback: () => void) => {\n  inputName.addEventListener('input', debounce(() => {\n    if (inputName.value === searchValue) {\n      callback();\n      inputName.value = '';\n      inputName.dispatchEvent(new Event('input'));\n    }\n  }, 1e3));\n};\nconst appendCfg = (name: string, callback: () => void) => new Checkbox(name).appendBefore(resetCfg.container).hook(callback);\nmain.fireModal = function(navHTML = '', contentHTML = '') {\n  const cover = document.createElement('div');\n  cover.classList.add('cover-dark', 'fade');\n  const container = document.createElement('div');\n  container.classList.add('cover-view', 'fade');\n  const nav = document.createElement('div');\n  nav.classList.add('view-nav');\n  nav.innerHTML = navHTML;\n  const content = document.createElement('div');\n  content.classList.add('view-content');\n  content.innerHTML = contentHTML;\n  content.addEventListener('custom-done', () => cover.click());\n  container.append(nav, content);\n  requestAnimationFrame(() => {\n    ($('.main') as HTMLDivElement).append(cover, container);\n    requestAnimationFrame(() => {\n      cover.classList.remove('fade');\n      container.classList.remove('fade');\n    });\n  });\n  cover.addEventListener('click', () => {\n    cover.classList.add('fade');\n    cover.addEventListener('transitionend', () => {\n      cover.remove();\n    });\n    container.classList.add('fade');\n    container.addEventListener('transitionend', () => {\n      container.remove();\n    });\n  });\n  return content;\n};\nmain.toast = (msg = '') => main.fireModal('<p>提示</p>', `<p style=\"white-space:pre;text-align:left;display:inline-block;\">${msg}</p>`);\nmain.error = (msg = '') => main.fireModal('<p>错误</p>', `<p style=\"white-space:pre;text-align:left;display:inline-block;\">${msg}</p>`);\nmain.define = a => a;\nmain.use = async m => {\n  const module = await m.then(n => n.default);\n  for (const i of module.contents) {\n    if (i.type === 'command') loadPlugin(i.meta[0], i.meta[1]);\n    else if (i.type === 'script') i.meta[0]($);\n    else if (i.type === 'config') appendCfg(i.meta[0], i.meta[1]);\n    else throw new TypeError(`Unknown Plugin Type: ${i.type}`);\n  }\n  console.log(module);\n  return module;\n};\nmain.use(import('@/plugins/phizone.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/tips.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/filter.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/skin.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/export.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/gauge.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/dynamic-score.js') as unknown as Promise<ModuleBase>);\nmain.use(import('@/plugins/video-recorder.js') as unknown as Promise<ModuleBase>);\n// debug\nself.hook = main;\nexport const hook = main;\nmain.stat = stat;\nmain.app = app;\nmain.res = res;\nmain.audio = audio;\nmain.sendText = sendText;\nmain.sendWarning = sendWarning;\nmain.sendError = sendError;\nmain.frameAnimater = frameAnimater;\nmain.timeEnd = timeEnd;\nmain.bgms = bgms;\nmain.inputName = inputName;\nmain.selectbgm = selectbgm;\nmain.selectchart = selectchart;\nmain.chartsMD5 = chartsMD5;\nmain.noteRender = noteRender;\nmain.reader = reader;\nmain.ZipReader = ZipReader;\nmain.status = status;\nmain.tmps = tmps;\nmain.awawa = false;\nmain.pause = async() => emitter.eq('play') && atPause();\nObject.defineProperty(main, 'playing', {\n  get: () => emitter.eq('play')\n  // set: v => v ? atPause() : atPause()\n});\nObject.defineProperty(main, 'time', {\n  get: () => timeBgm,\n  set(v: number) {\n    const handler = async() => {\n      if (emitter.eq('stop') || isOutOver) return;\n      const isPlaying = emitter.eq('play');\n      if (isPlaying) await atPause();\n      timeBgm = v / app.speed;\n      curTime = timeBgm;\n      app.seekLineEventIndex();\n      // app.notes.forEach(a => { a.status = 0;\n      //   a.scored = 0;\n      //   a.holdStatus = 1; });\n      // stat.reset();\n      if (isPlaying) await atPause().catch(console.warn); // FIXME: video+gauge结算时会报错\n    };\n    handler();\n  }\n});\n/* exported hook */\n","export class Stage {\n  private aspectRatio: number;\n  private isFull: boolean;\n  private readonly stage: HTMLDivElement;\n  public constructor(stage: HTMLDivElement) {\n    this.aspectRatio = 0;\n    this.isFull = false;\n    this.stage = stage;\n    this.resize();\n  }\n  public resize(ratio = 0): void {\n    this.aspectRatio = ratio || this.aspectRatio || 16 / 9;\n    const devicePixelRatio = self.devicePixelRatio || 1;\n    const rawWidth = Math.min(854, document.body.getBoundingClientRect().width * 0.8);\n    const width = Math.round(rawWidth * devicePixelRatio);\n    const height = Math.ceil(width / this.aspectRatio); // 保证实际宽高比不大于理论值，防止出现黑边\n    const stageWidth = width / devicePixelRatio;\n    const stageHeight = height / devicePixelRatio;\n    if (this.isFull) this.stage.style.cssText = ';position:fixed;top:0;left:0;bottom:0;right:0';\n    else this.stage.style.cssText = `;width:${stageWidth.toFixed(3)}px;height:${stageHeight.toFixed(3)}px`;\n  }\n  public getFull(): boolean {\n    return this.isFull;\n  }\n  public setFull(isFull: boolean): boolean {\n    return this.isFull = isFull;\n  }\n}\n","interface SpeedEventExtends extends SpeedEvent {\n  floorPosition: number;\n  floorPosition2: number;\n  startSeconds: number;\n  endSeconds: number;\n}\ninterface NoteExtends extends Note {\n  maxVisiblePos: number;\n  offsetX: number;\n  offsetY: number;\n  alpha: number;\n  seconds: number;\n  holdSeconds: number;\n  line: JudgeLine;\n  lineId: number;\n  noteId: number;\n  isAbove: boolean;\n  name: string;\n  isMulti: boolean;\n  nearNotes: NoteExtends[];\n  badTime?: number;\n  badY?: number;\n  projectX: number;\n  projectY: number;\n  cosr: number;\n  sinr: number;\n  visible: boolean;\n  showPoint: boolean;\n  frameCount: number;\n  status: number;\n  scored: boolean;\n  holdTapTime: number;\n  holdStatus: number;\n  holdBroken: boolean;\n  statOffset: number;\n}\ninterface LineEventExtends extends JudgeLineEvent {\n  startSeconds: number;\n  endSeconds: number;\n}\ninterface JudgeLineExtends extends JudgeLine {\n  lineId: number;\n  offsetX: number;\n  offsetY: number;\n  alpha: number;\n  rotation: number;\n  positionY: number;\n  positionY2: number;\n  speedEvents: SpeedEventExtends[];\n  notesAbove: NoteExtends[];\n  notesBelow: NoteExtends[];\n  judgeLineDisappearEvents: LineEventExtends[];\n  judgeLineMoveEvents: LineEventExtends[];\n  judgeLineRotateEvents: LineEventExtends[];\n  disappearEventsIndex: number;\n  moveEventsIndex: number;\n  rotateEventsIndex: number;\n  speedEventsIndex: number;\n  cosr: number;\n  sinr: number;\n  imageW: number;\n  imageH: number;\n  imageD: boolean;\n  imageU: boolean;\n  imageS: number;\n  imageA: number;\n  imageL: [ImageBitmap, ImageBitmap, null, ImageBitmap];\n  imageC: boolean;\n}\ninterface ChartExtends extends Chart {\n  maxSeconds: number;\n  judgeLineList: JudgeLineExtends[];\n}\ninterface EventSeconds {\n  startTime: number;\n  endTime: number;\n  startSeconds: number;\n  endSeconds: number;\n}\nexport class Renderer {\n  // 容器和画布上下文\n  public stage: HTMLDivElement;\n  public canvas: HTMLCanvasElement;\n  public ctx: CanvasRenderingContext2D;\n  public canvasfg: HTMLCanvasElement;\n  public ctxfg: CanvasRenderingContext2D;\n  /** Half of the width of the canvas. */\n  public wlen: number;\n  /** Half of the height of the canvas. */\n  public hlen: number;\n  public scaleX: number;\n  public scaleY: number;\n  private width: number;\n  private height: number;\n  private matX: (x: number) => number;\n  private matY: (y: number) => number;\n  private matR: (r: number) => number;\n  // 用户设置项\n  public speed: number;\n  public lineScale: number;\n  public noteScale: number;\n  public noteScaleRatio: number;\n  public brightness: number;\n  public multiHint: boolean;\n  public playMode: number;\n  public musicVolume: number;\n  public soundVolume: number;\n  public enableFR: boolean;\n  public enableVP: boolean;\n  public lowResFactor: number;\n  // 谱面数据\n  public readonly lines: JudgeLineExtends[];\n  public readonly notes: NoteExtends[];\n  public readonly taps: NoteExtends[];\n  public readonly drags: NoteExtends[];\n  public readonly flicks: NoteExtends[];\n  public readonly holds: NoteExtends[];\n  public linesReversed: JudgeLineExtends[];\n  public notesReversed: NoteExtends[];\n  public tapsReversed: NoteExtends[];\n  public dragsReversed: NoteExtends[];\n  public flicksReversed: NoteExtends[];\n  public holdsReversed: NoteExtends[];\n  public readonly tapholds: NoteExtends[];\n  // 资源数据\n  public chart: ChartExtends | null;\n  public bgMusic: AudioBuffer;\n  public bgVideo: HTMLVideoElement | null;\n  private _mirrorType: number;\n  private initialized: boolean;\n  public constructor(stage: unknown) {\n    if (!(stage instanceof HTMLDivElement)) throw new Error('Not a container');\n    const fail = () => { throw new Error('Failed to initialize canvas') };\n    this.stage = stage;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d', { alpha: false }) || fail(); // 游戏界面(alpha:false会使Firefox显示异常/需要验证)\n    this.canvasfg = document.createElement('canvas'); // 绘制游戏主界面(OffscreenCanvas会使Safari崩溃)\n    this.ctxfg = this.canvasfg.getContext('2d') || fail();\n    this.stage.appendChild(this.canvas);\n    this.canvas.style.cssText = ';position:absolute;top:0px;left:0px;right:0px;bottom:0px';\n    console.log('Hello, Phixos!');\n    // config\n    this.speed = 1;\n    this.lineScale = 57.6;\n    this.noteScale = 1; // note缩放设定值\n    this.noteScaleRatio = 8e3; // note缩放比率，由noteScale计算而来\n    this.brightness = 0.6;\n    // this.songName = '';\n    // this.chartLevel = '';\n    // this.illustrator = '';\n    // this.chartDesign = '';\n    // this.feedback = true;\n    // this.imageBlur = true;\n    this.multiHint = true;\n    // this.hitSound = true;\n    // this.anchorPoint = false;\n    // this.coloredLine = true;\n    // this.perfectLine = '#feffa9';\n    // this.goodLine = '#a2eeff';\n    // this.perfectNote = '#ffeca0';\n    // this.goodNote = '#b4e1ff';\n    // this.badNote = '#6c4343';\n    this.playMode = 1; // 0:game,1:auto,2:hyper,3:auto&hyper\n    this.musicVolume = 1;\n    this.soundVolume = 1;\n    // this.showTransition = true;\n    // this.chartOffset = 0;\n    this._mirrorType = 0;\n    this.enableFR = false;\n    this.enableVP = false;\n    // chart\n    this.chart = null;\n    this.bgMusic = null as unknown as AudioBuffer;\n    this.bgVideo = null;\n    this.lines = [];\n    this.notes = [];\n    this.taps = [];\n    this.drags = [];\n    this.flicks = [];\n    this.holds = [];\n    this.linesReversed = [];\n    this.notesReversed = [];\n    this.tapsReversed = [];\n    this.dragsReversed = [];\n    this.flicksReversed = [];\n    this.holdsReversed = [];\n    this.tapholds = [];\n    // canvas\n    this.lowResFactor = 1;\n    this.width = 0;\n    this.height = 0;\n    this.wlen = 0;\n    this.hlen = 0;\n    this.scaleX = 0;\n    this.scaleY = 0;\n    this.matX = x => x;\n    this.matY = y => y;\n    this.matR = r => r;\n    this.initialized = false;\n    // event\n    this._setLowResFactor(1);\n    this.resizeCanvas();\n  }\n  // config\n  public setNoteScale(num = 1): void {\n    this.noteScale = num;\n    this.noteScaleRatio = this.canvasfg.width * this.noteScale / 8080; // note、特效缩放\n  }\n  public setLowResFactor(num = 1): void {\n    this._setLowResFactor(num);\n    this._resizeCanvas();\n  }\n  public resizeCanvas(): void {\n    const { width, height } = this.stage.getBoundingClientRect();\n    if (this.width === width && this.height === height) return;\n    this.width = width;\n    this.height = height;\n    this.canvas.style.cssText += `;width:${width.toFixed(3)}px;height:${height.toFixed(3)}px`; // 只有inset还是会溢出\n    this._resizeCanvas();\n  }\n  public mirrorView(code = this._mirrorType): void {\n    const n = 3 & code;\n    this._mirrorType = n;\n    this.transformView(1 & n ? -1 : 1, 2 & n ? -1 : 1, 0, 0);\n  }\n  public transformView(scaleX = 1, scaleY = 1, offsetX = 0, offsetY = 0): void {\n    const { canvasfg } = this;\n    const xa = canvasfg.width * scaleX;\n    const xb = (canvasfg.width - xa) * 0.5;\n    const ya = -canvasfg.height * scaleY;\n    const yb = (canvasfg.height - ya) * 0.5;\n    const ra = -Math.sign(scaleX * scaleY) * Math.PI / 180;\n    const rb = scaleY > 0 ? 0 : Math.PI;\n    const tx = Math.sign(scaleY) * xa * 0.05625;\n    const ty = Math.sign(scaleY) * -ya * 0.6; // 控制note流速\n    this.matX = x => xb + xa * (x - offsetX);\n    this.matY = y => yb + ya * (y - offsetY);\n    this.matR = r => rb + ra * r;\n    this.scaleX = tx;\n    this.scaleY = ty;\n    this.initialized = true;\n  }\n  // note预处理\n  public prerenderChart(chart: Chart): void {\n    this.lines.length = 0;\n    this.notes.length = 0;\n    this.taps.length = 0;\n    this.drags.length = 0;\n    this.flicks.length = 0;\n    this.holds.length = 0;\n    this.tapholds.length = 0;\n    const chartNew = chart.duplicate() as ChartExtends;\n    for (const i of chartNew.judgeLineList) {\n      let y = Math.fround(i.speedEvents[0].startTime / i.bpm * 1.875);\n      let y2 = y; // float32\n      for (const j of i.speedEvents) {\n        j.floorPosition = y;\n        j.floorPosition2 = y2;\n        const dy = (j.endTime - j.startTime) / i.bpm * 1.875;\n        y += dy * j.value;\n        y2 += Math.fround(Math.fround(dy) * j.value);\n        y = Math.fround(y);\n        y2 = Math.fround(y2);\n      }\n    }\n    const ss = {\n      aniStart: 1e9,\n      aniEnd: 0,\n      hitStart: 1e9,\n      hitEnd: 0\n    };\n    const aniUpdate = (seconds: number) => {\n      if (seconds < ss.aniStart) ss.aniStart = seconds;\n      if (seconds > ss.aniEnd) ss.aniEnd = seconds;\n    };\n    const hitUpdate = (seconds: number) => {\n      aniUpdate(seconds);\n      if (seconds < ss.hitStart) ss.hitStart = seconds;\n      if (seconds > ss.hitEnd) ss.hitEnd = seconds;\n    };\n    // 添加seconds\n    const addSeconds = (events: EventSeconds[], bpm: number) => {\n      for (const i of events) {\n        i.startSeconds = i.startTime / bpm * 1.875;\n        i.endSeconds = i.endTime / bpm * 1.875;\n        if (i.startTime > 1 - 1e6) aniUpdate(i.startSeconds);\n        if (i.endTime < 1e9 && i.endTime !== events[events.length - 1].endTime) aniUpdate(i.endSeconds);\n      }\n    };\n    // 获取note最大可见位置\n    const getMaxVisiblePos = (x: number) => {\n      const n = Math.fround(x);\n      if (!isFinite(n)) throw new TypeError('Argument must be a finite number');\n      const magic = 11718.75;\n      const prime = n >= magic ? 2 ** Math.floor(1 + Math.log2(n / magic)) : 1;\n      const a = n / prime + 0.001;\n      const r = Math.fround(a);\n      if (r <= a) return r * prime;\n      const a_ = new Float32Array([a]);\n      new Uint32Array(a_.buffer)[0] += a_[0] <= 0 ? 1 : -1;\n      return a_[0] * prime;\n    };\n    // 向Renderer添加Note\n    const addNote = (note: NoteExtends, beat32: number, line: JudgeLineExtends, noteId: number, isAbove: boolean) => {\n      note.offsetX = 0;\n      note.offsetY = 0;\n      note.alpha = 0;\n      note.seconds = note.time * beat32;\n      note.holdSeconds = note.holdTime * beat32;\n      note.maxVisiblePos = getMaxVisiblePos(note.floorPosition);\n      if (note.time < 1e9) {\n        hitUpdate(note.seconds);\n        hitUpdate(note.seconds + note.holdSeconds);\n      }\n      note.line = line;\n      note.lineId = line.lineId;\n      note.noteId = noteId;\n      note.isAbove = isAbove;\n      note.name = `${line.lineId}${isAbove ? '+' : '-'}${noteId}${'?tdhf'[note.type]}`;\n      this.notes.push(note);\n      if (note.type === 1) this.taps.push(note);\n      else if (note.type === 2) this.drags.push(note);\n      else if (note.type === 3) this.holds.push(note);\n      else if (note.type === 4) this.flicks.push(note);\n      if (note.type === 1 || note.type === 3) this.tapholds.push(note);\n    };\n    const sortNote = (a: NoteExtends, b: NoteExtends) => a.seconds - b.seconds || a.lineId - b.lineId || a.noteId - b.noteId;\n    // 优化events\n    chartNew.judgeLineList.forEach((i, lineId) => i.lineId = lineId);\n    for (const i of chartNew.judgeLineList) {\n      i.bpm *= this.speed;\n      i.offsetX = 0;\n      i.offsetY = 0;\n      i.alpha = 0;\n      i.rotation = 0;\n      i.positionY = 0; // 临时过渡用\n      i.positionY2 = 0;\n      // i.speedEvents = normalizeSpeedEvent(i.speedEvents) as SpeedEventExtends[];\n      // i.judgeLineDisappearEvents = normalizeLineEvent(i.judgeLineDisappearEvents) as LineEventExtends[];\n      // i.judgeLineMoveEvents = normalizeLineEvent(i.judgeLineMoveEvents) as LineEventExtends[];\n      // i.judgeLineRotateEvents = normalizeLineEvent(i.judgeLineRotateEvents) as LineEventExtends[];\n      i.disappearEventsIndex = 0;\n      i.moveEventsIndex = 0;\n      i.rotateEventsIndex = 0;\n      i.speedEventsIndex = 0;\n      addSeconds(i.speedEvents, i.bpm);\n      addSeconds(i.judgeLineDisappearEvents, i.bpm);\n      addSeconds(i.judgeLineMoveEvents, i.bpm);\n      addSeconds(i.judgeLineRotateEvents, i.bpm);\n      this.lines.push(i); // TODO: 可以定义新类避免函数在循环里定义\n      i.notesAbove.forEach((j, noteId) => addNote(j, 1.875 / i.bpm, i, noteId, true));\n      i.notesBelow.forEach((j, noteId) => addNote(j, 1.875 / i.bpm, i, noteId, false));\n    }\n    this.notes.sort(sortNote);\n    this.taps.sort(sortNote);\n    this.drags.sort(sortNote);\n    this.holds.sort(sortNote);\n    this.flicks.sort(sortNote);\n    this.notesReversed = this.notes.toReversed();\n    this.tapsReversed = this.taps.toReversed();\n    this.dragsReversed = this.drags.toReversed();\n    this.holdsReversed = this.holds.toReversed();\n    this.flicksReversed = this.flicks.toReversed();\n    this.linesReversed = this.lines.toReversed();\n    this.tapholds.sort(sortNote);\n    // 多押标记\n    const timeOfMulti: Record<string, number> = {};\n    for (const i of this.notes) timeOfMulti[i.seconds.toFixed(6)] = timeOfMulti[i.seconds.toFixed(6)] ? 2 : 1;\n    for (const i of this.notes) i.isMulti = timeOfMulti[i.seconds.toFixed(6)] === 2;\n    // 分析邻近Note(0.01s内标记，用于预处理Flick,TapHold重叠判定)\n    for (let i = 0; i < this.flicks.length; i++) {\n      const note = this.flicks[i];\n      note.nearNotes = [];\n      for (let j = i + 1; j < this.flicks.length; j++) {\n        const note2 = this.flicks[j];\n        if (Math.fround(note2.seconds - note.seconds) > 0.01) break;\n        note.nearNotes.push(note2);\n      }\n    }\n    for (let i = 0; i < this.tapholds.length; i++) {\n      const note = this.tapholds[i];\n      note.nearNotes = [];\n      for (let j = i + 1; j < this.tapholds.length; j++) {\n        const note2 = this.tapholds[j];\n        if (Math.fround(note2.seconds - note.seconds) > 0.01) break;\n        note.nearNotes.push(note2);\n      }\n    }\n    this.chart = chartNew;\n    this.chart.maxSeconds = ss.aniEnd;\n    console.table(ss);\n  }\n  /** 从0开始，将事件index定位到正确位置 */\n  public seekLineEventIndex(time?: number): void {\n    if (!this.initialized) throw new Error('Not initialized');\n    for (const line of this.lines) {\n      line.speedEventsIndex = 0;\n      line.disappearEventsIndex = 0;\n      line.moveEventsIndex = 0;\n      line.rotateEventsIndex = 0;\n      if (time == null) continue;\n      while (line.speedEventsIndex < line.speedEvents.length && line.speedEvents[line.speedEventsIndex].endSeconds < time) line.speedEventsIndex++;\n      while (line.disappearEventsIndex < line.judgeLineDisappearEvents.length && line.judgeLineDisappearEvents[line.disappearEventsIndex].endSeconds < time) line.disappearEventsIndex++;\n      while (line.moveEventsIndex < line.judgeLineMoveEvents.length && line.judgeLineMoveEvents[line.moveEventsIndex].endSeconds < time) line.moveEventsIndex++;\n      while (line.rotateEventsIndex < line.judgeLineRotateEvents.length && line.judgeLineRotateEvents[line.rotateEventsIndex].endSeconds < time) line.rotateEventsIndex++;\n    }\n  }\n  public updateByTime(time: number): void {\n    if (!this.initialized) throw new Error('Not initialized');\n    for (const line of this.lines) {\n      for (let i = line.disappearEventsIndex, len = line.judgeLineDisappearEvents.length; i < len; i++) {\n        const evt = line.judgeLineDisappearEvents[i];\n        if (time > evt.endSeconds) continue;\n        const dt = (time - evt.startSeconds) / (evt.endSeconds - evt.startSeconds);\n        line.alpha = evt.start + (evt.end - evt.start) * dt;\n        if (line.alpha > 1) line.alpha = 1;\n        line.disappearEventsIndex = i;\n        break;\n      }\n      for (let i = line.moveEventsIndex, len = line.judgeLineMoveEvents.length; i < len; i++) {\n        const evt = line.judgeLineMoveEvents[i];\n        if (time > evt.endSeconds) continue;\n        const dt = (time - evt.startSeconds) / (evt.endSeconds - evt.startSeconds);\n        line.offsetX = this.matX(evt.start + (evt.end - evt.start) * dt);\n        line.offsetY = this.matY(evt.start2 + (evt.end2 - evt.start2) * dt);\n        line.moveEventsIndex = i;\n        break;\n      }\n      for (let i = line.rotateEventsIndex, len = line.judgeLineRotateEvents.length; i < len; i++) {\n        const evt = line.judgeLineRotateEvents[i];\n        if (time > evt.endSeconds) continue;\n        const dt = (time - evt.startSeconds) / (evt.endSeconds - evt.startSeconds);\n        line.rotation = this.matR(evt.start + (evt.end - evt.start) * dt);\n        line.cosr = Math.cos(line.rotation);\n        line.sinr = Math.sin(line.rotation);\n        line.rotateEventsIndex = i;\n        break;\n      }\n      for (let i = line.speedEventsIndex, len = line.speedEvents.length; i < len; i++) {\n        const evt = line.speedEvents[i];\n        if (time > evt.endSeconds) continue;\n        line.positionY = (time - evt.startSeconds) * this.speed * evt.value + (this.enableFR ? evt.floorPosition2 : evt.floorPosition);\n        line.positionY2 = (time - evt.startSeconds) * this.speed * evt.value + evt.floorPosition2;\n        line.speedEventsIndex = i;\n        break;\n      }\n      const getGoodY = (i: NoteExtends) => {\n        if (i.type !== 3) return (i.floorPosition - line.positionY) * i.speed;\n        if (i.seconds < time) return (i.seconds - time) * this.speed * i.speed;\n        return i.floorPosition - line.positionY;\n      };\n      const getBadY = (i: NoteExtends) => {\n        if (i.badTime == null) return getGoodY(i);\n        if (performance.now() - i.badTime > 500) delete i.badTime;\n        if (i.badY == null) i.badY = getGoodY(i);\n        return i.badY;\n      };\n      const setAlpha = (i: NoteExtends, dx: number, dy: number) => {\n        i.projectX = line.offsetX + dx * i.cosr;\n        i.offsetX = i.projectX + dy * i.sinr;\n        i.projectY = line.offsetY + dx * i.sinr;\n        i.offsetY = i.projectY - dy * i.cosr;\n        i.visible = (i.offsetX - this.wlen) ** 2 + (i.offsetY - this.hlen) ** 2 < (this.wlen * 1.23625 + this.hlen + this.scaleY * i.holdSeconds * this.speed * i.speed) ** 2; // Math.hypot实测性能较低\n        i.showPoint = false;\n        if (i.badTime != null) {\n          // Not bad\n        } else if (i.seconds > time) {\n          i.showPoint = true;\n          const isHidden = i.maxVisiblePos < line.positionY2;\n          i.alpha = isHidden || this.enableVP && getGoodY(i) * 0.6 > 2 ? 0 : i.type === 3 && i.speed === 0 ? 0 : 1;\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n          i.frameCount = i.frameCount == null ? 0 : i.frameCount + 1;\n          if (i.type === 3) {\n            i.showPoint = true;\n            i.alpha = i.speed === 0 ? 0 : i.status % 4 === 2 ? 0.45 : 1;\n          } else i.alpha = Math.max(1 - (time - i.seconds) / 0.16, 0); // 过线后0.16s消失\n        }\n      };\n      for (const i of line.notesAbove) {\n        i.cosr = line.cosr;\n        i.sinr = line.sinr;\n        setAlpha(i, this.scaleX * i.positionX, this.scaleY * getBadY(i));\n      }\n      for (const i of line.notesBelow) {\n        i.cosr = -line.cosr;\n        i.sinr = -line.sinr;\n        setAlpha(i, -this.scaleX * i.positionX, this.scaleY * getBadY(i));\n      }\n    }\n  }\n  private _setLowResFactor(num = 1) {\n    this.lowResFactor = num;\n  }\n  private _resizeCanvas() {\n    const { canvas, canvasfg, width, height } = this;\n    const lowResFactor = this.lowResFactor * self.devicePixelRatio;\n    const widthLowRes = width * lowResFactor;\n    const heightLowRes = height * lowResFactor;\n    canvas.width = widthLowRes;\n    canvas.height = heightLowRes;\n    canvasfg.width = Math.min(widthLowRes, heightLowRes * 16 / 9);\n    canvasfg.height = heightLowRes;\n    this.wlen = canvasfg.width / 2;\n    this.hlen = canvasfg.height / 2;\n    this.mirrorView();\n    this.setNoteScale(this.noteScale);\n    this.lineScale = canvasfg.width > canvasfg.height * 0.75 ? canvasfg.height / 18.75 : canvasfg.width / 14.0625; // 判定线、文字缩放\n  }\n}\nexport namespace Renderer {\n  export type Note = NoteExtends;\n  export type JudgeLine = JudgeLineExtends;\n}\n// // 规范判定线事件\n// function normalizeLineEvent(events: JudgeLineEvent[]) {\n//   const oldEvents = events.map(i => new JudgeLineEvent(i as unknown as Record<string, unknown>)); // 深拷贝\n//   if (!oldEvents.length) return [new JudgeLineEvent({ startTime: -999999, endTime: 1e9 })]; // 如果没有事件，添加一个默认事件(以后添加warning)\n//   const newEvents = [\n//     new JudgeLineEvent({\n//       startTime: -999999,\n//       endTime: 0,\n//       start: oldEvents[0].start,\n//       end: oldEvents[0].start,\n//       start2: oldEvents[0].start2,\n//       end2: oldEvents[0].start2\n//     })\n//   ]; // 以1-1e6开头\n//   oldEvents.push(new JudgeLineEvent({\n//     startTime: oldEvents[oldEvents.length - 1].endTime,\n//     endTime: 1e9,\n//     start: oldEvents[oldEvents.length - 1].end,\n//     end: oldEvents[oldEvents.length - 1].end,\n//     start2: oldEvents[oldEvents.length - 1].end2,\n//     end2: oldEvents[oldEvents.length - 1].end2\n//   })); // 以1e9结尾\n//   for (const i2 of oldEvents) {\n//     // 保证时间连续性\n//     if (i2.startTime > i2.endTime) continue;\n//     const i1 = newEvents[newEvents.length - 1];\n//     if (i1.endTime > i2.endTime) {\n//       // 忽略\n//     } else if (i1.endTime === i2.startTime) newEvents.push(i2);\n//     else if (i1.endTime < i2.startTime) {\n//       newEvents.push(new JudgeLineEvent({\n//         startTime: i1.endTime,\n//         endTime: i2.startTime,\n//         start: i1.end,\n//         end: i1.end,\n//         start2: i1.end2,\n//         end2: i1.end2\n//       }), i2);\n//     } else if (i1.endTime > i2.startTime) {\n//       newEvents.push(new JudgeLineEvent({\n//         startTime: i1.endTime,\n//         endTime: i2.endTime,\n//         start: (i2.start * (i2.endTime - i1.endTime) + i2.end * (i1.endTime - i2.startTime)) / (i2.endTime - i2.startTime),\n//         end: i1.end,\n//         start2: (i2.start2 * (i2.endTime - i1.endTime) + i2.end2 * (i1.endTime - i2.startTime)) / (i2.endTime - i2.startTime),\n//         end2: i1.end2\n//       }));\n//     }\n//   }\n//   // 合并相同变化率事件\n//   const newEvents2 = [newEvents.shift()!];\n//   for (const i2 of newEvents) {\n//     const i1 = newEvents2[newEvents2.length - 1];\n//     const d1 = i1.endTime - i1.startTime;\n//     const d2 = i2.endTime - i2.startTime;\n//     if (i2.startTime === i2.endTime) {\n//       // 忽略\n//     } else if (i1.end === i2.start && i1.end2 === i2.start2 && (i1.end - i1.start) * d2 === (i2.end - i2.start) * d1 && (i1.end2 - i1.start2) * d2 === (i2.end2 - i2.start2) * d1) {\n//       i1.endTime = i2.endTime;\n//       i1.end = i2.end;\n//       i1.end2 = i2.end2;\n//     } else newEvents2.push(i2);\n//   }\n//   return newEvents2;\n// }\n// // 规范speedEvents\n// function normalizeSpeedEvent(events: SpeedEvent[]) {\n//   const newEvents = [];\n//   for (const i2 of events) {\n//     const i1 = newEvents[newEvents.length - 1];\n//     if (i1?.value === i2.value) i1.endTime = i2.endTime;\n//     else newEvents.push(i2);\n//   }\n//   return newEvents;\n// }\n","// Html交互(WIP)\nexport class StatusManager {\n  private readonly key: string;\n  private data: Record<string, string>;\n  public constructor(key: string) {\n    this.key = key;\n    this.data = {};\n  }\n  public init(resetCallback: (data: Record<string, string>) => string): this {\n    this.data = JSON.parse(localStorage.getItem(this.key) ?? '{}') as Record<string, string>;\n    if (typeof resetCallback === 'function') {\n      if (resetCallback(this.data)) this.reset();\n    }\n    return this;\n  }\n  public save(): void {\n    localStorage.setItem(this.key, JSON.stringify(this.data));\n  }\n  public reset(): void {\n    this.data = {};\n    this.save();\n  }\n  public get(key: string): string | undefined {\n    return this.data[key];\n  }\n  public set(key: string, value: string): void {\n    this.data[key] = value;\n    this.save();\n  }\n  public reg(key: string, node: HTMLElement, dispatch: unknown = true): void {\n    if (node instanceof HTMLInputElement || node instanceof HTMLSelectElement) {\n      const property = node.type === 'checkbox' ? 'checked' : 'value';\n      const value = this.get(key);\n      if (value !== undefined) ((node as HTMLInputElement)[property] as string) = value;\n      node.addEventListener('change', () => {\n        this.set(key, (node as HTMLInputElement)[property] as string);\n      });\n      if (dispatch as boolean) node.dispatchEvent(new Event('change'));\n    } else if (node instanceof HTMLTextAreaElement) {\n      const value = this.get(key);\n      if (value !== undefined) (node.value as unknown) = value;\n      node.addEventListener('change', () => {\n        this.set(key, node.value);\n      });\n      if (dispatch as boolean) node.dispatchEvent(new Event('change'));\n    } else throw new Error('Node must be <input>, <select> or <textarea>');\n  }\n}\n","export class FrameTimer {\n  private tick: number;\n  private time: number;\n  private fps: number;\n  public constructor() {\n    this.tick = 0;\n    this.time = performance.now();\n    this.fps = 0;\n  }\n  public get fpsStr(): string {\n    const { fps } = this;\n    if (fps < 10) return fps.toPrecision(2);\n    return fps.toFixed(0);\n  }\n  public get disp(): number {\n    return 0.5 / this.fps || 0;\n  }\n  public addTick(fr = 10): number {\n    if (++this.tick >= fr) {\n      this.tick = 0;\n      this.fps = 1e3 * fr / (-this.time + (this.time = performance.now()));\n    }\n    return this.fps;\n  }\n}\n","export class FrameAnimater {\n  private callback: (arg0: number) => void;\n  private lastTime: number;\n  private interval: number;\n  private id: number | null;\n  public constructor() {\n    this.callback = (): void => {};\n    this.lastTime = 0;\n    this.interval = Number.EPSILON;\n    this.id = null;\n    this._animate = this._animate.bind(this);\n  }\n  public start(): void {\n    if (this.id !== null) return;\n    this.lastTime = performance.now();\n    this.id = requestAnimationFrame(this._animate.bind(this));\n  }\n  public stop(): void {\n    if (this.id === null) return;\n    cancelAnimationFrame(this.id);\n    this.id = null;\n  }\n  public setCallback(callback: (arg0: number) => void): void {\n    if (typeof callback !== 'function') throw new TypeError('callback is not a function');\n    this.callback = callback;\n  }\n  public setFrameRate(frameRate: number): void {\n    this.interval = Math.abs(1e3 / frameRate);\n    if (!isFinite(this.interval)) this.interval = Number.EPSILON;\n  }\n  private _animate() {\n    this.id = requestAnimationFrame(this._animate.bind(this)); // 回调更新动画\n    const nowTime = performance.now();\n    const elapsed = nowTime - this.lastTime;\n    if (elapsed > this.interval) {\n      this.lastTime = nowTime - elapsed % this.interval;\n      this.callback(nowTime);\n    }\n  }\n}\n","import { getConstructorName, isUndefined, loadJS, orientation } from '@/js/common.js';\nimport { audio } from '@/external';\nexport async function checkSupport({\n  messageCallback = (_msg: string) => {},\n  warnCallback = (_msg: string) => {},\n  errorCallback = (_msg: string, _html: string, _fatal?: boolean) => {},\n  mobileCallback = () => {},\n  orientNotSupportCallback = () => {}\n} = {}): Promise<number> {\n  const sysError = (error: unknown, message?: string) => {\n    const type = getConstructorName(error) as string;\n    // if (message==='Script error.') return;\n    let message2 = String(error);\n    let detail = String(error);\n    if (error instanceof Error) {\n      const stack = error.stack ?? 'Stack not available';\n      if (error.name === type) message2 = error.message;\n      else message2 = `${error.name}: ${error.message}`;\n      const idx = stack.indexOf(message2) + 1;\n      if (idx) detail = `${message2}\\n${stack.slice(idx + message2.length)}`;\n      else detail = `${message2}\\n    ${stack.split('\\n').join('\\n    ')}`; // Safari\n    }\n    if (message != null) message2 = message;\n    const errMessage = `[${type}] ${message2.split('\\n')[0]}`;\n    const errDetail = `[${type}] ${detail}`;\n    errorCallback(errMessage, Utils.escapeHTML(errDetail));\n  };\n  self.addEventListener('error', e => sysError(e.error, e.message));\n  self.addEventListener('unhandledrejection', e => sysError(e.reason));\n  const loadLib = async(name: string, urls: string[] | string, check: () => boolean) => {\n    if (!check()) return true;\n    const errmsg1 = `错误：${name}组件加载失败（点击查看详情）`;\n    const errmsg2 = `${name}组件加载失败，请检查您的网络连接然后重试：`;\n    const errmsg3 = `${name}组件加载失败，请检查浏览器兼容性`;\n    const errCatch = (e: Error) => errorCallback(errmsg1, e.message.replace(/.+/, errmsg2), true);\n    messageCallback(`加载${name}组件...`);\n    await loadJS(urls).catch(errCatch);\n    if (!check()) return true;\n    errorCallback(errmsg1, errmsg3, true);\n    return false;\n  };\n  await Utils.addFont('Titillium Web', { alt: 'Custom' });\n  // 兼容性检测\n  messageCallback('检查浏览器兼容性...');\n  const isMobile = navigator.standalone !== undefined || navigator.platform.includes('Linux') && navigator.maxTouchPoints === 5;\n  if (isMobile) mobileCallback();\n  checkMiuiVersion(warnCallback);\n  if (!await loadLib('ImageBitmap兼容', '/lib/createImageBitmap.js', () => isUndefined('createImageBitmap'))) return -1;\n  messageCallback('加载声音组件...');\n  const oggCompatible = new Audio().canPlayType('audio/ogg') !== '';\n  if (!await loadLib('ogg格式兼容', '/lib/oggmented-bundle.js', () => !oggCompatible && isUndefined('oggmented'))) return -4;\n  audio.init(oggCompatible ? self.AudioContext : self.oggmented.OggmentedAudioContext); // 兼容Safari\n  const webpCompatible = document.createElement('canvas').toDataURL('image/webp').includes('data:image/webp');\n  if (!await loadLib('webp格式兼容', '/lib/webp-bundle.js', () => !webpCompatible && isUndefined('webp'))) return -5;\n  await checkOrient(orientNotSupportCallback);\n  return 0;\n}\nfunction checkMiuiVersion(warnCallback: (_msg: string) => void) {\n  if (navigator.userAgent.includes('MiuiBrowser')) {\n    // 实测 v17.1.8 问题仍然存在，v17.4.80113 问题已修复\n    const miuiVersion = /MiuiBrowser\\/(\\d+\\.\\d+)/.exec(navigator.userAgent);\n    const text = '检测到小米浏览器且版本低于17.4，可能存在切后台声音消失的问题';\n    if (miuiVersion == null || parseFloat(miuiVersion[1]) < 17.4) warnCallback(text);\n  }\n}\nasync function checkOrient(orientNotSupportCallback: () => void) {\n  const orientSupported = await orientation.checkSupport();\n  if (!orientSupported) orientNotSupportCallback();\n}\n","import createCtx from './createCtx';\nimport { audio } from '@/external';\nexport async function fixme(raw: Record<string, unknown>, res: Record<string, unknown>): Promise<void> {\n  const entries = ['Tap', 'TapHL', 'Drag', 'DragHL', 'HoldHead', 'HoldHeadHL', 'Hold', 'HoldHL', 'HoldEnd', 'Flick', 'FlickHL', 'HitFXRaw'];\n  if (raw.image == null) raw.image = {};\n  const { image } = raw as { image: Record<string, string | null> };\n  for (const entry of entries) {\n    if (image[entry] == null) image[entry] = '|8080';\n  }\n  if (res.Tap == null) {\n    const ctx = createCtx(1089, 200);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fff';\n    ctx.stroke(new Path2D('M 0 0 L 1089 0 L 1089 200 L 0 200 Z'));\n    ctx.strokeStyle = '#0ac3e1';\n    ctx.stroke(new Path2D('M 50 50 L 1039 50 L 1039 150 L 50 150 Z'));\n    res.Tap = await createImageBitmap(ctx.canvas);\n  }\n  if (res.TapHL == null) {\n    const ctx = createCtx(1089, 200);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fdfd66';\n    ctx.stroke(new Path2D('M 0 0 L 1089 0 L 1089 200 L 0 200 Z'));\n    ctx.strokeStyle = '#0ac3e1';\n    ctx.stroke(new Path2D('M 50 50 L 1039 50 L 1039 150 L 50 150 Z'));\n    res.TapHL = await createImageBitmap(ctx.canvas);\n  }\n  if (res.Drag == null) {\n    const ctx = createCtx(1089, 160);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fff';\n    ctx.stroke(new Path2D('M 0 0 L 1089 0 L 1089 160 L 0 160 Z'));\n    ctx.strokeStyle = '#f0ed69';\n    ctx.stroke(new Path2D('M 50 50 L 1039 50 L 1039 110 L 50 110 Z'));\n    res.Drag = await createImageBitmap(ctx.canvas);\n  }\n  if (res.DragHL == null) {\n    const ctx = createCtx(1089, 160);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fdfd66';\n    ctx.stroke(new Path2D('M 0 0 L 1089 0 L 1089 160 L 0 160 Z'));\n    ctx.strokeStyle = '#f0ed69';\n    ctx.stroke(new Path2D('M 50 50 L 1039 50 L 1039 110 L 50 110 Z'));\n    res.DragHL = await createImageBitmap(ctx.canvas);\n  }\n  if (res.HoldHead == null) {\n    const ctx = createCtx(1089, 100);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fff';\n    ctx.stroke(new Path2D('M 0 0 L 0 100 L 1089 100 L 1089 0'));\n    ctx.strokeStyle = '#96ebfc';\n    ctx.stroke(new Path2D('M 50 0 L 50 50 L 1039 50 L 1039 0'));\n    res.HoldHead = await createImageBitmap(ctx.canvas);\n  }\n  if (res.HoldHeadHL == null) {\n    const ctx = createCtx(1089, 100);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fdfd66';\n    ctx.stroke(new Path2D('M 0 0 L 0 100 L 1089 100 L 1089 0'));\n    ctx.strokeStyle = '#96ebfc';\n    ctx.stroke(new Path2D('M 50 0 L 50 50 L 1039 50 L 1039 0'));\n    res.HoldHeadHL = await createImageBitmap(ctx.canvas);\n  }\n  if (res.Hold == null) {\n    const ctx = createCtx(1089, 1900);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fff';\n    ctx.stroke(new Path2D('M 0 0 L 0 1900 M 1089 0 L 1089 1900'));\n    ctx.strokeStyle = '#96ebfc';\n    ctx.stroke(new Path2D('M 50 0 L 50 1900 M 1039 0 L 1039 1900'));\n    res.Hold = await createImageBitmap(ctx.canvas);\n  }\n  if (res.HoldHL == null) {\n    const ctx = createCtx(1089, 1900);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fdfd66';\n    ctx.stroke(new Path2D('M 0 0 L 0 1900 M 1089 0 L 1089 1900'));\n    ctx.strokeStyle = '#96ebfc';\n    ctx.stroke(new Path2D('M 50 0 L 50 1900 M 1039 0 L 1039 1900'));\n    res.HoldHL = await createImageBitmap(ctx.canvas);\n  }\n  if (res.HoldEnd == null) {\n    const ctx = createCtx(1089, 100);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fff';\n    ctx.stroke(new Path2D('M 0 100 L 0 0 L 1089 0 L 1089 100'));\n    ctx.strokeStyle = '#96ebfc';\n    ctx.stroke(new Path2D('M 50 100 L 50 50 L 1039 50 L 1039 100'));\n    res.HoldEnd = await createImageBitmap(ctx.canvas);\n  }\n  if (res.Flick == null) {\n    const ctx = createCtx(1089, 300);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fff';\n    ctx.stroke(new Path2D('M 0 0 L 1089 0 L 1089 300 L 0 300 Z'));\n    ctx.strokeStyle = '#fe4365';\n    ctx.stroke(new Path2D('M 50 50 L 1039 50 L 1039 250 L 50 250 Z'));\n    res.Flick = await createImageBitmap(ctx.canvas);\n  }\n  if (res.FlickHL == null) {\n    const ctx = createCtx(1089, 300);\n    ctx.lineWidth = 32;\n    ctx.strokeStyle = '#fdfd66';\n    ctx.stroke(new Path2D('M 0 0 L 1089 0 L 1089 300 L 0 300 Z'));\n    ctx.strokeStyle = '#fe4365';\n    ctx.stroke(new Path2D('M 50 50 L 1039 50 L 1039 250 L 50 250 Z'));\n    res.FlickHL = await createImageBitmap(ctx.canvas);\n  }\n  if (res.Rank == null) {\n    const _5x5colors = ['#fffb00', '#a937e7', '#ea61df', '#ff9e22', '#00a844', '#00e8de', '#e4e4e4'];\n    const _5x5dots = [5232301, 4532785, 16267326, 18415150, 16301615, 31491134, 1088575];\n    const ctx = createCtx(256, 1792);\n    for (let i = 0; i < 7; i++) {\n      ctx.fillStyle = '#fff';\n      ctx.fillRect(0, i * 256, 256, 256);\n      ctx.fillStyle = '#303030';\n      ctx.fillRect(16, i * 256 + 16, 224, 224);\n      ctx.fillStyle = _5x5colors[i];\n      const dot = _5x5dots[i];\n      const size = 32;\n      const start = (256 - size * 5) / 2;\n      for (let k = 0; k < 25; k++) {\n        if (dot >> k & 1) {\n          const x = start + k % 5 * size;\n          const y = start + Math.floor(k / 5) * size + i * 256;\n          ctx.fillRect(x, y, size, size);\n        }\n      }\n    }\n    res.Rank = await createImageBitmap(ctx.canvas);\n  }\n  if (res.HitFXRaw == null) {\n    const ctx = createCtx(256, 256 * 30);\n    ctx.strokeStyle = '#fff';\n    for (let i = 0; i < 30; i++) {\n      const tick = i / 30;\n      ctx.lineWidth = (1 - tick) ** 2 * 25;\n      ctx.globalAlpha = 1 - tick;\n      const width = tick ** 0.2 * 224;\n      ctx.strokeRect(128 - width / 2, i * 256 + 128 - width / 2, width, width);\n    }\n    res.HitFXRaw = await createImageBitmap(ctx.canvas);\n  }\n  if (res.LevelOver1 == null) {\n    const ctx = createCtx(1716, 325);\n    ctx.fillStyle = '#000';\n    ctx.globalAlpha = 0.8;\n    ctx.fillRect(0, 0, 1716, 325);\n    ctx.fillStyle = '#989898';\n    // ctx.fillRect(0, 90, 1716, 145);\n    // ctx.fillStyle = '#4b4b4b';\n    ctx.fillRect(0, 94, 1716, 137);\n    ctx.globalAlpha = 1;\n    ctx.fillStyle = 'white';\n    ctx.textAlign = 'right';\n    ctx.font = 'bold 30px Custom';\n    ctx.fillText('ACC:', 240, 172);\n    ctx.fillText('Max combo:', 1420, 172);\n    ctx.textAlign = 'center';\n    ctx.font = 'bold 22px Custom';\n    ctx.fillText('Perfect', 788, 304);\n    ctx.fillText('Good', 942, 304);\n    ctx.fillText('Bad', 1096, 304);\n    ctx.fillText('Miss', 1250, 304);\n    res.LevelOver1 = await createImageBitmap(ctx.canvas);\n  }\n  if (res.LevelOver4 == null) {\n    const ctx = createCtx(633, 122);\n    const gradient = ctx.createLinearGradient(24, 0, 633, 0);\n    gradient.addColorStop(0, 'rgba(0,0,0,0.78125)');\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    ctx.fillStyle = gradient;\n    ctx.fillRect(24, 24, 609, 72);\n    res.LevelOver4 = await createImageBitmap(ctx.canvas);\n  }\n  if (res.LevelOver5 == null) {\n    const ctx = createCtx(11, 43);\n    ctx.fillStyle = '#fff';\n    ctx.fillRect(3, 1, 7, 40);\n    res.LevelOver5 = await createImageBitmap(ctx.canvas);\n  }\n  const entries2 = ['HitFXRaw', 'Rank', 'LevelOver1', 'LevelOver3', 'LevelOver4', 'LevelOver5'];\n  for (const entry of entries2) {\n    if (res[entry] == null) {\n      res[entry] = await createImageBitmap(createCtx(1, 1).canvas);\n    }\n  }\n  if (res.JudgeLine == null) {\n    const ctx = createCtx(1920, 3);\n    ctx.fillStyle = '#fff';\n    ctx.fillRect(0, 0, 1920, 3);\n    res.JudgeLine = await createImageBitmap(ctx.canvas);\n  }\n  if (res.ProgressBar == null) {\n    const ctx = createCtx(1919, 11);\n    ctx.fillStyle = '#919191';\n    ctx.fillRect(0, 0, 1916, 11);\n    ctx.fillStyle = '#fff';\n    ctx.fillRect(1916, 0, 3, 11);\n    res.ProgressBar = await createImageBitmap(ctx.canvas);\n  }\n  if (res.HitSong0 == null) res.HitSong0 = audio.triangle(0.075, 880, 0.5); // 0.1\n  if (res.HitSong1 == null) res.HitSong1 = audio.triangle(0.05, 1318, 0.5); // 0.44\n  if (res.HitSong2 == null) res.HitSong2 = audio.triangle(0.075, 1760, 0.5); // 0.39\n  if (res.LevelOver0_v1 == null) res.LevelOver0_v1 = audio.noise(27.83);\n  if (res.LevelOver1_v1 == null) res.LevelOver1_v1 = audio.noise(27.83);\n  if (res.LevelOver2_v1 == null) res.LevelOver2_v1 = audio.noise(27.83);\n  if (res.LevelOver3_v1 == null) res.LevelOver3_v1 = audio.noise(27.83);\n}\n"],"names":["full","toggle","elem","this","enabled","Promise","reject","Error","onFullscreen","s","resolve","document","addEventListener","onchange","once","onerror","element","handler","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","call","HTMLElement","body","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","check","onfullscreenchange","onwebkitfullscreenchange","onmozfullscreenchange","onfullscreenerror","onwebkitfullscreenerror","onmozfullscreenerror","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","orientation","checkSupport","screen","lock","type","unlock","hook","toast","e","name","message","lockLandscape","lockPortrait","isUndefined","self","Reflect","construct","EventTarget","listeners","prototype","constructor","callback","push","removeEventListener","stack","i","l","length","splice","dispatchEvent","event","defaultPrevented","error","cause","Object","defineProperty","value","DOMException","super","captureStackTrace","replace","AudioContext","webkitAudioContext","hasOwn","obj","prop","hasOwnProperty","Array","toReversed","slice","reverse","Timer","__publicField","t0","t1","isPaused","time","performance","now","second","play","pause","reset","addTime","num","parseCSV","rawText","isObject","lines","split","rows","line","rowText","isQuot","beforeQuot","row","char","SyntaxError","arr","j","stringify","bfs","labels","label","decoder","TextDecoder","fatal","decode","Type","int","a","Number","float","bool","str","String","isArray","map","Type$1","SpeedEvent","startTime","endTime","Note","note","positionX","holdTime","speed","floorPosition","JudgeLineEvent","start","end","start2","end2","JudgeLine","numOfNotes","numOfNotesAbove","numOfNotesBelow","bpm","speedEvents","notesAbove","notesBelow","judgeLineDisappearEvents","judgeLineMoveEvents","judgeLineRotateEvents","Chart","input","chart","formatVersion","offset","judgeLineList","reduce","b","duplicate","structChart","filename","result","evt","Math","floor","errors","messages","numOfLines","o","host","code","target","maxNoteSeconds","seconds","subErrors","maxNoteTime","ceil","checkMaxEventTime","key","maxEndTime","join","data","structInfoData","record","path","Name","Musician","artist","Composer","Artist","Level","level","Illustrator","illustrator","Designer","charter","Charter","Music","music","Image","image","AspectRatio","v","parseFloat","isFinite","aspectRatio","ScaleRatio","noteScale","NoteScale","GlobalAlpha","backgroundDim","BackgroundDim","Offset","structLineData","LineId","lineId","Vert","scaleOld","Horz","aspect","IsDark","useBackgroundDim","Scale","scale","Aspect","UseBackgroundDim","UseLineColor","useLineColor","UseLineScale","useLineScale","base64map","crypt","rotl","n","rotr","endian","randomBytes","bytes","random","bytesToWords","words","wordsToBytes","bytesToHex","hex","toString","hexToBytes","c","parseInt","substr","bytesToBase64","base64","triplet","charAt","base64ToBytes","imod4","indexOf","pow","cryptModule","exports","charenc","utf8","stringToBytes","bin","unescape","encodeURIComponent","bytesToString","decodeURIComponent","escape","charCodeAt","fromCharCode","charenc_1","isBuffer_1","isBuffer","readFloatLE","isSlowBuffer","_isBuffer","require$$0","require$$1","require$$2","md5","options","encoding","Uint8Array","m","d","FF","_ff","GG","_gg","HH","_hh","II","_ii","aa","bb","cc","dd","x","t","_blocksize","_digestsize","md5Module","digestbytes","asBytes","asString","FileEmitter","assign","createElement","accept","multiple","fireChange","files","reader","FileReader","readAsArrayBuffer","onprogress","fireProgress","loaded","total","onload","ArrayBuffer","fireLoad","uploadFile","webkitdirectory","click","uploadDir","Event","ProgressEvent","lengthComputable","file","buffer","ZipReader","async","worker","read","result0","CustomEvent","Zip","msg","detail","catch","err","postMessage","terminate","readerInit","pattern","_path","createAudioBuffer","videoElement","src","URL","createObjectURL","Blob","preload","onloadedmetadata","videoWidth","width","videoHeight","height","audio","video","readMediaData","arraybuffer","actx","close","decodeAudioData","then","defaultDecode","text","json","JSON","parse","_","fround","jsonData","format","imageData","createImageBitmap","mustMatch","define","readers","lastIndexOf","splitPath","filtered","filter","test","sort","weight","errorHandler","g","use","createReader","isText","isJSON","HitEvent","id","offsetX","offsetY","isActive","isTapped","isMoving","lastDeltaX","lastDeltaY","nowDeltaX","nowDeltaY","deltaTime","currentTime","flicking","flicked","move","flickSpeed","sqrt","JudgeEvent","judged","preventBad","Stat","noteRank","combos","cumDisp","curDisp","numDisp","maxcombo","combo","good","bad","great","perfect","all","scoreNum","scoreStr","toFixed","repeat","accNum","accStr","avgDispStr","trunc","curDispStr","lineStatus","rankStatus","round","localData","removeLegacy","item","localStorage","getItem","setItem","removeItem","getData","isAuto","s1","s2","l1","l2","l3","na","sa","sb","entries","pbj","newBestColor","newBestStr","scoreBest","scoreDelta","abs","textAboveColor","textAboveStr","textBelowColor","textBelowStr","_localStorage$getItem","addCombo","status","addDisp","disp","createCtx","canvas","ctx","getContext","TypeError","_typeof","Symbol","iterator","ImgAny","mulTable","shgTable","BlurStack","instance","Constructor","_classCallCheck","r","next","hex2rgba","color","fillStyle","fillRect","getImageData","imgShader","img","limit","dataRGBA","willReadFrequently","drawImage","dy","dx","imgData","putImageData","imgSplit","limitX","limitY","min","sy","sx","border","ctx1","ab","size","DataView","getUint32","decodeAlt","mask","combined","Checkbox","checked","container","checkbox","Utils","randomUUID","htmlFor","textContent","appendChild","appendTo","appendBefore","node","parentNode","insertBefore","HitEvents","updateCallback","iterateCallback","update","defilter","bind","animate","iterate","predicate","add","clear","HitFeedback","n1","n2","tap","hold","HitImage","n3","packs","noteRender","hitFX","duration","effects","direction","numOfParts","fill","PI","_note","HitWord","early","late","ScaledNote","compacted","dw","dh","head","tail","adjustSize","source","dest","sw","sh","BetterMessageBox","list","updateHTML","appendMessage","MessageHandler","betterMessageBoxes","addBox","msgbox","setAttribute","classList","nodeView","removeNodeBox","nodeBox","remove","updateText","lastMessage","removeBetterMessageBox","index","innerHTML","btn","innerText","style","onclick","bmsgbox","page","pages","createTextNode","btnIgnoreAll","nodePageNum","contentEditable","cssText","nodePages","btnPrevousPage","btnNextPage","nodeControl","append","nodeBMsg","updatePage","isNaN","max","onblur","timer","clearTimeout","setTimeout","querySelectorAll","btnIgnore","div","getBetterMessageBox","nodeText","className","sendWarning","isHTML","escapeHTML","sendError","html","exp","ahtml","match","url","startsWith","rpath","location","origin","includes","_i","$id","query","getElementById","$","querySelector","viewNav","viewCfg","viewMsg","viewNav2","viewRmg","viewExt","coverDark","coverRmg","coverView","buttonRmg","buttonDocs","buttonMore","anchorCfg","anchorMsg","anchorRmg","strongOut","blockUploader","stageEl","selectNoteScale","selectAspectRatio","selectBackgroundDim","checkHighLight","inputOffset","lineColor","checkAutoPlay","showTransition","checkFeedback","checkImageBlur","selectbg","btnPlay","btnPause","selectbgm","selectchart","selectflip","selectspeed","inputName","inputArtist","inputCharter","inputIllustrator","selectDifficulty","selectLevel","selectVolume","blockUploaderSelect","blockUpload","blockUploadFile","blockUploadDir","blockSelect","blockMask","tween","sin","time2Str","Rs","main","before","Map","after","filterOptions","oncontextmenu","preventDefault","children","fireModal","msgHandler","arguments","sendText","stat","stage","isFull","resize","ratio","devicePixelRatio","rawWidth","getBoundingClientRect","stageWidth","stageHeight","getFull","setFull","app","HTMLDivElement","fail","alpha","canvasfg","ctxfg","console","log","lineScale","noteScaleRatio","brightness","multiHint","playMode","musicVolume","soundVolume","_mirrorType","enableFR","enableVP","bgMusic","bgVideo","notes","taps","drags","flicks","holds","linesReversed","notesReversed","tapsReversed","dragsReversed","flicksReversed","holdsReversed","tapholds","lowResFactor","wlen","hlen","scaleX","scaleY","matX","matY","y","matR","initialized","_setLowResFactor","resizeCanvas","setNoteScale","setLowResFactor","_resizeCanvas","mirrorView","transformView","xa","xb","ya","yb","ra","sign","rb","tx","ty","prerenderChart","chartNew","y2","floorPosition2","ss","aniStart","aniEnd","hitStart","hitEnd","aniUpdate","hitUpdate","addSeconds","events","startSeconds","endSeconds","addNote","beat32","noteId","isAbove","holdSeconds","maxVisiblePos","magic","prime","log2","a_","Float32Array","Uint32Array","getMaxVisiblePos","sortNote","forEach","rotation","positionY","positionY2","disappearEventsIndex","moveEventsIndex","rotateEventsIndex","speedEventsIndex","timeOfMulti","isMulti","nearNotes","note2","maxSeconds","table","seekLineEventIndex","updateByTime","len","dt","cosr","cos","sinr","getGoodY","getBadY","badTime","badY","setAlpha","projectX","projectY","visible","showPoint","isHidden","frameCount","widthLowRes","heightLowRes","Emitter","statusInit","emit","eq","ne","emitter","status2","reg","Boolean","levelText","ImageStore","base","_blur","blur","setBlur","w","h","topX","topY","radius","context","getImageDataFromCanvas","stackEnd","pixels","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackIn","stackOut","yw","yi","mulSum","shgSum","pr","pg","pb","pa","rInSum","gInSum","bInSum","aInSum","rOutSum","gOutSum","bOutSum","aOutSum","rSum","gSum","bSum","aSum","_i2","p","rbs","paInitial","_a2","_p","_stackOut","_r","_g","_b","_a","_x","_pr","_pg","_pb","_pa","_rOutSum","_gOutSum","_bOutSum","_aOutSum","_rSum","_gSum","_bSum","_aSum","_i3","yp","_gInSum","_bInSum","_aInSum","_rInSum","_i4","_rbs","_y","_p2","processImageDataRGBA","canvasRGBA","imgBlur","bgs","bgms","charts","chartsMD5","chartsFormat","chartLineData","chartInfoData","init","resetCallback","_localStorage$getItem2","save","get","set","dispatch","HTMLInputElement","HTMLSelectElement","property","HTMLTextAreaElement","resetCfg","showCE2","showAcc","showStat","lowRes","lockOri","maxFrame","autoDelay","adjustInfo","trim","toLocaleUpperCase","has","_s$e$target$value$toL","slowest","slower","faster","fastest","toLowerCase","uploader","dones","totals","uploaderDone","uploaderTotal","handleFile","tag","promise","oncomplete","values","loadComplete","fileTotal","zip","pick","basename","getUniqueName","createOption","info","warn","innerhtml","option","percent","bytefm","webkitRelativePath","isZip","byteLength","import","default","hitManager","activate","idx","findIndex","hit","moving","hitEl","find","deactivate","exitFull","ln","timeIn","timeOut","timeEnd","specialClick","func","atPause","atStop","pressTime","getJudgeOffset","judgeEvent","getJudgeDistance","res","nowTimeMS","curTime","curTimeMS","timeBgm","timeChart","duration0","isInEnd","isOutStart","isOutEnd","frameTimer","tick","fps","fpsStr","toPrecision","addTick","fr","frameAnimater","lastTime","interval","EPSILON","_animate","requestAnimationFrame","stop","cancelAnimationFrame","setCallback","setFrameRate","frameRate","nowTime","elapsed","playBgm","playVideo","hitFeedbackList","hitImageList","hitWordList","judgeWidth","judgeManager","addEvent","execute","tmps","bgImage","background","getImageBlur","progress","awawa","placeholder","combo2","customForeDraw","customBackDraw","loopNoCanvas","clearRect","globalAlpha","drawLine","resetTransform","drawHold","drawDrag","drawTap","drawFlick","drawNotes","font","textAlign","setTransform","fillText","ProgressBar","fillTextNode","imgW","imgH","JudgeLineMP","val","loopCanvas","isOutOver","globalCompositeOperation","bgImageBlur","difficulty","toLocaleLowerCase","loop","exec","tempStat","statData","k","clip","skew","LevelOver4","LevelOver1","LevelOver5","textWidth","outerSize","innerSize","LevelOver3","Ranks","transition","Path2D","getImage","atDraw3","handlerHide","dn","visibilityState","bgMusicHack","playbackrate","gainrate","playbackRate","muted","_t$Math$floor","r3","ds","dispTime","scored","holdTapTime","holdStatus","HitSong1","distance","noteJudge","nearcomp","nearNote","nearDistance","HitSong2","holdBroken","deltaTime2","nearDeltaTime","note1","HitSong0","statOffset","beginPath","arc","interact","InteractProxy","getPos","rect","clientX","left","offsetWidth","clientY","top","offsetHeight","setMouseEvent","mousedownCallback","button","mousemoveCallback","buttons","mouseupCallback","setKeyboardEvent","keydownCallback","NaN","keyupCallback","setTouchEvent","touchstartCallback","changedTouches","identifier","touchmoveCallback","touchendCallback","touchcancelCallback","TapBad","imgPainter","updateFX","img0","hideParts","hitRaw","hitPerfect","hitGood","Perfect","Good","window","messageCallback","_msg","warnCallback","errorCallback","_html","_fatal","mobileCallback","orientNotSupportCallback","sysError","getConstructorName","message2","_f$stack","errMessage","errDetail","reason","loadLib","urls","errmsg1","errmsg2","errmsg3","args","from","href","args0","arg","load","script","port","crossOrigin","loadJS","addFont","alt","navigator","standalone","platform","maxTouchPoints","userAgent","miuiVersion","checkMiuiVersion","oggCompatible","Audio","canPlayType","oggmented","OggmentedAudioContext","webpCompatible","toDataURL","checkOrient","display","raw","fetch","loadResource","atob","alternative","loadedNum","errorNum","res0","res1","ext","referrerPolicy","blob","arrayBuffer","blob1","mute","readResource","entry","Tap","lineWidth","strokeStyle","stroke","TapHL","Drag","DragHL","HoldHead","HoldHeadHL","Hold","HoldHL","HoldEnd","Flick","FlickHL","Rank","_5x5colors","_5x5dots","dot","HitFXRaw","strokeRect","gradient","createLinearGradient","addColorStop","entries2","triangle","LevelOver0_v1","noise","LevelOver1_v1","LevelOver2_v1","LevelOver3_v1","fixme","NoImageBlack","ImageData","Uint8ClampedArray","NoImageWhite","JudgeLineFC","isBlur","tw","imageD","imgS","imageU","imageS","imageW","imageA","imageH","imageL","imageC","maxWidth","measureText","HL","nsr","baseLength","holdLength","lineImages","LineImage","imageFC","imageAP","imageMP","getFC","getAP","getMP","updateLineImage","lineImage","byte","updateLevelText","sp","ez","hd","in","at","diffStr","levelNum","diff","_o$find","_o$reverse$find","keys","toUpperCase","isOut","modify","onwarn","loadLineData","bgm","deactive","volume","bg","contains","loadPlugin","Yi","searchValue","Xi","delay","debounce","appendCfg","Vi","navHTML","contentHTML","cover","nav","content","module","contents","meta","isPlaying"],"mappings":"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AW,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClwCC,EAAW,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAwiBngCC,EAIJ,SAASA,KA/lBT,SAAyBC,EAAUC,GACjC,KAAMD,aAAoBC,GAClB,MAAA,IAAIT,UAAU,oCAExB,EA4lBEU,CAAgBlf,KAAM+e,GAEtB/e,KAAKmf,EAAI,EACTnf,KAAKgZ,EAAI,EACThZ,KAAKwK,EAAI,EACTxK,KAAK+H,EAAI,EACT/H,KAAKof,KAAO,IACd,ECpnBO,SAASC,EAASC,GACjBhB,MAAAA,EAAMF,EAAU,EAAG,GACzB,OAAAE,EAAIiB,UAAYD,EAChBhB,EAAIkB,SAAS,EAAG,EAAG,EAAG,GACflB,EAAImB,aAAa,EAAG,EAAG,EAAG,GAAGzT,IACtC,CA0BAuJ,eAAsBmK,EAAUC,EAAkBL,EAAeM,EAAQ,KACjE,MAAAC,EAAWR,EAASC,GACpBhB,EAAMF,EAAUuB,EAAI5I,MAAO4I,EAAI1I,OAAQ,CAAE6I,oBAAoB,IAC/DxB,EAAAyB,UAAUJ,EAAK,EAAG,GACtB,IAAA,IAASK,EAAK,EAAGA,EAAKL,EAAI1I,OAAQ+I,GAAMJ,EACtC,IAAA,IAASK,EAAK,EAAGA,EAAKN,EAAI5I,MAAOkJ,GAAML,EAAO,CAC5C,MAAMM,EAAU5B,EAAImB,aAAaQ,EAAID,EAAIJ,EAAOA,GAChD,IAAA,IAAS9b,EAAI,EAAGA,EAAIoc,EAAQlU,KAAKhI,OAAS,EAAGF,IAC3Coc,EAAQlU,KAAS,EAAJlI,IAAU+b,EAAS,GAAK,IACrCK,EAAQlU,KAAS,EAAJlI,EAAQ,IAAM+b,EAAS,GAAK,IACzCK,EAAQlU,KAAS,EAAJlI,EAAQ,IAAM+b,EAAS,GAAK,IACzCK,EAAQlU,KAAS,EAAJlI,EAAQ,IAAM+b,EAAS,GAAK,IAEvCvB,EAAA6B,aAAaD,EAASD,EAAID,EAChC,CAEK,OAAA5H,kBAAkBkG,EAAID,OAC/B,CAwBsB9I,eAAA6K,EAAST,EAAkBU,EAAiBC,GAC1D,MAAAL,EAAKnV,KAAKC,MAAMsV,QAAAA,EAAUvV,KAAKyV,IAAIZ,EAAI5I,MAAO4I,EAAI1I,SAClD+I,EAAKlV,KAAKC,MAAMuV,QAAAA,EAAUL,GAC1B9Y,EAAM,GACZ,IAAA,IAASqZ,EAAK,EAAGA,EAAKb,EAAI1I,OAAQuJ,GAAMR,EACtC,IAAA,IAASS,EAAK,EAAGA,EAAKd,EAAI5I,MAAO0J,GAAMR,EACrC9Y,EAAIxD,KAAKyU,kBAAkBuH,EAAKc,EAAID,EAAIP,EAAID,IAGzC,OAAA9f,QAAQob,IAAInU,EACrB,CAjCiB,CAAAyX,IACRA,EAAShX,OAAAA,SAAO+X,EAAkBe,EAAS,GAC1CC,MAAAA,EAAOvC,EAAUuB,EAAI5I,MAAiB,EAAT2J,EAAYf,EAAI1I,OAAkB,EAATyJ,GAC5DC,EAAKZ,UAAUJ,GAAMe,GAASA,GACxB,MAAApH,EAAKqH,EAAKlB,aAAa,EAAG,EAAGkB,EAAKtC,OAAOtH,MAAO4J,EAAKtC,OAAOtH,OAC5D6J,EAAK,IAAIvO,WAAWiH,EAAGtN,KAAKhI,OAAS,EAAI,GAC/C,IAAA,IAASF,EAAI,EAAGA,EAAI8c,EAAG5c,OAAQF,IAAQ8c,EAAA9c,GAAKwV,EAAGtN,KAAmB,GAAblI,EAAI,EAAI,GAASA,EAAI,GAAS,KAAJA,EACzE+c,MAAAA,EAAO,IAAIC,SAASF,EAAGvL,OAAQ,EAAG,GAAG0L,UAAU,GACrD,OAAOH,EAAGvL,OAAO/P,MAAM,EAAGub,EAAO,EACnC,EACOjC,EAASoC,UAAT,SAAmBrB,GACxB,MAAMrB,EAAMF,EAAUuB,EAAI5I,MAAO4I,EAAI1I,QACjCqH,EAAAyB,UAAUJ,EAAK,EAAG,GAChB,MAAArG,EAAKgF,EAAImB,aAAa,EAAG,EAAGnB,EAAID,OAAOtH,MAAOuH,EAAID,OAAOpH,QACzD2J,EAAK,IAAIvO,WAAWiH,EAAGtN,KAAKhI,OAAS,EAAI,GACzCid,EAAO9B,CAAC9R,EAAI,EAAGvJ,EAAI,IAAMuJ,EAAIvJ,GAAK,EAAI,KAAO,IACnD,IAAA,IAASA,EAAI,EAAGA,EAAI8c,EAAG5c,OAAQF,IAAQ8c,EAAA9c,GAAKwV,EAAGtN,KAAmB,GAAblI,EAAI,EAAI,GAASA,EAAI,GAC1E,MAAMod,EAAW,IAAI7O,WAAWuO,EAAG5c,OAAS,GAC5C,IAAA,IAASF,EAAI,EAAGA,EAAI8c,EAAG5c,OAAS,EAAGF,IAAKod,EAASpd,GAAKmd,GAAML,EAAO,EAAJ9c,GAAS,GAAK,IAAM,GAAK8c,EAAO,EAAJ9c,EAAQ,GAAK,GAAK,GAAIA,GAC3G+c,MAAAA,EAAO,IAAIC,SAASI,EAAS7L,OAAQ,EAAG,GAAG0L,UAAU,GAC3D,OAAOG,EAAS7L,OAAO/P,MAAM,EAAGub,EAAO,EACzC,CArBejC,EAAA,CAAAA,IAAAA,EAAA,CAAA,ICpDV,MAAMuC,EAIJ1d,WAAAA,CAAYkU,EAAcyJ,GAAU,GAHpC3b,EAAAzF,KAAA,aACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,SAEAA,KAAAqhB,UAAY7gB,SAASsT,cAAc,OACnC9T,KAAAshB,SAAW9gB,SAASsT,cAAc,SACvC9T,KAAKshB,SAAS7e,KAAO,WAChBzC,KAAAshB,SAAShI,GAAKiI,MAAMC,aACzBxhB,KAAKshB,SAASF,QAAUA,EACnBphB,KAAAwH,MAAQhH,SAASsT,cAAc,SAC/B9T,KAAAwH,MAAMia,QAAUzhB,KAAKshB,SAAShI,GACnCtZ,KAAKwH,MAAMka,YAAc/J,EACpB3X,KAAAqhB,UAAUM,YAAY3hB,KAAKshB,UAC3BthB,KAAAqhB,UAAUM,YAAY3hB,KAAKwH,MAClC,CACA,WAAW4Z,GACT,OAAOphB,KAAKshB,SAASF,OACvB,CACA,WAAWA,CAAQ3c,GACZzE,KAAAshB,SAASF,QAAU3c,EACxBzE,KAAKshB,SAASpd,cAAc,IAAI+Q,MAAM,UACxC,CACO2M,QAAAA,CAASP,GACJ,OAAAA,EAAAM,YAAY3hB,KAAKqhB,WACpBrhB,IACT,CACO6hB,YAAAA,CAAaC,GAClB,GAAuB,MAAnBA,EAAKC,WAA0B,MAAA,IAAI3hB,MAAM,gCAC7C,OAAA0hB,EAAKC,WAAWC,aAAahiB,KAAKqhB,UAAWS,GACtC9hB,IACT,CACOF,MAAAA,GACAE,KAAAohB,SAAWphB,KAAKshB,SAASF,OAChC,CACOze,IAAAA,CAAKe,GACD,OAAAA,EAAA1D,KAAKshB,SAAUthB,KAAKqhB,WACtBrhB,IACT,EClCK,MAAMiiB,UAAqB7c,MAGzB3B,WAAAA,EACLye,eAAAA,EAAiB7O,MAAM,GACvB8O,gBAAAA,EAAkB/S,UACK,YALlB3J,EAAAzF,KAAA,UACAyF,EAAAzF,KAAA,WAMLA,KAAKoiB,OAASpiB,KAAKqiB,SAASC,KAAKtiB,KAAMkiB,GACvCliB,KAAKuiB,QAAUviB,KAAKwiB,QAAQF,KAAKtiB,KAAMmiB,EACzC,CACQE,QAAAA,CAASI,GACf,IAAI3e,EAAI9D,KAAKgE,OACNF,KAAAA,KAAS2e,EAAUziB,KAAK8D,KAAU9D,KAAAiE,OAAOH,EAAG,GAC5C,OAAA9D,IACT,CACQwiB,OAAAA,CAAQ9e,GACd,IAAA,MAAWI,KAAK9D,KAAM0D,EAASI,EACjC,CACO4e,GAAAA,CAAIje,GACJzE,KAAAA,KAAKgE,QAAUS,CACtB,CACOke,KAAAA,GACL3iB,KAAKgE,OAAS,CAChB,EC5BK,MAAM4e,EAMJnf,WAAAA,CAAY8V,EAAiBC,EAAiBqJ,EAAYC,GAL1Drd,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QAELA,KAAKuZ,QAAUA,EACfvZ,KAAKwZ,QAAUA,EACfxZ,KAAKsf,MAAQuD,EACb7iB,KAAK2X,KAAOmL,EACZ9iB,KAAK6F,KAAO,CACd,CACA,UAAckd,CAAIxJ,EAAiBC,GAEjC,OAAO,IAAIoJ,EAAYrJ,EAASC,EAAS,OAAQ,GACnD,CACA,WAAcwJ,CAAKzJ,EAAiBC,GAElC,OAAO,IAAIoJ,EAAYrJ,EAASC,EAAS,OAAQ,GACnD,CACA,WAAcY,CAAKb,EAAiBC,GAElC,OAAO,IAAIoJ,EAAYrJ,EAASC,EAAS,SAAU,GACrD,ECtBK,MAAMyJ,EAQJxf,WAAAA,CAAY8V,EAAiBC,EAAiBqJ,EAAYK,GAP1Dzd,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,aACAyF,EAAAzF,KAAA,SAEL,MAAMmjB,EAAQxgB,KAAKygB,WAAWC,MAAMR,GAC/B7iB,KAAAuZ,QAAUA,GAAW,EAC1BvZ,KAAKwZ,QAAUA,GAAW,EACrBxZ,KAAA6F,KAAOC,YAAYC,MACxB/F,KAAKsjB,SAAWH,EAAMG,SACtBtjB,KAAKujB,QAAUJ,EAAMI,QAChBvjB,KAAAwjB,UAAYpe,MAAM+d,EAAMM,YAAc,GAAGC,KAAK,GAAGpb,KAAI,IAAM,CAAiB,GAAhBwC,KAAK2E,SAAgB,IAAqB,EAAhB3E,KAAK2E,SAAe3E,KAAK6Y,MACpH3jB,KAAKsf,MAAQ4D,CACf,CACA,cAAc7H,CAAQ9B,EAAiBC,EAAiBoK,GAEtD,OAAO,IAAIX,EAAS1J,EAASC,EAAS,UAAW,UACnD,CACA,WAAc0B,CAAK3B,EAAiBC,EAAiBoK,GAEnD,OAAO,IAAIX,EAAS1J,EAASC,EAAS,OAAQ,UAChD,EC3BK,MAAMqK,EAOJpgB,WAAAA,CAAY8V,EAAiBC,EAAiBqJ,EAAYC,GAN1Drd,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,QAELA,KAAKuZ,QAAUA,GAAW,EAC1BvZ,KAAKwZ,QAAUA,GAAW,EACrBxZ,KAAA6F,KAAOC,YAAYC,MACxB/F,KAAKsjB,SAAW,IAChBtjB,KAAKsf,MAAQuD,EACb7iB,KAAK2X,KAAOmL,CACd,CACA,YAAcgB,CAAMvK,EAAiBC,GAEnC,OAAO,IAAIqK,EAAQtK,EAASC,EAAS,UAAW,QAClD,CACA,WAAcuK,CAAKxK,EAAiBC,GAElC,OAAO,IAAIqK,EAAQtK,EAASC,EAAS,UAAW,OAClD,ECtBK,MAAMwK,EAOJvgB,WAAAA,CAAYkc,EAAkBjR,EAAeuV,GAAY,GANzDxe,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QAML,MAAMigB,GAAMN,EAAI5I,MAAQ,EAAIrI,EACtBsR,GAAML,EAAI1I,OAAS,EAAIvI,EACvBwV,EAAKvE,EAAI5I,MAAQrI,EACjByV,EAAKxE,EAAI1I,OAASvI,EACnB1O,KAAAH,QAAcye,EAAIyB,UAAUJ,EAAKM,EAAID,EAAIkE,EAAIC,GAC7CnkB,KAAAokB,QAAc9F,EAAIyB,UAAUJ,EAAKM,EAAI,EAAGiE,EAAIC,GAC5CnkB,KAAAoB,KAAO,CAACkd,EAAKjU,EAAQrG,IAAWsa,EAAIyB,UAAUJ,EAAKM,EAAI5V,EAAQ6Z,EAAIlgB,GACnEhE,KAAAqkB,KAAO,CAAC/F,EAAKjU,IAAWiU,EAAIyB,UAAUJ,EAAKM,EAAI5V,EAAS8Z,EAAID,EAAIC,GACjEF,IACGjkB,KAAAokB,QAAc9F,EAAIyB,UAAUJ,EAAKM,EAAID,EAAIkE,EAAIC,GAClDnkB,KAAKqkB,KAAO,CAAC/F,EAAKjU,IAAWiU,EAAIyB,UAAUJ,EAAKM,EAAI5V,EAAS8Z,EAAKnE,EAAIkE,EAAIC,GAE9E,ECjBc,SAAAG,EAAWC,EAAcC,EAAY9V,GACnD,MAAQqI,MAAO0N,EAAIxN,OAAQyN,GAAOH,GAC1BxN,MAAOmN,EAAIjN,OAAQkN,GAAOK,EAC9B,OAAAN,EAAKQ,EAAKP,EAAKM,EAAW,CAACP,GAAM,EAAIxV,GAAS,GAAIyV,EAAKD,EAAKQ,EAAKD,EAAK/V,GAAS,EAAGwV,EAAKxV,EAAOwV,EAAKQ,EAAKD,EAAK/V,GAC1G,EAAEwV,EAAKC,EAAKM,EAAKC,EAAKhW,GAAS,EAAGyV,GAAM,EAAIzV,GAAS,EAAGyV,EAAKM,EAAKC,EAAKhW,EAAOyV,EAAKzV,EAC5F,CCVA,MAAMiW,GAOGlhB,WAAAA,CAAYoS,GANZpQ,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,UACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,cAEAA,KAAAoL,KAAOyK,EAAIzK,KAChBpL,KAAKqL,KAAOwK,EAAIxK,KAChBrL,KAAK8C,KAAO+S,EAAI/S,KAChB9C,KAAKsL,OAASuK,EAAIvK,OACbtL,KAAA4kB,KAAO,CAAC/O,GACb7V,KAAK6kB,WAAa,MACpB,CACOC,aAAAA,CAAcjP,GACf,OAAA7V,KAAKoL,OAASyK,EAAIzK,MAClBpL,KAAKqL,OAASwK,EAAIxK,MAClBrL,KAAK8C,OAAS+S,EAAI/S,MAClB9C,KAAKsL,SAAWuK,EAAIvK,SACnBtL,KAAA4kB,KAAKjhB,KAAKkS,GACf7V,KAAK6kB,cACE,EACT,EAEK,MAAeE,GAKbthB,WAAAA,GAJCgC,EAAAzF,KAAc,cAAA,IACLyF,EAAAzF,KAAA,sBAIfA,KAAKglB,mBAAqB,EAC5B,CACQC,MAAAA,CAAOxiB,EAAO,QACdyiB,MAAAA,EAAS1kB,SAASsT,cAAc,OAC/B,OAAAoR,EAAAC,aAAa,OAAQ1iB,GACrByiB,EAAAE,UAAU1C,IAAI,UACd1iB,KAAKqlB,SAAS1D,YAAYuD,EACnC,CACQI,aAAAA,CAAcC,GACpBA,EAAQC,SACHxlB,KAAAylB,WAAWzlB,KAAK0lB,YACvB,CACQC,sBAAAA,CAAuBT,GAC7B,MAAMU,EAAQ5lB,KAAKglB,mBAAmBtU,QAAQwU,IACvB,IAAnBU,GAAmB5lB,KAAAglB,mBAAmB/gB,OAAO2hB,EAAO,EAC1D,CACQV,MAAAA,CAAOrP,EAAM,GAAIpT,EAAO,GAAIkF,GAAQ,GACpCud,MAAAA,EAASllB,KAAKilB,OAAOxiB,GAC3ByiB,EAAOW,UAAYhQ,EACbiQ,MAAAA,EAAMtlB,SAASsT,cAAc,KACnCgS,EAAIC,UAAY,KAChBD,EAAIE,MAAM/d,MAAQ,QAClB6d,EAAIG,QAAU,IAAMjmB,KAAKslB,cAAcJ,GACnCY,EAAAV,UAAUtlB,OAAO,WAAY6H,GACjCud,EAAOvD,YAAYmE,EACrB,CACQI,OAAAA,CAAQrQ,GACR,MAAAqP,EAAS,IAAIP,GAAiB9O,GAC9BsQ,EAAO,CAAEA,KAAM,EAAGtF,KAAM,EAAG,SAAIuF,GAAU,OAAOtb,KAAKa,KAAKuZ,EAAON,KAAK5gB,OAAShE,KAAK6gB,KAAI,GAExFlJ,EAAOnX,SAAS6lB,eAAe,IAE/BC,EAAe9lB,SAASsT,cAAc,KAC5CwS,EAAaP,UAAY,OACZO,EAAAlB,UAAU1C,IAAI,WAErB6D,MAAAA,EAAc/lB,SAASsT,cAAc,QAC/ByS,EAAA7E,YAActZ,OAAO+d,EAAKA,MACtCI,EAAYC,gBAAkB,OAC9BD,EAAYP,MAAMS,QAAU,oDAEtBC,MAAAA,EAAYlmB,SAASsT,cAAc,QAC/B4S,EAAAhF,YAActZ,OAAO+d,EAAKC,OAE9BO,MAAAA,EAAiBnmB,SAASsT,cAAc,KAC9C6S,EAAeZ,UAAY,MAErBa,MAAAA,EAAcpmB,SAASsT,cAAc,KAC3C8S,EAAYb,UAAY,MAElBc,MAAAA,EAAcrmB,SAASsT,cAAc,OAC/B+S,EAAAzB,UAAU1C,IAAI,WAC1BmE,EAAYC,OAAOP,EAAa,MAAOG,EAAW,MAAOC,EAAgB,IAAKC,GAExEG,MAAAA,EAAW/mB,KAAKilB,OAAO,CAAC,SAAU,OAAQ,SAASC,EAAO7Z,OACvD0b,EAAAD,OAAOnP,EAAM2O,EAAcO,GAEvBP,EAAAnB,aAAa,UAAW,IACzB0B,EAAA1B,aAAa,UAAW,IAC9B6B,MAAAA,EAAc3gB,IACb4gB,MAAM5gB,KAAW8f,EAAAA,KAAOrb,KAAKoc,IAAI,EAAGpc,KAAKyV,IAAIla,EAAK8f,EAAKC,SAChDG,EAAA7E,YAActZ,OAAO+d,EAAKA,MACtCjB,EAAOL,YAAW,EAEpB0B,EAAYY,OAAS,IAAMH,EAAW9W,SAASqW,EAAY7E,cAC3DiF,EAAeV,QAAU,IAAMe,EAAWb,EAAKA,KAAO,GACtDS,EAAYX,QAAU,IAAMe,EAAWb,EAAKA,KAAO,GACnDG,EAAaL,QAAU,KACrBjmB,KAAK2lB,uBAAuBT,GAC5BllB,KAAKslB,cAAcyB,EAAQ,EAG7B,IAAIK,EAAQ,EACZlC,OAAAA,EAAOL,WAAa,KAClBwC,aAAaD,GACLA,EAAAjkB,KAAKmkB,YAAY,KACjB,MAAElB,MAAAA,GAAUD,EACdA,EAAKA,KAAOC,IAAOD,EAAKA,KAAOC,GACnC,MAAMld,GAASid,EAAKA,KAAO,GAAKA,EAAKtF,KACrClJ,EAAK+J,YAAiBwD,GAAAA,EAAO7Z,KAAU6Z,GAAAA,EAAO9Z,YAAY8Z,EAAON,KAAK5gB,UAAUkhB,EAAOpiB,SAAW,OAAOoiB,EAAO5Z,SACpGib,EAAA7E,YAActZ,OAAO+d,EAAKA,MAC5BO,EAAAhF,YAActZ,OAAOge,GACpBtiB,IAAAA,MAAAA,KAAKijB,EAASQ,iBAAiB,aAAezjB,EAAkBshB,UAAUtlB,OAAO,OAAQsmB,GAAS,GAClGtiB,IAAAA,MAAAA,KAAKijB,EAASQ,iBAAiB,aAAczjB,EAAE0hB,SAC/C1hB,IAAAA,MAAAA,KAAKohB,EAAON,KAAKtf,MAAM4D,EAAOA,EAAQid,EAAKtF,MAAO,CACrD2G,MAAAA,EAAYhnB,SAASsT,cAAc,KACzC0T,EAAUzB,UAAY,KACZyB,EAAApC,UAAU1C,IAAI,WACxB8E,EAAUvB,QAAU,KAClBf,EAAON,KAAK3gB,OAAOihB,EAAON,KAAKlU,QAAQ5M,GAAI,GAC3CohB,EAAOL,aACoB,IAAvBK,EAAON,KAAK5gB,QACdhE,KAAK2lB,uBAAuBT,GAC5BllB,KAAKslB,cAAcyB,IACT/mB,KAAAylB,WAAWzlB,KAAK0lB,YAAW,EAEnC+B,MAAAA,EAAMjnB,SAASsT,cAAc,OAC/B2T,EAAAtC,aAAa,UAAW,IACxBsC,EAAArC,UAAU1C,IAAI,WACd+E,EAAAX,OAAUhjB,GAAAA,EAAEhB,SAASgB,EAAEf,UAAWykB,GACtCT,EAASpF,YAAY8F,EACvB,IACA,EAECznB,KAAAglB,mBAAmBrhB,KAAKuhB,GACtBA,CACT,CACQwC,mBAAAA,CAAoB7R,GACf,IAAA,MAAA/R,KAAK9D,KAAKglB,mBACflhB,GAAAA,EAAEghB,cAAcjP,GAAa/R,OAAAA,EAE5B,OAAA9D,KAAKkmB,QAAQrQ,EACtB,CACO4P,UAAAA,CAAW5P,EAAM,GAAIpT,EAAO,IACjC,MAAM4D,EAAMrG,KAAKqlB,SAASkC,iBAAiB,sBAAsBvjB,OAAShE,KAAKglB,mBAAmBza,QAAO,CAACxC,EAAGyC,IAAMzC,EAAIyC,EAAEoa,KAAK5gB,OAAS,GAAG,GAC7H,UAATvB,GACFzC,KAAK2nB,SAASC,UAAY,QAC1B5nB,KAAK2nB,SAAS5B,UAAYlQ,IAErB7V,KAAA2nB,SAASC,UAAYvhB,EAAM,UAAY,SAC5CrG,KAAK2nB,SAAS5B,UAAYlQ,GAAOxP,EAAM,MAAMA,aAAiB,IAC9DrG,KAAK0lB,YAAc7P,EAEvB,CACOgS,WAAAA,CAAYhS,EAA8B,GAAIiS,GAAS,GACzC,iBAARjS,EAAkB7V,KAAKklB,OAAO4C,EAASjS,EAAM0L,MAAMwG,WAAWlS,GAAM,QACrE7V,KAAA0nB,oBAAoB7R,GAAKgP,aAC9B7kB,KAAAylB,WAAWzlB,KAAK0lB,YACvB,CACOsC,SAAAA,CAAUnS,EAAM,GAAIoS,EAAO,GAAItgB,GAAQ,GAC5C,GAAIsgB,EAAM,CACFC,MAAAA,EAAM,uGACNC,EAAQF,EAAKpjB,QAAQqjB,GAAK,CAACE,EAAQ,MACvC,MAAMC,EAAMD,EAAME,WAAW,aAAeF,IAAUA,EAChDG,EAAQH,EAAMvjB,QAAQ,GAAG2jB,SAASC,UAAW,IAC/CL,OAAAA,EAAMM,SAASF,SAASC,QAA+EF,+DAAAA,QACpG,YAAYF,qEAAuEE,OAAK,IAE5FvoB,KAAAklB,OAAOiD,EAAO,QAASxgB,EAC9B,CACK3H,KAAAylB,WAAW5P,EAAK,QACvB,ECzJF1S,KAAKwlB,GAAK,CAAC,iBAAkBjiB,MAAM,4BACnC,MAAMkiB,GAAOC,GAA+BroB,SAASsoB,eAAeD,UAAmB,MAAM,IAAIzoB,MAA8ByoB,wBAAAA,SACzHE,GAAKF,GAAkBroB,SAASY,KAAK4nB,cAAcH,GAEnDI,GAAUL,GAAI,YACdM,GAAUN,GAAI,YACdO,GAAUP,GAAI,YACdQ,GAAWR,GAAI,aACfS,GAAUT,GAAI,YACdU,GAAUV,GAAI,YACdW,GAAYX,GAAI,cAChBY,GAAWZ,GAAI,aACfa,GAAYb,GAAI,cAChBc,GAAYd,GAAI,WAChBe,GAAaf,GAAI,YACjBgB,GAAahB,GAAI,YACjBiB,GAAYjB,GAAI,WAChBkB,GAAYlB,GAAI,WAChBmB,GAAYnB,GAAI,WAChBoB,GAAYpB,GAAI,WAChBqB,GAAgBrB,GAAI,YACpBsB,GAAUtB,GAAI,SACduB,GAAkBvB,GAAI,qBACtBwB,GAAoBxB,GAAI,uBACxByB,GAAsBzB,GAAI,yBAC1B0B,GAAiB1B,GAAI,aACrB2B,GAAc3B,GAAI,gBAClB4B,GAAY5B,GAAI,aAChB6B,GAAgB7B,GAAI,YACpB8B,GAAiB9B,GAAI,kBACrB+B,GAAgB/B,GAAI,YACpBgC,GAAiBhC,GAAI,aACrBiC,GAAWjC,GAAI,aACfkC,GAAUlC,GAAI,YACdmC,GAAWnC,GAAI,aACfoC,GAAYpC,GAAI,cAChBqC,GAAcrC,GAAI,gBAClBsC,GAAatC,GAAI,eACjBuC,GAAcvC,GAAI,gBAClBwC,GAAYxC,GAAI,cAChByC,GAAczC,GAAI,gBAClB0C,GAAe1C,GAAI,iBACnB2C,GAAmB3C,GAAI,qBACvB4C,GAAmB5C,GAAI,qBACvB6C,GAAc7C,GAAI,gBAClB8C,GAAe9C,GAAI,iBACnB+C,GAAsB/C,GAAI,mBAC1BgD,GAAchD,GAAI,mBAClBiD,GAAkBjD,GAAI,iBACtBkD,GAAiBlD,GAAI,gBACrBmD,GAAcnD,GAAI,UAClBoD,GAAYpD,GAAI,QAChBqD,GAEU5Y,GAAcvI,KAAKohB,IAAI7Y,EAAIvI,KAAK6Y,GAAK,GAF/CsI,GAGW5Y,GAAc,GAAKA,EAAI,IAAM,EAExC8Y,GAAWC,CAACvmB,EAAO,OAASiF,KAAKC,MAAMlF,EAAO,YAAYiF,KAAKC,MAAMlF,EAAO,MAAMP,OAAQ,KAyC1F+mB,GAAO,CACbA,OAAmBtkB,GAAAA,EACnBskB,UAAiB,GACjBA,GAAKC,WAAaC,IAClBF,GAAKtmB,QAAUwmB,IACfF,GAAKG,UAAYD,IACjBF,GAAKljB,QAAUojB,IACfF,GAAK1T,OAAS,KACd0T,GAAKI,cAAgB,CAAA,EACrBjsB,SAASksB,cAAqB7pB,GAAAA,EAAE8pB,iBAChC,IAAA,MAAW7oB,KAAKmlB,GAAQ2D,SACpB9oB,EAAArD,iBAAiB,SAAS,WAC1B,IAAA,MAAW2G,KAAK6hB,GAAQ2D,SAAUxlB,EAAEge,UAAUtlB,OAAO,SAAUsH,IAAMpH,MAGrEkpB,GAAQ9D,UAAUtlB,OAAO,OAAoB,YAAZE,KAAKsZ,IACtC6P,GAAQ/D,UAAUtlB,OAAO,OAAoB,YAAZE,KAAKsZ,GAAgB,IAG1D,IAAA,MAAWxV,KAAKslB,GAASwD,SACrB9oB,EAAArD,iBAAiB,SAAS,WAC1B,IAAA,MAAW2G,KAAKgiB,GAASwD,SAAUxlB,EAAEge,UAAUtlB,OAAO,SAAUsH,IAAMpH,MACtEqpB,GAAQjE,UAAUtlB,OAAO,OAAoB,YAAZE,KAAKsZ,IACtCgQ,GAAQlE,UAAUtlB,OAAO,OAAoB,YAAZE,KAAKsZ,GAAgB,IAG1DiQ,GAAU9oB,iBAAiB,SAAS,KACxB8oB,GAAAnE,UAAU1C,IAAI,QACf8G,GAAApE,UAAU1C,IAAI,QACb+G,GAAArE,UAAU1C,IAAI,OAAM,IAEhCgH,GAAUjpB,iBAAiB,SAAS,KACxB8oB,GAAAnE,UAAUI,OAAO,QAClBgE,GAAApE,UAAUI,OAAO,QAC1BuE,GAAUhV,OAAM,IAElB4U,GAAWlpB,iBAAiB,SAAS,KAC9B4rB,GAAAQ,UAAU,YAAa,8FAAgG,IAE9HjD,GAAWnpB,iBAAiB,SAAS,KACzB8oB,GAAAnE,UAAUI,OAAO,QACjBiE,GAAArE,UAAUI,OAAO,QAC3BqE,GAAU9U,OAAM,IAElBiV,GAAUvpB,iBAAiB,SAAS,KACxB8oB,GAAAnE,UAAUI,OAAO,QACjBiE,GAAArE,UAAUI,OAAO,QAC3BsE,GAAU/U,OAAM,IAElB,MAAM+X,GAAa,IAAI,cAAc/H,GAAdthB,WAAAA,GAAAkB,SAAAooB,WACdtnB,EAAAzF,KAAWmpB,WAAAA,IACX1jB,EAAAzF,KAAWgqB,WAAAA,GAAA,GAEdgD,GAAWF,GAAWrH,WAAWnD,KAAKwK,IACtCjF,GAAciF,GAAWjF,YAAYvF,KAAKwK,IAC1C9E,GAAY8E,GAAW9E,UAAU1F,KAAKwK,IACtCG,GAAO,IAAIvS,EACXwS,GAAQ,IC9KP,MAIEzpB,WAAAA,CAAYypB,GAHXznB,EAAAzF,KAAA,eACAyF,EAAAzF,KAAA,UACSyF,EAAAzF,KAAA,SAEVA,KAAAwN,YAAc,EACnBxN,KAAKmtB,QAAS,EACdntB,KAAKktB,MAAQA,EACbltB,KAAKotB,QACP,CACOA,MAAAA,CAAOC,EAAQ,GACpBrtB,KAAKwN,YAAc6f,GAASrtB,KAAKwN,aAAe,GAAK,EAC/C,MAAA8f,EAAmBnqB,KAAKmqB,kBAAoB,EAC5CC,EAAWziB,KAAKyV,IAAI,IAAmD,GAA9C/f,SAASY,KAAKosB,wBAAwBzW,OAC/DA,EAAQjM,KAAKoR,MAAMqR,EAAWD,GAE9BG,EAAa1W,EAAQuW,EACrBI,EAFS5iB,KAAKa,KAAKoL,EAAQ/W,KAAKwN,aAET8f,EACzBttB,KAAKmtB,OAAantB,KAAAktB,MAAMlH,MAAMS,QAAU,gDACvCzmB,KAAKktB,MAAMlH,MAAMS,QAAoBgH,UAAAA,EAAWhS,QAAQ,eAAeiS,EAAYjS,QAAQ,MAClG,CACOkS,OAAAA,GACL,OAAO3tB,KAAKmtB,MACd,CACOS,OAAAA,CAAQT,GACb,OAAOntB,KAAKmtB,OAASA,CACvB,GDoJsBjD,IAClB2D,GAAM,IEhGL,MAmDEpqB,WAAAA,CAAYypB,GACjB,GAlDKznB,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,UACAyF,EAAAzF,KAAA,OACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,SAEAyF,EAAAzF,KAAA,QAEAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,UACAyF,EAAAzF,KAAA,UACCyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,UACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QAEDyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,aACAyF,EAAAzF,KAAA,aACAyF,EAAAzF,KAAA,kBACAyF,EAAAzF,KAAA,cACAyF,EAAAzF,KAAA,aACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,eACAyF,EAAAzF,KAAA,eACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,gBAESyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,UACAyF,EAAAzF,KAAA,SACTyF,EAAAzF,KAAA,iBACAyF,EAAAzF,KAAA,iBACAyF,EAAAzF,KAAA,gBACAyF,EAAAzF,KAAA,iBACAyF,EAAAzF,KAAA,kBACAyF,EAAAzF,KAAA,iBACSyF,EAAAzF,KAAA,YAETyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,WACCyF,EAAAzF,KAAA,eACAyF,EAAAzF,KAAA,iBAEAktB,aAAiBY,gBAAuB,MAAA,IAAI1tB,MAAM,mBACxD,MAAM2tB,EAAO1a,KAAc,MAAA,IAAIjT,MAAM,8BAA6B,EAC7DJ,KAAAktB,MAAQA,EACRltB,KAAAqe,OAAS7d,SAASsT,cAAc,UAChC9T,KAAAse,IAAMte,KAAKqe,OAAOE,WAAW,KAAM,CAAEyP,OAAO,KAAYD,IACxD/tB,KAAAiuB,SAAWztB,SAASsT,cAAc,UACvC9T,KAAKkuB,MAAQluB,KAAKiuB,SAAS1P,WAAW,OAASwP,IAC1C/tB,KAAAktB,MAAMvL,YAAY3hB,KAAKqe,QACvBre,KAAAqe,OAAO2H,MAAMS,QAAU,2DAC5B0H,QAAQC,IAAI,kBAEZpuB,KAAK+I,MAAQ,EACb/I,KAAKquB,UAAY,KACjBruB,KAAK0N,UAAY,EACjB1N,KAAKsuB,eAAiB,IACtBtuB,KAAKuuB,WAAa,GAOlBvuB,KAAKwuB,WAAY,EASjBxuB,KAAKyuB,SAAW,EAChBzuB,KAAK0uB,YAAc,EACnB1uB,KAAK2uB,YAAc,EAGnB3uB,KAAK4uB,YAAc,EACnB5uB,KAAK6uB,UAAW,EAChB7uB,KAAK8uB,UAAW,EAEhB9uB,KAAKmK,MAAQ,KACbnK,KAAK+uB,QAAU,KACf/uB,KAAKgvB,QAAU,KACfhvB,KAAKyG,MAAQ,GACbzG,KAAKivB,MAAQ,GACbjvB,KAAKkvB,KAAO,GACZlvB,KAAKmvB,MAAQ,GACbnvB,KAAKovB,OAAS,GACdpvB,KAAKqvB,MAAQ,GACbrvB,KAAKsvB,cAAgB,GACrBtvB,KAAKuvB,cAAgB,GACrBvvB,KAAKwvB,aAAe,GACpBxvB,KAAKyvB,cAAgB,GACrBzvB,KAAK0vB,eAAiB,GACtB1vB,KAAK2vB,cAAgB,GACrB3vB,KAAK4vB,SAAW,GAEhB5vB,KAAK6vB,aAAe,EACpB7vB,KAAK+W,MAAQ,EACb/W,KAAKiX,OAAS,EACdjX,KAAK8vB,KAAO,EACZ9vB,KAAK+vB,KAAO,EACZ/vB,KAAKgwB,OAAS,EACdhwB,KAAKiwB,OAAS,EACdjwB,KAAKkwB,KAAY9c,GAAAA,EACjBpT,KAAKmwB,KAAYC,GAAAA,EACjBpwB,KAAKqwB,KAAYlR,GAAAA,EACjBnf,KAAKswB,aAAc,EAEnBtwB,KAAKuwB,iBAAiB,GACtBvwB,KAAKwwB,cACP,CAEOC,YAAAA,CAAapqB,EAAM,GACnBrG,KAAA0N,UAAYrH,EACjBrG,KAAKsuB,eAAiBtuB,KAAKiuB,SAASlX,MAAQ/W,KAAK0N,UAAY,IAC/D,CACOgjB,eAAAA,CAAgBrqB,EAAM,GAC3BrG,KAAKuwB,iBAAiBlqB,GACtBrG,KAAK2wB,eACP,CACOH,YAAAA,GACC,MAAEzZ,MAAAA,EAAOE,OAAAA,GAAWjX,KAAKktB,MAAMM,wBACjCxtB,KAAK+W,QAAUA,GAAS/W,KAAKiX,SAAWA,IAC5CjX,KAAK+W,MAAQA,EACb/W,KAAKiX,OAASA,EACdjX,KAAKqe,OAAO2H,MAAMS,SAAqB1P,UAAAA,EAAM0E,QAAQ,eAAexE,EAAOwE,QAAQ,OACnFzb,KAAK2wB,gBACP,CACOC,UAAAA,CAAWvlB,EAAOrL,KAAK4uB,aAC5B,MAAMxf,EAAI,EAAI/D,EACdrL,KAAK4uB,YAAcxf,EACdpP,KAAA6wB,cAAc,EAAIzhB,GAAS,EAAA,EAAG,EAAIA,GAAS,EAAA,EAAG,EAAG,EACxD,CACOyhB,aAAAA,CAAcb,EAAS,EAAGC,EAAS,EAAG1W,EAAU,EAAGC,EAAU,GAC5D,MAAEyU,SAAAA,GAAajuB,KACf8wB,EAAK7C,EAASlX,MAAQiZ,EACtBe,EAA6B,IAAvB9C,EAASlX,MAAQ+Z,GACvBE,GAAM/C,EAAShX,OAASgZ,EACxBgB,EAA8B,IAAxBhD,EAAShX,OAAS+Z,GACxBE,GAAMpmB,KAAKqmB,KAAKnB,EAASC,GAAUnlB,KAAK6Y,GAAK,IAC7CyN,EAAKnB,EAAS,EAAI,EAAInlB,KAAK6Y,GAC3B0N,EAAKvmB,KAAKqmB,KAAKlB,GAAUa,EAAK,OAC9BQ,EAAKxmB,KAAKqmB,KAAKlB,IAAWe,EAAK,GACrChxB,KAAKkwB,KAAO9c,GAAK2d,EAAKD,GAAM1d,EAAImG,GAChCvZ,KAAKmwB,KAAOC,GAAKa,EAAKD,GAAMZ,EAAI5W,GAC3BxZ,KAAAqwB,KAAYlR,GAAAiS,EAAKF,EAAK/R,EAC3Bnf,KAAKgwB,OAASqB,EACdrxB,KAAKiwB,OAASqB,EACdtxB,KAAKswB,aAAc,CACrB,CAEOiB,cAAAA,CAAepnB,GACfnK,KAAAyG,MAAMzC,OAAS,EACpBhE,KAAKivB,MAAMjrB,OAAS,EACpBhE,KAAKkvB,KAAKlrB,OAAS,EACnBhE,KAAKmvB,MAAMnrB,OAAS,EACpBhE,KAAKovB,OAAOprB,OAAS,EACrBhE,KAAKqvB,MAAMrrB,OAAS,EACpBhE,KAAK4vB,SAAS5rB,OAAS,EACjBwtB,MAAAA,EAAWrnB,EAAMM,YACZ3G,IAAAA,MAAAA,KAAK0tB,EAASlnB,cAAe,CAClC,IAAA8lB,EAAItlB,KAAKkN,OAAOlU,EAAE6F,YAAY,GAAGlB,UAAY3E,EAAE4F,IAAM,OACrD+nB,EAAKrB,EACEhpB,IAAAA,MAAAA,KAAKtD,EAAE6F,YAAa,CAC7BvC,EAAE4B,cAAgBonB,EAClBhpB,EAAEsqB,eAAiBD,EACnB,MAAMzR,GAAM5Y,EAAEsB,QAAUtB,EAAEqB,WAAa3E,EAAE4F,IAAM,MAC/C0mB,GAAKpQ,EAAK5Y,EAAE3C,MACZgtB,GAAM3mB,KAAKkN,OAAOlN,KAAKkN,OAAOgI,GAAM5Y,EAAE3C,OAClC2rB,EAAAtlB,KAAKkN,OAAOoY,GACXqB,EAAA3mB,KAAKkN,OAAOyZ,EACnB,CACF,CACA,MAAME,EAAK,CACTC,SAAU,IACVC,OAAQ,EACRC,SAAU,IACVC,OAAQ,GAEJC,EAAaxmB,IACbA,EAAUmmB,EAAGC,WAAUD,EAAGC,SAAWpmB,GACrCA,EAAUmmB,EAAGE,SAAQF,EAAGE,OAASrmB,EAAAA,EAEjCymB,EAAazmB,IACjBwmB,EAAUxmB,GACNA,EAAUmmB,EAAGG,WAAUH,EAAGG,SAAWtmB,GACrCA,EAAUmmB,EAAGI,SAAQJ,EAAGI,OAASvmB,EAAAA,EAGjC0mB,EAAa/mB,CAACgnB,EAAwBzoB,KAC1C,IAAA,MAAW5F,KAAKquB,EACZruB,EAAAsuB,aAAetuB,EAAE2E,UAAYiB,EAAM,MACnC5F,EAAAuuB,WAAavuB,EAAE4E,QAAUgB,EAAM,MAC7B5F,EAAE2E,WAAqBupB,QAAAA,EAAUluB,EAAEsuB,cACnCtuB,EAAE4E,QAAU,KAAO5E,EAAE4E,UAAYypB,EAAOA,EAAOnuB,OAAS,GAAG0E,SAASspB,EAAUluB,EAAEuuB,WAAU,EAiB5FC,EAAUtZ,CAACpQ,EAAmB2pB,EAAgB3rB,EAAwB4rB,EAAgBC,KAC1F7pB,EAAK2Q,QAAU,EACf3Q,EAAK4Q,QAAU,EACf5Q,EAAKolB,MAAQ,EACRplB,EAAA4C,QAAU5C,EAAK/C,KAAO0sB,EACtB3pB,EAAA8pB,YAAc9pB,EAAKE,SAAWypB,EAC9B3pB,EAAA+pB,cAnBmBvf,KAClBhE,MAAAA,EAAItE,KAAKkN,OAAO5E,GAClB,IAAC7F,SAAS6B,GAAU,MAAA,IAAIoP,UAAU,oCAChCoU,MAAAA,EAAQ,SACRC,EAAQzjB,GAAKwjB,EAAQ,GAAK9nB,KAAKC,MAAM,EAAID,KAAKgoB,KAAK1jB,EAAIwjB,IAAU,EACjE7qB,EAAIqH,EAAIyjB,EAAQ,KAChB1T,EAAIrU,KAAKkN,OAAOjQ,GACtB,GAAIoX,GAAKpX,EAAG,OAAOoX,EAAI0T,EACvB,MAAME,EAAK,IAAIC,aAAa,CAACjrB,IACzB,OAAA,IAAAkrB,YAAYF,EAAG1d,QAAQ,IAAM0d,EAAG,IAAM,EAAI,GACvCA,EAAAA,EAAG,GAAKF,CAAAA,EASMK,CAAiBtqB,EAAKI,eACvCJ,EAAK/C,KAAO,MACdosB,EAAUrpB,EAAK4C,SACLymB,EAAArpB,EAAK4C,QAAU5C,EAAK8pB,cAEhC9pB,EAAKhC,KAAOA,EACZgC,EAAKsF,OAAStH,EAAKsH,OACnBtF,EAAK4pB,OAASA,EACd5pB,EAAK6pB,QAAUA,EACf7pB,EAAK9F,KAAU8D,GAAAA,EAAKsH,SAASukB,EAAU,IAAM,MAAMD,IAAS,QAAQ5pB,EAAKnG,QACpEzC,KAAAivB,MAAMtrB,KAAKiF,GACE,IAAdA,EAAKnG,KAAiBzC,KAAAkvB,KAAKvrB,KAAKiF,GACb,IAAdA,EAAKnG,KAAiBzC,KAAAmvB,MAAMxrB,KAAKiF,GACnB,IAAdA,EAAKnG,KAAiBzC,KAAAqvB,MAAM1rB,KAAKiF,GACnB,IAAdA,EAAKnG,MAAiBzC,KAAAovB,OAAOzrB,KAAKiF,IACzB,IAAdA,EAAKnG,MAA4B,IAAdmG,EAAKnG,OAAiBzC,KAAA4vB,SAASjsB,KAAKiF,EAAI,EAE3DuqB,EAAW5gB,CAACxK,EAAgByC,IAAmBzC,EAAEyD,QAAUhB,EAAEgB,SAAWzD,EAAEmG,OAAS1D,EAAE0D,QAAUnG,EAAEyqB,OAAShoB,EAAEgoB,OAElHhB,EAASlnB,cAAc8oB,SAAQ,CAACtvB,EAAGoK,IAAWpK,EAAEoK,OAASA,IAC9C,IAAA,MAAApK,KAAK0tB,EAASlnB,cACvBxG,EAAE4F,KAAO1J,KAAK+I,MACdjF,EAAEyV,QAAU,EACZzV,EAAE0V,QAAU,EACZ1V,EAAEkqB,MAAQ,EACVlqB,EAAEuvB,SAAW,EACbvvB,EAAEwvB,UAAY,EACdxvB,EAAEyvB,WAAa,EAKfzvB,EAAE0vB,qBAAuB,EACzB1vB,EAAE2vB,gBAAkB,EACpB3vB,EAAE4vB,kBAAoB,EACtB5vB,EAAE6vB,iBAAmB,EACVzB,EAAApuB,EAAE6F,YAAa7F,EAAE4F,KACjBwoB,EAAApuB,EAAEgG,yBAA0BhG,EAAE4F,KAC9BwoB,EAAApuB,EAAEiG,oBAAqBjG,EAAE4F,KACzBwoB,EAAApuB,EAAEkG,sBAAuBlG,EAAE4F,KACjC1J,KAAAyG,MAAM9C,KAAKG,GAChBA,EAAE8F,WAAWwpB,SAAQ,CAAChsB,EAAGorB,IAAWF,EAAQlrB,EAAG,MAAQtD,EAAE4F,IAAK5F,EAAG0uB,GAAQ,KACzE1uB,EAAE+F,WAAWupB,SAAQ,CAAChsB,EAAGorB,IAAWF,EAAQlrB,EAAG,MAAQtD,EAAE4F,IAAK5F,EAAG0uB,GAAQ,KAEtExyB,KAAAivB,MAAMpW,KAAKsa,GACXnzB,KAAAkvB,KAAKrW,KAAKsa,GACVnzB,KAAAmvB,MAAMtW,KAAKsa,GACXnzB,KAAAqvB,MAAMxW,KAAKsa,GACXnzB,KAAAovB,OAAOvW,KAAKsa,GACZnzB,KAAAuvB,cAAgBvvB,KAAKivB,MAAM5pB,aAC3BrF,KAAAwvB,aAAexvB,KAAKkvB,KAAK7pB,aACzBrF,KAAAyvB,cAAgBzvB,KAAKmvB,MAAM9pB,aAC3BrF,KAAA2vB,cAAgB3vB,KAAKqvB,MAAMhqB,aAC3BrF,KAAA0vB,eAAiB1vB,KAAKovB,OAAO/pB,aAC7BrF,KAAAsvB,cAAgBtvB,KAAKyG,MAAMpB,aAC3BrF,KAAA4vB,SAAS/W,KAAKsa,GAEnB,MAAMS,EAAsC,CAAA,EAC5C,IAAA,MAAW9vB,KAAK9D,KAAKivB,MAAO2E,EAAY9vB,EAAE0H,QAAQiQ,QAAQ,IAAMmY,EAAY9vB,EAAE0H,QAAQiQ,QAAQ,IAAM,EAAI,EACxG,IAAA,MAAW3X,KAAK9D,KAAKivB,MAAOnrB,EAAE+vB,QAAgD,IAAtCD,EAAY9vB,EAAE0H,QAAQiQ,QAAQ,IAEtE,IAAA,IAAS3X,EAAI,EAAGA,EAAI9D,KAAKovB,OAAOprB,OAAQF,IAAK,CACrC8E,MAAAA,EAAO5I,KAAKovB,OAAOtrB,GACzB8E,EAAKkrB,UAAY,GACjB,IAAA,IAAS1sB,EAAItD,EAAI,EAAGsD,EAAIpH,KAAKovB,OAAOprB,OAAQoD,IAAK,CACzC2sB,MAAAA,EAAQ/zB,KAAKovB,OAAOhoB,GAC1B,GAAI0D,KAAKkN,OAAO+b,EAAMvoB,QAAU5C,EAAK4C,SAAW,IAAM,MACjD5C,EAAAkrB,UAAUnwB,KAAKowB,EACtB,CACF,CACA,IAAA,IAASjwB,EAAI,EAAGA,EAAI9D,KAAK4vB,SAAS5rB,OAAQF,IAAK,CACvC8E,MAAAA,EAAO5I,KAAK4vB,SAAS9rB,GAC3B8E,EAAKkrB,UAAY,GACjB,IAAA,IAAS1sB,EAAItD,EAAI,EAAGsD,EAAIpH,KAAK4vB,SAAS5rB,OAAQoD,IAAK,CAC3C2sB,MAAAA,EAAQ/zB,KAAK4vB,SAASxoB,GAC5B,GAAI0D,KAAKkN,OAAO+b,EAAMvoB,QAAU5C,EAAK4C,SAAW,IAAM,MACjD5C,EAAAkrB,UAAUnwB,KAAKowB,EACtB,CACF,CACK/zB,KAAAmK,MAAQqnB,EACRxxB,KAAAmK,MAAM6pB,WAAarC,EAAGE,OAC3B1D,QAAQ8F,MAAMtC,EAChB,CAEOuC,kBAAAA,CAAmBruB,GACxB,IAAK7F,KAAKswB,YAAmB,MAAA,IAAIlwB,MAAM,mBAC5B,IAAA,MAAAwG,KAAQ5G,KAAKyG,MAKtB,GAJAG,EAAK+sB,iBAAmB,EACxB/sB,EAAK4sB,qBAAuB,EAC5B5sB,EAAK6sB,gBAAkB,EACvB7sB,EAAK8sB,kBAAoB,EACb,MAAR7tB,EACG,CAAAe,KAAAA,EAAK+sB,iBAAmB/sB,EAAK+C,YAAY3F,QAAU4C,EAAK+C,YAAY/C,EAAK+sB,kBAAkBtB,WAAaxsB,GAAWe,EAAA+sB,mBACnH/sB,KAAAA,EAAK4sB,qBAAuB5sB,EAAKkD,yBAAyB9F,QAAU4C,EAAKkD,yBAAyBlD,EAAK4sB,sBAAsBnB,WAAaxsB,GAAWe,EAAA4sB,uBACrJ5sB,KAAAA,EAAK6sB,gBAAkB7sB,EAAKmD,oBAAoB/F,QAAU4C,EAAKmD,oBAAoBnD,EAAK6sB,iBAAiBpB,WAAaxsB,GAAWe,EAAA6sB,kBACjI7sB,KAAAA,EAAK8sB,kBAAoB9sB,EAAKoD,sBAAsBhG,QAAU4C,EAAKoD,sBAAsBpD,EAAK8sB,mBAAmBrB,WAAaxsB,GAAWe,EAAA8sB,mBAAA,CAEpJ,CACOS,YAAAA,CAAatuB,GAClB,IAAK7F,KAAKswB,YAAmB,MAAA,IAAIlwB,MAAM,mBAC5BwG,IAAAA,MAAAA,KAAQ5G,KAAKyG,MAAO,CACpB3C,IAAAA,IAAAA,EAAI8C,EAAK4sB,qBAAsBY,EAAMxtB,EAAKkD,yBAAyB9F,OAAQF,EAAIswB,EAAKtwB,IAAK,CAC1F+G,MAAAA,EAAMjE,EAAKkD,yBAAyBhG,GAC1C,GAAI+B,EAAOgF,EAAIwnB,WAAY,SAC3B,MAAMgC,GAAMxuB,EAAOgF,EAAIunB,eAAiBvnB,EAAIwnB,WAAaxnB,EAAIunB,cAC7DxrB,EAAKonB,MAAQnjB,EAAI3B,OAAS2B,EAAI1B,IAAM0B,EAAI3B,OAASmrB,EAC7CztB,EAAKonB,MAAQ,IAAGpnB,EAAKonB,MAAQ,GACjCpnB,EAAK4sB,qBAAuB1vB,EAC5B,KACF,CACSA,IAAAA,IAAAA,EAAI8C,EAAK6sB,gBAAiBW,EAAMxtB,EAAKmD,oBAAoB/F,OAAQF,EAAIswB,EAAKtwB,IAAK,CAChF+G,MAAAA,EAAMjE,EAAKmD,oBAAoBjG,GACrC,GAAI+B,EAAOgF,EAAIwnB,WAAY,SAC3B,MAAMgC,GAAMxuB,EAAOgF,EAAIunB,eAAiBvnB,EAAIwnB,WAAaxnB,EAAIunB,cACxDxrB,EAAA2S,QAAUvZ,KAAKkwB,KAAKrlB,EAAI3B,OAAS2B,EAAI1B,IAAM0B,EAAI3B,OAASmrB,GACxDztB,EAAA4S,QAAUxZ,KAAKmwB,KAAKtlB,EAAIzB,QAAUyB,EAAIxB,KAAOwB,EAAIzB,QAAUirB,GAChEztB,EAAK6sB,gBAAkB3vB,EACvB,KACF,CACSA,IAAAA,IAAAA,EAAI8C,EAAK8sB,kBAAmBU,EAAMxtB,EAAKoD,sBAAsBhG,OAAQF,EAAIswB,EAAKtwB,IAAK,CACpF+G,MAAAA,EAAMjE,EAAKoD,sBAAsBlG,GACvC,GAAI+B,EAAOgF,EAAIwnB,WAAY,SAC3B,MAAMgC,GAAMxuB,EAAOgF,EAAIunB,eAAiBvnB,EAAIwnB,WAAaxnB,EAAIunB,cACxDxrB,EAAAysB,SAAWrzB,KAAKqwB,KAAKxlB,EAAI3B,OAAS2B,EAAI1B,IAAM0B,EAAI3B,OAASmrB,GAC9DztB,EAAK0tB,KAAOxpB,KAAKypB,IAAI3tB,EAAKysB,UAC1BzsB,EAAK4tB,KAAO1pB,KAAKohB,IAAItlB,EAAKysB,UAC1BzsB,EAAK8sB,kBAAoB5vB,EACzB,KACF,CACSA,IAAAA,IAAAA,EAAI8C,EAAK+sB,iBAAkBS,EAAMxtB,EAAK+C,YAAY3F,OAAQF,EAAIswB,EAAKtwB,IAAK,CACzE+G,MAAAA,EAAMjE,EAAK+C,YAAY7F,GACzB,KAAA+B,EAAOgF,EAAIwnB,YACf,CAAAzrB,EAAK0sB,WAAaztB,EAAOgF,EAAIunB,cAAgBpyB,KAAK+I,MAAQ8B,EAAIpG,OAASzE,KAAK6uB,SAAWhkB,EAAI6mB,eAAiB7mB,EAAI7B,eAC3GpC,EAAA2sB,YAAc1tB,EAAOgF,EAAIunB,cAAgBpyB,KAAK+I,MAAQ8B,EAAIpG,MAAQoG,EAAI6mB,eAC3E9qB,EAAK+sB,iBAAmB7vB,EACxB,KAAA,CACF,CACM2wB,MAAAA,EAAY3wB,GACD,IAAXA,EAAErB,MAAoBqB,EAAEkF,cAAgBpC,EAAK0sB,WAAaxvB,EAAEiF,MAC5DjF,EAAE0H,QAAU3F,GAAc/B,EAAE0H,QAAU3F,GAAQ7F,KAAK+I,MAAQjF,EAAEiF,MAC1DjF,EAAEkF,cAAgBpC,EAAK0sB,UAE1BoB,EAAW5wB,GACE,MAAbA,EAAE6wB,QAAwBF,EAAS3wB,IACnCgC,YAAYC,MAAQjC,EAAE6wB,QAAU,YAAY7wB,EAAE6wB,QACpC,MAAV7wB,EAAE8wB,OAAgB9wB,EAAA8wB,KAAOH,EAAS3wB,IAC/BA,EAAE8wB,MAELC,EAAW/wB,CAACA,EAAgBmc,EAAYD,KAC5Clc,GAAAA,EAAEgxB,SAAWluB,EAAK2S,QAAU0G,EAAKnc,EAAEwwB,KACnCxwB,EAAEyV,QAAUzV,EAAEgxB,SAAW9U,EAAKlc,EAAE0wB,KAChC1wB,EAAEixB,SAAWnuB,EAAK4S,QAAUyG,EAAKnc,EAAE0wB,KACnC1wB,EAAE0V,QAAU1V,EAAEixB,SAAW/U,EAAKlc,EAAEwwB,KAC9BxwB,EAAAkxB,SAAWlxB,EAAEyV,QAAUvZ,KAAK8vB,OAAS,GAAKhsB,EAAE0V,QAAUxZ,KAAK+vB,OAAS,GAAiB,QAAZ/vB,KAAK8vB,KAAiB9vB,KAAK+vB,KAAO/vB,KAAKiwB,OAASnsB,EAAE4uB,YAAc1yB,KAAK+I,MAAQjF,EAAEiF,QAAU,EACpKjF,EAAEmxB,WAAY,EACG,MAAbnxB,EAAE6wB,QAEK7wB,GAAAA,EAAE0H,QAAU3F,EAAM,CAC3B/B,EAAEmxB,WAAY,EACRC,MAAAA,EAAWpxB,EAAE6uB,cAAgB/rB,EAAK2sB,WACxCzvB,EAAEkqB,MAAQkH,GAAYl1B,KAAK8uB,UAA0B,GAAd2F,EAAS3wB,GAAW,GAAmB,IAAXA,EAAErB,MAA0B,IAAZqB,EAAEiF,MAAtB,EAAwC,CAAA,MAGvGjF,EAAEqxB,WAA6B,MAAhBrxB,EAAEqxB,WAAqB,EAAIrxB,EAAEqxB,WAAa,EAC1C,IAAXrxB,EAAErB,MACJqB,EAAEmxB,WAAY,EACZnxB,EAAAkqB,MAAoB,IAAZlqB,EAAEiF,MAAc,EAAIjF,EAAEma,OAAS,GAAM,EAAI,IAAO,GACnDna,EAAAkqB,MAAQljB,KAAKoc,IAAI,GAAKrhB,EAAO/B,EAAE0H,SAAW,IAAM,EAAC,EAGnD,IAAA,MAAA1H,KAAK8C,EAAKgD,WACnB9F,EAAEwwB,KAAO1tB,EAAK0tB,KACdxwB,EAAE0wB,KAAO5tB,EAAK4tB,KACLK,EAAA/wB,EAAG9D,KAAKgwB,OAASlsB,EAAE+E,UAAW7I,KAAKiwB,OAASyE,EAAQ5wB,IAEpD,IAAA,MAAAA,KAAK8C,EAAKiD,WACjB/F,EAAAwwB,MAAQ1tB,EAAK0tB,KACbxwB,EAAA0wB,MAAQ5tB,EAAK4tB,KACNK,EAAA/wB,GAAI9D,KAAKgwB,OAASlsB,EAAE+E,UAAW7I,KAAKiwB,OAASyE,EAAQ5wB,GAElE,CACF,CACQysB,gBAAAA,CAAiBlqB,EAAM,GAC7BrG,KAAK6vB,aAAexpB,CACtB,CACQsqB,aAAAA,GACA,MAAEtS,OAAAA,EAAQ4P,SAAAA,EAAUlX,MAAAA,EAAOE,OAAAA,GAAWjX,KACtC6vB,EAAe7vB,KAAK6vB,aAAe1sB,KAAKmqB,iBACxC8H,EAAcre,EAAQ8Y,EACtBwF,EAAepe,EAAS4Y,EAC9BxR,EAAOtH,MAAQqe,EACf/W,EAAOpH,OAASoe,EAChBpH,EAASlX,MAAQjM,KAAKyV,IAAI6U,EAA4B,GAAfC,EAAoB,GAC3DpH,EAAShX,OAASoe,EACbr1B,KAAA8vB,KAAO7B,EAASlX,MAAQ,EACxB/W,KAAA+vB,KAAO9B,EAAShX,OAAS,EAC9BjX,KAAK4wB,aACA5wB,KAAAywB,aAAazwB,KAAK0N,WAClB1N,KAAAquB,UAAYJ,EAASlX,MAA0B,IAAlBkX,EAAShX,OAAgBgX,EAAShX,OAAS,MAAQgX,EAASlX,MAAQ,OACxG,GF7UuBmT,KACjB7L,OAAAA,GAAQC,IAAAA,GAAK2P,SAAAA,GAAUC,MAAAA,IAAUL,GACzC1qB,KAAK1C,iBAAiB,UAAU,IAAMysB,GAAME,WAC5C,MAAMkI,WAAgBhyB,YAEbG,WAAAA,CAAY8xB,EAAa,YADxB9vB,EAAAzF,KAAA,UAGNA,KAAKie,OAASsX,CAChB,CACOC,IAAAA,CAAKvX,EAAS,IACfje,KAAKie,SAAWA,IACpBje,KAAKie,OAASA,EACdje,KAAKkE,cAAc,IAAI+Q,MAAM,WAC/B,CACOwgB,EAAAA,CAAGxX,EAAS,IACjB,OAAOje,KAAKie,SAAWA,CACzB,CACOyX,EAAAA,CAAGzX,EAAS,IACjB,OAAOje,KAAKie,SAAWA,CACzB,EAEF,MAAM0X,GAAU,IAAIL,GAAQ,QACtBM,GAAU,CACdje,KAAM,GACNiN,KAAM,GACNiR,GAAAA,CAAIvqB,EAAqB7I,EAAc3B,GAChCd,KAAA4kB,KAAK5kB,KAAK4kB,KAAK5gB,QAAU,CAAE+L,SAAUA,IAAMjP,EAAQwK,IACxDA,EAAO7K,iBAAiBgC,EAAMzC,KAAKoiB,OAAOE,KAAKtiB,MACjD,EACAoiB,MAAAA,GACE,MAAMjb,EAAMnH,KAAK4kB,KAAKtc,IAAIF,QAAQuQ,OAAOmd,SACpC91B,KAAA2X,KAAsB,IAAfxQ,EAAInD,OAAe,GAASmD,IAAAA,EAAI4E,KAAK,OACnD,GAEF,IAAIgqB,GAAY,GAChB,MAAMC,GAKGvyB,WAAAA,CAAY0J,GAJZ1H,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,UACCyF,EAAAzF,KAAA,SAEDA,KAAAi2B,KAAO9oB,EACZnN,KAAK+W,MAAQ5J,EAAM4J,MACnB/W,KAAKiX,OAAS9J,EAAM8J,OACpBjX,KAAKk2B,MAAQ,IACf,CACA,QAAWC,GACT,OAAAn2B,KAAKo2B,UACEp2B,KAAKk2B,OAASl2B,KAAKi2B,IAC5B,CACA,aAAaG,GACXp2B,KAAKo2B,QAAU7gB,YACfvV,KAAKk2B,YTxMT3gB,eAA8BoK,GAC5B,MAAMrB,EAAMF,EAAUuB,EAAI5I,MAAO4I,EAAI1I,SAC7BF,MAAOsf,EAAGpf,OAAQqf,GAAMhY,EAAID,OAChCC,OAAAA,EAAAyB,UAAUJ,EAAK,EAAG,GDiIxB,SAA2BtB,EAAQkY,EAAMC,EAAMzf,EAAOE,EAAQwf,GAC5D,KAAUA,MAAAA,IAAWA,EAAS,GAI9B,CAAAA,GAAU,EACV,IAAIte,EAlCN,SAAgCkG,EAAQkY,EAAMC,EAAMzf,EAAOE,GAKzD,GAJsB,iBAAXoH,IACTA,EAAS7d,SAASsoB,eAAezK,KAG9BA,GAA8B,WAApBI,EAAQJ,MAA0B,eAAgBA,GACzD,MAAA,IAAIG,UAAU,2EAGlBkY,IAAAA,EAAUrY,EAAOE,WAAW,MAE5B,IACF,OAAOmY,EAAQjX,aAsB8B8W,EAAMC,EAtBXzf,EAAOE,EAChD,OAAQpU,GACD,MAAA,IAAIzC,MAAM,gCAAkCyC,EACnD,CACH,CAkBkB8zB,CAAuBtY,ECtIhB,EAAG,EDsIiCtH,EAAOE,GAClEkB,EAcF,SAA8BA,EAAWoe,EAAMC,EAAMzf,EAAOE,EAAQwf,GAYlE,IAAA,IAFIG,EATAC,EAAS1e,EAAUnM,KACnByb,EAAM,EAAIgP,EAAS,EAEnBK,EAAc/f,EAAQ,EACtBggB,EAAe9f,EAAS,EACxB+f,EAAcP,EAAS,EACvBQ,EAAYD,GAAeA,EAAc,GAAK,EAC9CE,EAAa,IAAInY,EACjBlb,EAAQqzB,EAGHpzB,EAAI,EAAGA,EAAI2jB,EAAK3jB,IACvBD,EAAQA,EAAMub,KAAO,IAAIL,EAErBjb,IAAMkzB,IACRJ,EAAW/yB,GAIfA,EAAMub,KAAO8X,EACTC,IAAAA,IAAAA,EAAU,KACVC,EAAW,KACXC,EAAK,EACLC,EAAK,EACLC,EAAS1Y,EAAS4X,GAClBe,EAAS1Y,EAAS2X,GAEbrG,EAAI,EAAGA,EAAInZ,EAAQmZ,IAAK,CAC/BvsB,EAAQqzB,EACJO,IAAAA,IAAAA,EAAKZ,EAAOS,GACZI,EAAKb,EAAOS,EAAK,GACjBK,EAAKd,EAAOS,EAAK,GACjBM,EAAKf,EAAOS,EAAK,GAEZ3O,EAAK,EAAGA,EAAKqO,EAAarO,IACjC9kB,EAAMsb,EAAIsY,EACV5zB,EAAMmV,EAAI0e,EACV7zB,EAAM2G,EAAImtB,EACV9zB,EAAMkE,EAAI6vB,EACV/zB,EAAQA,EAAMub,KAgBhB,IAAA,IAbIyY,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAUjB,EAAcS,EACxBS,EAAUlB,EAAcU,EACxBS,EAAUnB,EAAcW,EACxBS,EAAUpB,EAAcY,EACxBS,EAAOpB,EAAYQ,EACnBa,EAAOrB,EAAYS,EACnBa,EAAOtB,EAAYU,EACnBa,EAAOvB,EAAYW,EAEda,EAAM,EAAGA,EAAMzB,EAAayB,IAAO,CACtCC,IAAAA,EAAIpB,IAAOR,EAAc2B,EAAM3B,EAAc2B,IAAQ,GACrDtZ,EAAI0X,EAAO6B,GACX1f,EAAI6d,EAAO6B,EAAI,GACfluB,EAAIqsB,EAAO6B,EAAI,GACf3wB,EAAI8uB,EAAO6B,EAAI,GACfC,EAAM3B,EAAcyB,EACxBJ,IAASx0B,EAAMsb,EAAIA,GAAKwZ,EACxBL,IAASz0B,EAAMmV,EAAIA,GAAK2f,EACxBJ,IAAS10B,EAAM2G,EAAIA,GAAKmuB,EACxBH,IAAS30B,EAAMkE,EAAIA,GAAK4wB,EACxBd,GAAU1Y,EACV2Y,GAAU9e,EACV+e,GAAUvtB,EACVwtB,GAAUjwB,EACVlE,EAAQA,EAAMub,IACf,CAED+X,EAAUD,EACVE,EAAWR,EAEX,IAAA,IAASxjB,EAAI,EAAGA,EAAI2D,EAAO3D,IAAK,CAC1BwlB,IAAAA,EAAYJ,EAAOjB,GAAUC,EAGjC,GAFAX,EAAOS,EAAK,GAAKsB,EAEC,IAAdA,EAAiB,CACnB,IAAIC,EAAM,IAAMD,EAEhB/B,EAAOS,IAAOe,EAAOd,GAAUC,GAAUqB,EACzChC,EAAOS,EAAK,IAAMgB,EAAOf,GAAUC,GAAUqB,EAC7ChC,EAAOS,EAAK,IAAMiB,EAAOhB,GAAUC,GAAUqB,CACrD,MACQhC,EAAOS,GAAMT,EAAOS,EAAK,GAAKT,EAAOS,EAAK,GAAK,EAGjDe,GAAQJ,EACRK,GAAQJ,EACRK,GAAQJ,EACRK,GAAQJ,EACRH,GAAWd,EAAQhY,EACnB+Y,GAAWf,EAAQne,EACnBmf,GAAWhB,EAAQ3sB,EACnB4tB,GAAWjB,EAAQpvB,EAEf+wB,IAAAA,EAAK1lB,EAAIqjB,EAAS,EAEtBqC,EAAKzB,GAAMyB,EAAKhC,EAAcgC,EAAKhC,IAAgB,EAKnDuB,GAJAR,GAAUV,EAAQhY,EAAI0X,EAAOiC,GAK7BR,GAJAR,GAAUX,EAAQne,EAAI6d,EAAOiC,EAAK,GAKlCP,GAJAR,GAAUZ,EAAQ3sB,EAAIqsB,EAAOiC,EAAK,GAKlCN,GAJAR,GAAUb,EAAQpvB,EAAI8uB,EAAOiC,EAAK,GAKlC3B,EAAUA,EAAQ/X,KAClB,IAAI2Z,GAAY3B,EACZ4B,GAAKD,GAAU5Z,EACf8Z,GAAKF,GAAU/f,EACfkgB,GAAKH,GAAUvuB,EACf2uB,GAAKJ,GAAUhxB,EACnBkwB,GAAWe,GACXd,GAAWe,GACXd,GAAWe,GACXd,GAAWe,GACXtB,GAAUmB,GACVlB,GAAUmB,GACVlB,GAAUmB,GACVlB,GAAUmB,GACV/B,EAAWA,EAAShY,KACpBkY,GAAM,CACP,CAEDD,GAAMtgB,CACP,CAED,IAAA,IAASqiB,GAAK,EAAGA,GAAKriB,EAAOqiB,KAAM,CAGjC,IAAIC,GAAMxC,EAFVS,EAAK8B,IAAM,GAGPE,GAAMzC,EAAOS,EAAK,GAClBiC,GAAM1C,EAAOS,EAAK,GAClBkC,GAAM3C,EAAOS,EAAK,GAClBmC,GAAWzC,EAAcqC,GACzBK,GAAW1C,EAAcsC,GACzBK,GAAW3C,EAAcuC,GACzBK,GAAW5C,EAAcwC,GACzBK,GAAQ5C,EAAYoC,GACpBS,GAAQ7C,EAAYqC,GACpBS,GAAQ9C,EAAYsC,GACpBS,GAAQ/C,EAAYuC,GAExB31B,EAAQqzB,EAEC+C,IAAAA,IAAAA,GAAM,EAAGA,GAAMjD,EAAaiD,KACnCp2B,EAAMsb,EAAIka,GACVx1B,EAAMmV,EAAIsgB,GACVz1B,EAAM2G,EAAI+uB,GACV11B,EAAMkE,EAAIyxB,GACV31B,EAAQA,EAAMub,KAShB,IAAA,IANI8a,GAAKnjB,EACLojB,GAAU,EACVC,GAAU,EACVC,GAAU,EACVC,GAAU,EAELC,GAAM,EAAGA,IAAO9D,EAAQ8D,KAAO,CACtCjD,EAAK4C,GAAKd,IAAM,EAEhB,IAAIoB,GAAOxD,EAAcuD,GAEzBV,KAAUh2B,EAAMsb,EAAIka,GAAMxC,EAAOS,IAAOkD,GACxCV,KAAUj2B,EAAMmV,EAAIsgB,GAAMzC,EAAOS,EAAK,IAAMkD,GAC5CT,KAAUl2B,EAAM2G,EAAI+uB,GAAM1C,EAAOS,EAAK,IAAMkD,GAC5CR,KAAUn2B,EAAMkE,EAAIyxB,GAAM3C,EAAOS,EAAK,IAAMkD,GAC5CF,IAAWjB,GACXc,IAAWb,GACXc,IAAWb,GACXc,IAAWb,GACX31B,EAAQA,EAAMub,KAEVmb,GAAMxD,IACRmD,IAAMnjB,EAET,CAEDugB,EAAK8B,GACLjC,EAAUD,EACVE,EAAWR,EAEX,IAAA,IAAS6D,GAAK,EAAGA,GAAKxjB,EAAQwjB,KAAM,CAClC,IAAIC,GAAMpD,GAAM,EAEhBT,EAAO6D,GAAM,GAAKlB,GAAMQ,GAAQzC,GAAUC,EAEtCgC,GAAM,GACRA,GAAM,IAAMA,GACZ3C,EAAO6D,KAAQb,GAAQtC,GAAUC,GAAUgC,GAC3C3C,EAAO6D,GAAM,IAAMZ,GAAQvC,GAAUC,GAAUgC,GAC/C3C,EAAO6D,GAAM,IAAMX,GAAQxC,GAAUC,GAAUgC,IAE/C3C,EAAO6D,IAAO7D,EAAO6D,GAAM,GAAK7D,EAAO6D,GAAM,GAAK,EAGpDb,IAASJ,GACTK,IAASJ,GACTK,IAASJ,GACTK,IAASJ,GACTH,IAAYtC,EAAQhY,EACpBua,IAAYvC,EAAQne,EACpB2gB,IAAYxC,EAAQ3sB,EACpBovB,IAAYzC,EAAQpvB,EACpB2yB,GAAMtB,KAAOsB,GAAMD,GAAKzD,GAAeD,EAAe2D,GAAM3D,GAAgBhgB,GAAS,EACrF8iB,IAASS,IAAWnD,EAAQhY,EAAI0X,EAAO6D,IACvCZ,IAASK,IAAWhD,EAAQne,EAAI6d,EAAO6D,GAAM,GAC7CX,IAASK,IAAWjD,EAAQ3sB,EAAIqsB,EAAO6D,GAAM,GAC7CV,IAASK,IAAWlD,EAAQpvB,EAAI8uB,EAAO6D,GAAM,GAC7CvD,EAAUA,EAAQ/X,KAClBqa,IAAYJ,GAAMjC,EAASjY,EAC3Bua,IAAYJ,GAAMlC,EAASpe,EAC3B2gB,IAAYJ,GAAMnC,EAAS5sB,EAC3BovB,IAAYJ,GAAMpC,EAASrvB,EAC3BuyB,IAAWjB,GACXc,IAAWb,GACXc,IAAWb,GACXc,IAAWb,GACXpC,EAAWA,EAAShY,KACpBkY,GAAMvgB,CACP,CACF,CAEMoB,OAAAA,CACT,CApPcwiB,CAAqBxiB,EAAWoe,EAAMC,EAAMzf,EAAOE,EAAQwf,GACvEpY,EAAOE,WAAW,MAAM4B,aAAahI,ECxId,EAAG,EDwIgC,CAC5D,CCzIEyiB,CAAWtc,EAAID,OAAQ,EAAG,EAAGgY,EAAGC,EAAGxrB,KAAKa,KAAsB,MAAjBb,KAAKyV,IAAI8V,EAAGC,KAClDle,kBAAkBkG,EAAID,OAC/B,CSkMuBwc,CAAQ76B,KAAKi2B,KAClC,EAEF,MAAM6E,GAAU,IAAAvO,IACVwO,OAAWxO,IACXyO,OAAazO,IACb0O,GAAgB,IAAA1O,IAChB2O,GAAmB,IAAA3O,IACnB4O,GAAiC,GACjCC,GAAiC,GACvCjR,GAAgB1pB,iBAAiB,UAAUoK,GAAOgjB,GAAI4C,aAAazoB,OAAQ6C,EAAIS,OAA6B7G,UAC5G2lB,GAAkB3pB,iBAAiB,UAAUoK,GAAOqiB,GAAME,OAAOplB,OAAQ6C,EAAIS,OAA6B7G,UAC1G4lB,GAAoB5pB,iBAAiB,UAAiBoK,GAAAgjB,GAAIU,WAAavmB,OAAQ6C,EAAIS,OAA6B7G,SAChH6lB,GAAe7pB,iBAAiB,UAAUoK,GAAOgjB,GAAIW,UAAa3jB,EAAIS,OAA4B8V,UAClG,MAAMnD,GAAS,IGhPR,MAGExa,WAAAA,CAAYoI,GAFFpG,EAAAzF,KAAA,OACTyF,EAAAzF,KAAA,QAENA,KAAK6L,IAAMA,EACX7L,KAAKgM,KAAO,EACd,CACOqvB,IAAAA,CAAKC,GAA+D,IAAAC,EACpE,OAAAv7B,KAAAgM,KAAO6L,KAAKC,MAAwC,QAAxCyjB,EAAMjf,aAAaC,QAAQvc,KAAK6L,YAAQ0vB,IAAAA,EAAAA,EAAA,MAC5B,mBAAlBD,GACLA,EAAct7B,KAAKgM,OAAOhM,KAAKmG,QAE9BnG,IACT,CACOw7B,IAAAA,GACLlf,aAAaE,QAAQxc,KAAK6L,IAAKgM,KAAKxQ,UAAUrH,KAAKgM,MACrD,CACO7F,KAAAA,GACLnG,KAAKgM,KAAO,GACZhM,KAAKw7B,MACP,CACOC,GAAAA,CAAI5vB,GACF,OAAA7L,KAAKgM,KAAKH,EACnB,CACO6vB,GAAAA,CAAI7vB,EAAapH,GACjBzE,KAAAgM,KAAKH,GAAOpH,EACjBzE,KAAKw7B,MACP,CACO3F,GAAAA,CAAIhqB,EAAaiW,EAAmB6Z,GAAoB,GACzD7Z,GAAAA,aAAgB8Z,kBAAoB9Z,aAAgB+Z,kBAAmB,CACnEC,MAAAA,EAAyB,aAAdha,EAAKrf,KAAsB,UAAY,QAClDgC,EAAQzE,KAAKy7B,IAAI5vB,QACT,IAAVpH,IAAuBqd,EAA0Bga,GAAuBr3B,GACvEqd,EAAArhB,iBAAiB,UAAU,KAC9BT,KAAK07B,IAAI7vB,EAAMiW,EAA0Bga,GAAmB,IAE1DH,GAAqB7Z,EAAK5d,cAAc,IAAI+Q,MAAM,UAAS,KAAA,MACtD6M,aAAgBia,qBAOd,MAAA,IAAI37B,MAAM,gDAPyB,CACxCqE,MAAAA,EAAQzE,KAAKy7B,IAAI5vB,QACT,IAAVpH,IAAsBqd,EAAKrd,MAAoBA,GAC9Cqd,EAAArhB,iBAAiB,UAAU,KACzBT,KAAA07B,IAAI7vB,EAAKiW,EAAKrd,MAAK,IAEtBk3B,GAAqB7Z,EAAK5d,cAAc,IAAI+Q,MAAM,UACxD,CAAqE,CACvE,GHmM+B,kBAAkBomB,MAAKrvB,GAAQA,EAAKgwB,WACrE/d,GAAO4X,IAAI,WAAYlL,IACvB1M,GAAO4X,IAAI,YAAajL,IACxB3M,GAAO4X,IAAI,YAAavL,IACxBrM,GAAO4X,IAAI,YAAarL,IACxBvM,GAAO4X,IAAI,WAAYpL,IACvBxM,GAAO4X,IAAI,iBAAkBnL,IAC7B,MAAMsR,GAAW,IAAI7a,EAAS,gBAAgBS,SAASsH,IAASvmB,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,aACvFge,GAAU,IAAI9a,EAAS,gBAAgBU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,YACrGgX,GAAY,IAAI9T,EAAS,SAASU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,cAChGie,GAAU,IAAI/a,EAAS,SAASU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,YAC9Fke,GAAW,IAAIhb,EAAS,QAAQU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,aAC9Fme,GAAS,IAAIjb,EAAS,QAAQU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,WAC5Foe,GAAU,IAAIlb,EAAS,QAAQ,GAAMU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,YACnGqe,GAAW,IAAInb,EAAS,QAAQU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,aAC9Fse,GAAY,IAAIpb,EAAS,sBAAsB,GAAMU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,cACnH6Q,GAAW,IAAI3N,EAAS,aAAaU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,aACzG6Q,GAASxN,SAAS7gB,iBAAiB,UAAUoK,GAAOgjB,GAAIiB,SAAYjkB,EAAIS,OAA4B8V,UACpG0N,GAASxN,SAASpd,cAAc,IAAI+Q,MAAM,WAC1C,MAAM4Z,GAAW,IAAI1N,EAAS,aAAaU,aAAama,GAAS3a,WAAW1e,KAAKsb,GAAO4X,IAAIvT,KAAKrE,GAAQ,aAWzG,SAASue,KACP,IAAA,MAAW14B,KAAKs3B,GACd,GAAInQ,GAAYxmB,MAAMg4B,SAAW34B,EAAEqG,MAAO,CAGpC,GAFU,MAAVrG,EAAEhB,OAAcsoB,GAAU3mB,MAAQX,EAAEhB,MACxB,MAAZgB,EAAEwI,SAAgB+e,GAAY5mB,MAAQX,EAAEwI,QAC7B,MAAXxI,EAAE4I,MAAe,CACnBqpB,GAAYjyB,EAAE4I,MACR,MAAAgsB,EAAI3C,GAAU2G,oBAAoBh2B,MAAM,OAAO4B,KAAIP,GAAKA,EAAE00B,SAC5D/D,EAAE,KAAqBlN,GAAA/mB,MAAQi0B,EAAE,IACjCA,EAAE,KAAgBjN,GAAAhnB,MAAQi0B,EAAE,GAClC,CACqB,MAAjB50B,EAAE8I,cAAqB2e,GAAiB9mB,MAAQX,EAAE8I,aACrC,MAAb9I,EAAEgJ,UAAiBwe,GAAa7mB,MAAQX,EAAEgJ,SAC/B,MAAXhJ,EAAEmJ,OAAiB8tB,GAAK4B,IAAI74B,EAAEmJ,SAAQ+d,GAAUvmB,MAAQX,EAAEmJ,OAC/C,MAAXnJ,EAAEqJ,OAAiB2tB,GAAI6B,IAAI74B,EAAEqJ,SAC/B0d,GAASpmB,MAAQX,EAAEqJ,MACnB0d,GAAS3mB,cAAc,IAAI+Q,MAAM,YAEd,MAAjBnR,EAAE0J,cACc4c,GAAA3lB,MAAQX,EAAE0J,YAAYuC,WAClCmd,GAAAE,OAAOtpB,EAAE0J,cAEE,MAAf1J,EAAE4J,YACYyc,GAAA1lB,MAAQX,EAAE4J,UAAUqC,WAChC8d,GAAA4C,aAAa3sB,EAAE4J,YAEE,MAAnB5J,EAAE+J,gBACgBwc,GAAA5lB,MAAQX,EAAE+J,cAAckC,WAC5C8d,GAAIU,WAAazqB,EAAE+J,eAEL,MAAZ/J,EAAEuG,SAA4BkgB,GAAA9lB,MAAQX,EAAEuG,OAAO0F,WACrD,CAEJ,CA3CA8e,GAASvN,SAAS7gB,iBAAiB,UAAUoK,GAAOgjB,GAAIgB,SAAYhkB,EAAIS,OAA4B8V,UACpGyN,GAASvN,SAASpd,cAAc,IAAI+Q,MAAM,WAC1CiW,GAAWzqB,iBAAiB,UAAUoK,GAAOgjB,GAAI+C,WAAW5oB,OAAQ6C,EAAIS,OAA4B7G,UACpGwZ,GAAO4X,IAAI,aAAc3K,IACzBC,GAAY1qB,iBAAiB,UAAiBoK,IAAA,IAAA+xB,EAExC/O,GAAA9kB,MAAQ,KAAgE6zB,QAAhEA,EADC,CAAEC,SAAS,EAAIC,QAAY,EAAAC,OAAQ,EAAGC,QAAS,GACnCnyB,EAAIS,OAA4B7G,MAAMw4B,sBAAaL,IAAAA,EAAAA,EAAK,GAAK,GAAA,IAExF3e,GAAO4X,IAAI,cAAe1K,IAqC1B,MAAM+R,GAAW,IAAItpB,cAEnB,MAAMupB,EAAgC,CAAA,EAChCC,EAAiC,CAAA,EACnCC,IAAAA,EAAe,EACfC,EAAgB,EACpB,MAAMC,EAAahoB,MAAMioB,EAAa/oB,EAAegpB,EAAkBC,KACrEN,EAAOI,GAAO/oB,EACE6oB,EAAA/4B,OAAOo5B,OAAOP,GAAQ7yB,QAAO,CAACxC,EAAGyC,IAAMzC,EAAIyC,GAAG,SACvDizB,aAAmBv9B,QAAUu9B,EAAUv9B,QAAQK,QAAQk9B,IAC9DN,EAAMK,IAAQL,EAAMK,IAAQ,GAAK,EAClBH,EAAA94B,OAAOo5B,OAAOR,GAAO5yB,QAAO,CAACxC,EAAGyC,IAAMzC,EAAIyC,GAAG,GAC5DwiB,GAAS,QAAQqQ,KAAgBC,KAC7BH,EAAMK,KAASJ,EAAOI,IAAsB,MAAdE,GAA+BA,IACpDE,KAEfvR,GAAKkR,WAAaA,EAClB,IAAIM,EAAY,EAChB,MAAM1rB,EAAU,CAAEoD,kBAAMe,MAAkByB,GAAyBb,EAAMtP,OAAOmQ,IAC1E+lB,EAAM,IAAIxoB,EAAU,CAAExU,QAASyU,SAAcpB,EAAOsB,KAAKzJ,EAAMmG,KA0BrE,SAAS4rB,EAAK/xB,GAEZ,OADAmiB,QAAQC,IAAIpiB,GACJA,EAAKvJ,MACX,IAAK,OACW04B,GAAAx3B,QAAQqI,EAAKA,MAC3B,MACF,IAAK,OACWovB,GAAAz3B,QAAQqI,EAAKA,MAC3B,MACF,IAAK,QAAS,CACZ,MAAMgyB,EAAWC,EAAcjyB,EAAKlJ,KAAMi4B,IACrCA,GAAAW,IAAIsC,EAAUhyB,EAAKA,MACxBgf,GAAUrJ,YAAYuc,EAAaF,EAAUhyB,EAAKlJ,OAClDkoB,GAAU9mB,cAAc,IAAI+Q,MAAM,WAClC,KACF,CACA,IAAK,QAAS,CACZ,MAAM+oB,EAAWC,EAAcjyB,EAAKlJ,KAAMg4B,IAC1CA,GAAIY,IAAIsC,EAAU,IAAIhI,GAAWhqB,EAAKA,OACtC6e,GAASlJ,YAAYuc,EAAaF,EAAUhyB,EAAKlJ,OACjD+nB,GAAS3mB,cAAc,IAAI+Q,MAAM,WACjC,KACF,CACA,IAAK,QAAS,CACRjJ,EAAK6J,KAAK7J,EAAK6J,IAAIud,SAAa/lB,GAAAwa,GAAYxa,KAC5CrB,EAAKmyB,MAAoB/C,GAAAz3B,QAAQqI,EAAKmyB,MACtCnyB,EAAKpF,MAAoBu0B,GAAAx3B,QAAQqI,EAAKpF,MAC1C,MAAMo3B,EAAWC,EAAcjyB,EAAKlJ,KAAMk4B,IACnCA,GAAAU,IAAIsC,EAAUhyB,EAAKA,MAChBivB,GAAAS,IAAIsC,EAAUhyB,EAAKkG,KAChBgpB,GAAAQ,IAAIsC,EAAUhyB,EAAKkM,QAChC+S,GAAYtJ,YAAYuc,EAAaF,EAAUhyB,EAAKlJ,OACpDmoB,GAAY/mB,cAAc,IAAI+Q,MAAM,WACpC,KACF,CACA,QACEkZ,QAAQiQ,KAAK,qBAAqBpyB,EAAKlJ,QAC/BqrB,QAAAC,IAAIpiB,EAAKA,MACL6b,GAAA,UAAU7b,EAAKlJ,SAASkJ,EAAKA,MAAkB,8BAEjE,CACSkyB,SAAAA,EAAaz5B,EAAe45B,GAC7BC,MAAAA,EAAS99B,SAASsT,cAAc,UAChCohB,EAAW,WAAWtc,KAAKylB,GAC1B,OAAAC,EAAAzY,UAAYqP,EAAW,GAAKmJ,EACnCC,EAAO75B,MAAQA,EACXywB,GAAiBoJ,EAAAlZ,UAAU1C,IAAI,QAC5B4b,CACT,CACA,SAASV,IACHP,IAAiBC,GACLrT,GAAA7E,UAAUI,OAAO,YACpBgX,MACQvS,GAAA7E,UAAU1C,IAAI,WACrC,CACSub,SAAAA,EAAcn7B,EAAc44B,GACnC,IAAIsC,EAAWl7B,EACR44B,KAAAA,EAAIiB,IAAIqB,IAAuBA,GAAA,KAC/BA,OAAAA,CACT,CApFAF,EAAIr9B,iBAAiB,aAAa,IAAMusB,GAAS,gBAC7C8Q,EAAAr9B,iBAAiB,QAAeoK,IAAE0yB,EAAW,MAAOO,EAAIrpB,MAAOspB,EAAMlzB,EAAgCiL,QAAO,IAChH8V,GAAYnrB,iBAAiB,QAASy8B,GAASroB,WAAWyN,KAAK4a,KAC/DrR,GAAgBprB,iBAAiB,QAASy8B,GAASroB,WAAWyN,KAAK4a,KACnEpR,GAAerrB,iBAAiB,QAASy8B,GAASloB,UAAUsN,KAAK4a,KACxDA,GAAAz8B,iBAAiB,SAAUm9B,GAC3BV,GAAAz8B,iBAAiB,YAAmBoK,IAC3C,IAAMA,EAAsB4J,MAAO,OACnC,MAAM8pB,EAAUzzB,KAAKC,MAAOF,EAAsB2J,OAAU3J,EAAsB4J,MAAQ,KAC1FuY,GAAS,QAAQuR,OAAaC,GAAQ3zB,EAAsB2J,WAAWgqB,GAAQ3zB,EAAsB4J,UAAS,IAEvGyoB,GAAAz8B,iBAAiB,QAAeoK,IAEjC,MAAEuK,MAAQtS,KAAAA,EAAM27B,mBAAoBtyB,GAAQkJ,OAAAA,GAAWxK,EACvD6zB,EAAQrpB,EAAOspB,WAAa,GAAkD,aAA7C,IAAI7d,SAASzL,GAAQ0L,UAAU,GAAG,GACnE/U,EAAO,CAAElJ,KAAAA,EAAMuS,OAAAA,EAAQlJ,KAAMA,GAAQrJ,GAOvC47B,EAAOZ,EAAIroB,KAAKzJ,cALlB6xB,IACA,MAAMjzB,QAAeuJ,EAAOsB,KAAKzJ,EAAMmG,SACjCorB,EAAW,OAAQM,EAAWE,EAAKnzB,cAmE/CyhB,GAAK6Q,SAAWA,GAChB0B,OAAO,uBAA2BnnB,MAAU1P,GAAAA,EAAE82B,YAE9C,MAAMC,GAAa,Ib1WZ,MAEEr7B,WAAAA,GADAgC,EAAAzF,KAAA,QAELA,KAAK4kB,KAAO,EACd,CACOma,QAAAA,CAASt8B,EAAe6W,EAAqBC,EAAiBC,GAC7D,MAAEoL,KAAAA,GAAS5kB,KACXg/B,EAAMpa,EAAKqa,WAAUC,GAAOA,EAAIz8B,OAASA,GAAQy8B,EAAI5lB,KAAOA,KACtD,IAAR0lB,GAAiBpa,EAAA3gB,OAAO+6B,EAAK,GACjCpa,EAAKjhB,KAAK,IAAI0V,EAAS5W,EAAM6W,EAAIC,EAASC,GAC5C,CACO2lB,MAAAA,CAAO18B,EAAe6W,EAAqBC,EAAiBC,GAC3D4lB,MAAAA,EAAQp/B,KAAK4kB,KAAKya,MAAKH,GAAOA,EAAIz8B,OAASA,GAAQy8B,EAAI5lB,KAAOA,IAChE8lB,GAAaA,EAAAhlB,KAAKb,EAASC,EACjC,CACO8lB,UAAAA,CAAW78B,EAAe6W,GACzB8lB,MAAAA,EAAQp/B,KAAK4kB,KAAKya,MAAKH,GAAOA,EAAIz8B,OAASA,GAAQy8B,EAAI5lB,KAAOA,IAChE8lB,IAAOA,EAAM3lB,UAAW,EAC9B,CACO2I,MAAAA,GACC,MAAEwC,KAAAA,GAAS5kB,KACjB,IAAA,IAAS8D,EAAI,EAAGA,EAAI8gB,EAAK5gB,OAAQF,IAAK,CAC9Bs7B,MAAAA,EAAQxa,EAAK9gB,GACfs7B,EAAM3lB,UACR2lB,EAAM1lB,UAAW,EACjB0lB,EAAMzlB,UAAW,GACPiL,EAAA3gB,OAAOH,IAAK,EAC1B,CACF,CACO6e,KAAAA,CAAMlgB,GACX,IAAA,MAAWqB,KAAK9D,KAAK4kB,KAAU9gB,EAAErB,OAASA,GAAWzC,KAAAs/B,WAAW78B,EAAMqB,EAAEwV,GAC1E,Ga4UIimB,GAAWC,KACX3/B,EAAKa,UAAmBF,SAAAoD,oBAAoB/D,EAAKa,SAAU6+B,IAC/DT,GAAWnc,MAAM,YACXuK,GAAAU,QAAQ/tB,EAAK2B,SACnB0rB,GAAME,QAAO,EAGTqS,GAAS,IAAIj6B,EACbk6B,GAAU,IAAIl6B,EACdm6B,GAAU,IAAIn6B,EACdo6B,GAAe,CACnB/5B,KAAM,CAAC,EAAG,EAAG,EAAG,GAChBg6B,KAAM,CACJtqB,SAAWrV,QAAQK,UAAUkX,KAAKqoB,IAClCvqB,SAAWrV,QAAQK,UAAUkX,KAAKsoB,IAAQtoB,KAAKsoB,IAC/CxqB,SAAWrV,QAAQK,UAAUkX,MAAK,IAAM0kB,GAASr8B,WACjDyV,UACQ4X,MAAAA,EAASD,GAAMS,UACjB,IACF,SAAM9tB,EAAKC,UACNotB,GAAMU,QAAQ/tB,EAAK2B,WACpB3B,EAAKa,UAAmBF,SAAAC,iBAAiBZ,EAAKa,SAAU6+B,KACvDlD,GAAQjb,SAAS,aAChB/e,EAAYW,sBACXH,GACPsrB,QAAQiQ,KAAKv7B,GACPqqB,GAAAU,SAAST,EAAM,CACrB,QACAD,GAAME,QACR,IAGJrY,KAAAA,CAAMuE,GACEvT,MAAAA,EAAMD,YAAYC,MACpBA,EAAM/F,KAAK6F,KAAKyT,GAAM,KACxBtZ,KAAK6/B,KAAKvmB,KAAMvD,OAAOC,IACbmY,QAAAiQ,KAAKpoB,GACbqW,GAAKzpB,MAAgBoT,UAAAA,EAAIjT,WAAU,IAGlC/C,KAAA6F,KAAKyT,GAAMvT,CAClB,EACAg5B,QAAAA,CAASxlB,EAAiBC,GAClB,MAAE6U,UAAAA,GAAcR,GAClBtU,EAAsB,IAAZ8U,GAAmB7U,EAAsB,IAAZ6U,GAAiBruB,KAAK+U,MAAM,GACnEwE,EAAU0U,GAASlX,MAAoB,IAAZsX,GAAmB7U,EAAsB,IAAZ6U,GAAiBruB,KAAK+U,MAAM,GACpFwE,EAAsB,IAAZ8U,GAAmB7U,EAAUyU,GAAShX,OAAqB,IAAZoX,GAAiBruB,KAAK+U,MAAM,GACrFwE,EAAU0U,GAASlX,MAAoB,IAAZsX,GAAmB7U,EAAUyU,GAAShX,OAAqB,IAAZoX,GAAiBruB,KAAK+U,MAAM,GACtG4qB,GAAQ35B,OAAS,IAAGqmB,GAAK2T,UAAY3T,GAAK2T,UAAY,GAAKL,GAAQ35B,OAAS25B,GAAQ35B,OAC1F,GAEF,SAASi6B,GAAeC,EAAwBt3B,GACxC,MAAE2Q,QAAAA,EAASC,QAAAA,GAAY0mB,GACrB3mB,QAASnG,EAAGoG,QAAS4W,EAAGkE,KAAAA,EAAME,KAAAA,GAAS5rB,EACxC,OAAAkC,KAAK4S,KAAKnE,EAAUnG,GAAKkhB,GAAQ9a,EAAU4W,GAAKoE,IAAS,CAClE,CACA,SAAS2L,GAAiBD,EAAwBt3B,GAC1C,MAAE2Q,QAAAA,EAASC,QAAAA,GAAY0mB,GACrB3mB,QAASnG,EAAGoG,QAAS4W,EAAGkE,KAAAA,EAAME,KAAAA,GAAS5rB,EAC/C,OAAOkC,KAAK4S,KAAKnE,EAAUnG,GAAKkhB,GAAQ9a,EAAU4W,GAAKoE,GAAQ1pB,KAAK4S,KAAKnE,EAAUnG,GAAKohB,GAAQhb,EAAU4W,GAAKkE,IAAS,CAC1H,CACA,MAAM8L,GAAM,CAAA,EACZ,IAAIC,GAAY,EACZC,GAAU,EACVC,GAAY,EACZC,GAAU,EACVC,GAAY,EACZC,GAAY,EACZC,IAAU,EACVC,IAAa,EACbC,IAAW,EAEf,MAAMC,GAAa,IIxeZ,MAIEr9B,WAAAA,GAHCgC,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,QACAyF,EAAAzF,KAAA,OAEDA,KAAA+gC,KAAO,EACP/gC,KAAA6F,KAAOC,YAAYC,MACxB/F,KAAKghC,IAAM,CACb,CACA,UAAWC,GACH,MAAED,IAAAA,GAAQhhC,KACZghC,OAAAA,EAAM,GAAWA,EAAIE,YAAY,GAC9BF,EAAIvlB,QAAQ,EACrB,CACA,QAAW0C,GACF,MAAA,GAAMne,KAAKghC,KAAO,CAC3B,CACOG,OAAAA,CAAQC,EAAK,IACd,QAAEphC,KAAK+gC,MAAQK,IACjBphC,KAAK+gC,KAAO,EACP/gC,KAAAghC,IAAM,IAAMI,IAAOphC,KAAK6F,MAAQ7F,KAAK6F,KAAOC,YAAYC,SAExD/F,KAAKghC,GACd,GJkdIK,GAAgB,IKzef,MAKE59B,WAAAA,GAJCgC,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,YACAyF,EAAAzF,KAAA,MAENA,KAAK0D,SAAW,OAChB1D,KAAKshC,SAAW,EAChBthC,KAAKuhC,SAAWv5B,OAAOw5B,QACvBxhC,KAAKsZ,GAAK,KACVtZ,KAAKyhC,SAAWzhC,KAAKyhC,SAASnf,KAAKtiB,KACrC,CACOkJ,KAAAA,GACW,OAAZlJ,KAAKsZ,KACJtZ,KAAAshC,SAAWx7B,YAAYC,MAC5B/F,KAAKsZ,GAAKooB,sBAAsB1hC,KAAKyhC,SAASnf,KAAKtiB,OACrD,CACO2hC,IAAAA,GACW,OAAZ3hC,KAAKsZ,KACTsoB,qBAAqB5hC,KAAKsZ,IAC1BtZ,KAAKsZ,GAAK,KACZ,CACOuoB,WAAAA,CAAYn+B,GACjB,GAAwB,mBAAbA,EAA+B,MAAA,IAAI8a,UAAU,8BACxDxe,KAAK0D,SAAWA,CAClB,CACOo+B,YAAAA,CAAaC,GAClB/hC,KAAKuhC,SAAWz2B,KAAK4S,IAAI,IAAMqkB,GAC1Bx0B,SAASvN,KAAKuhC,YAAWvhC,KAAKuhC,SAAWv5B,OAAOw5B,QACvD,CACQC,QAAAA,GACNzhC,KAAKsZ,GAAKooB,sBAAsB1hC,KAAKyhC,SAASnf,KAAKtiB,OAC7C,MAAAgiC,EAAUl8B,YAAYC,MACtBk8B,EAAUD,EAAUhiC,KAAKshC,SAC3BW,EAAUjiC,KAAKuhC,WACZvhC,KAAAshC,SAAWU,EAAUC,EAAUjiC,KAAKuhC,SACzCvhC,KAAK0D,SAASs+B,GAElB,GLocFX,GAAcQ,aAwiBd,WACEf,GAAWK,UACL,MAAE9S,UAAAA,GAAcR,GACtBwS,GAAAA,GAAYv6B,YAAYC,MACxB8nB,GAAI2C,eAEAkP,GAAQ15B,OAAS,IAAM,EA4C7B,WACE,GAAiB,MAAb6nB,GAAI1jB,MAAqB,MAAA,IAAI/J,MAAM,2BAClCugC,IAAWlB,GAAOz5B,QAAU,GAAK2vB,GAAQF,GAAG,UACrCkL,IAAA,EACVuB,GAAQrU,GAAIkB,SACO,MAAflB,GAAImB,SAAiBmT,GAAUtU,GAAImB,UAErC2G,GAAQF,GAAG,SAAWkL,KAAYC,KAAsBJ,GAAAF,IAAWD,GAAYE,IAAa,KAC5FC,GAAU,IAAaA,GAAA,GACvBA,IAAWE,KAAwBE,IAAA,GACnClW,GAAetJ,SAAWwf,KAAeC,KAChCA,IAAA,EACXnB,GAAQz5B,QAEVw6B,GAAY31B,KAAKoc,IAAIsZ,IAAW3S,GAAI1jB,MAAME,OAASrC,OAAOuiB,GAAY9lB,OAAS,KAAO,GAAKopB,GAAI9kB,MAAO,GAEtG8kB,GAAIsG,aAAasM,IAEjB2B,GAAgBhgB,SAChBigB,GAAajgB,SACbkgB,GAAYlgB,SACD,IAAA,MAAAte,KAAKg7B,GAAWla,KACV,aAAX9gB,EAAErB,OACDqB,EAAE4V,SACE5V,EAAE6V,SAAUyoB,GAAgB1f,IAAIE,EAAYxI,KAAKtW,EAAEyV,QAASzV,EAAE0V,UAC9D1V,EAAE2V,UAAU2oB,GAAgB1f,IAAIE,EAAYI,KAAKlf,EAAEyV,QAASzV,EAAE0V,UAFtD4oB,GAAgB1f,IAAIE,EAAYG,IAAIjf,EAAEyV,QAASzV,EAAE0V,WAKpE,GAAImnB,GAAS,CACL4B,MAAAA,EAA8B,QAAjBtU,GAASlX,MACfyrB,GAAAC,SAAS5U,GAAIoB,MAAOwR,IACjC+B,GAAaE,QAAQ7U,GAAIsB,MAAOsR,GAAW8B,GAC3CC,GAAaE,QAAQ7U,GAAIuB,OAAQqR,GAAW8B,GAC5CC,GAAaE,QAAQ7U,GAAI+B,SAAU6Q,GAAW8B,EAChD,CAEAzD,GAAW1c,SAMNugB,GAAAC,QAAUC,GAAWC,eAC1BH,GAAK3T,QAAUnB,GAAImB,QACnB2T,GAAKI,UAAY1W,GAAK2W,MAAQtC,GAAYF,GAAUA,IAAWE,GAC1DiC,GAAA7/B,KAAOsoB,GAAU3mB,OAAS2mB,GAAU6X,YACzCN,GAAKr2B,OAAS+e,GAAY5mB,MACrBk+B,GAAA/1B,YAAc2e,GAAiB9mB,OAAS8mB,GAAiB0X,YACzDN,GAAA71B,QAAUwe,GAAa7mB,OAAS6mB,GAAa2X,YAClDN,GAAKj2B,MAAQqpB,GACT9I,GAAKhS,MAAQ,GACV0nB,GAAA1nB,MAAQ,GAAGgS,GAAKhS,QACrB0nB,GAAKO,OAA0B,IAAjBrV,GAAIY,SAAiB,WAAa,UAEhDkU,GAAK1nB,MAAQ,GACb0nB,GAAKO,OAAS,IAEhBP,GAAKxG,UAAW,EAChBwG,GAAKQ,eAAiB,KACtBR,GAAKS,eAAiB,IACxB,CAvGiBC,GACFv/B,IAAAA,MAAAA,KAAKuoB,GAAKtmB,IAAI43B,SAAY75B,EAAA08B,GAAU3S,GAAI9kB,QAuGvD,WACE,MAAQslB,UAAAA,EAAWyB,KAAAA,EAAMC,KAAAA,GAASlC,IAC1B+U,QAAAA,EAAS5T,QAAAA,GAAY2T,GAC7BzU,GAAAA,GAAMoV,UAAU,EAAG,EAAGrV,GAASlX,MAAOkX,GAAShX,QAE/CiX,GAAMqV,YAAc,EACpBrV,GAAMnO,UAAU6iB,KAAYte,EAAWse,EAAS3U,GAAU,IACtD0S,IAAsB,MAAX3R,IAAoB3C,GAAK2W,MAAO,CAC7C,MAAQlsB,WAAYC,EAAOC,YAAaC,GAAW+X,EAC7Cd,GAAAnO,UAAUiP,KAAY1K,EAAW,CAAEvN,MAAAA,EAAOE,OAAAA,GAAUgX,GAAU,GACtE,CAeA,GAbIwR,GAAOz5B,QAAU,MAAQinB,GAAKjR,YAAYwnB,GAAS,EAAGnV,GAG1DH,GAAMuV,iBACNvV,GAAM3O,UAAY,OAClB2O,GAAMqV,YAAc1V,GAAIU,WACxBL,GAAM1O,SAAS,EAAG,EAAGyO,GAASlX,MAAOkX,GAAShX,QAC1CwoB,GAAOz5B,QAAU,KAA8B,MAAvB28B,GAAKS,gBAAwBT,GAAKS,eAAelV,IAEzEuR,GAAOz5B,QAAU,KAAKw9B,GAASvW,GAAKjR,WAAa,EAAI,EAAGqS,GAG5DH,GAAMuV,iBACFhE,GAAOz5B,QAAU,GAAwB,IAAnB05B,GAAQ15B,SAoPpC,WACE,IAAA,MAAWlC,KAAK+pB,GAAIwB,MAAOqU,GAAS5/B,EAAG28B,IACvC,IAAA,MAAW38B,KAAK+pB,GAAI4B,cAAekU,GAAS7/B,GAC5C,IAAA,MAAWA,KAAK+pB,GAAI2B,aAAcoU,GAAQ9/B,GAC1C,IAAA,MAAWA,KAAK+pB,GAAI6B,eAAgBmU,GAAU//B,EAChD,CAvPcggC,GACN7O,GAAU7T,SAAS,CAEf8M,GAAA6V,KAAO,GAAG1V,0BAChBH,GAAM8V,UAAY,SACP,IAAA,MAAAlgC,KAAK+pB,GAAIyB,cAClBpB,GAAM+V,aAAangC,EAAEwwB,KAAMxwB,EAAE0wB,MAAO1wB,EAAE0wB,KAAM1wB,EAAEwwB,KAAMxwB,EAAEyV,QAASzV,EAAE0V,SACjE0U,GAAMqV,YAAc,EACpBrV,GAAM3O,UAAY,SACZ2O,GAAA1O,SAAsB,IAAZ6O,EAA8B,IAAZA,EAA6B,GAAZA,EAA6B,GAAZA,GACpEH,GAAM3O,UAAY,SACZ2O,GAAAqV,aAAez/B,EAAEkqB,MAAQ,IAAO,IAChCE,GAAAgW,SAASpgC,EAAEoK,OAAO6B,WAAY,EAAgB,IAAZse,GAE/B,IAAA,MAAAvqB,KAAK+pB,GAAI0B,cACbzrB,EAAEkxB,UACP9G,GAAM+V,aAAangC,EAAEwwB,KAAMxwB,EAAE0wB,MAAO1wB,EAAE0wB,KAAM1wB,EAAEwwB,KAAMxwB,EAAEyV,QAASzV,EAAE0V,SACjE0U,GAAMqV,YAAc,EACpBrV,GAAM3O,UAAY,OACZ2O,GAAA1O,SAAsB,IAAZ6O,EAA8B,IAAZA,EAA6B,GAAZA,EAA6B,GAAZA,GACpEH,GAAM3O,UAAY,OAClB2O,GAAMqV,YAAcz/B,EAAE0H,QAAUi1B,GAAY,EAAI,GAChDvS,GAAMgW,SAASpgC,EAAEhB,KAAM,EAAgB,IAAZurB,GAE/B,CAGFgU,GAAa9f,UAET0Z,GAAQ7a,SAASkhB,GAAY/f,UACjC2L,GAAMqV,YAAc,EAEpBrV,GAAM+V,aAAahW,GAASlX,MAAQ,KAAM,EAAG,EAAGkX,GAASlX,MAAQ,KAAM,EAAGsX,GAAaoR,GAAOz5B,OAAS,IAAOimB,GAAkC,IAAhBwT,GAAOz5B,QAAgB,GAAKimB,GAAmC,IAAjByT,GAAQ15B,SAAiB,MACvMkoB,GAAMnO,UAAUqgB,GAAI+D,YAA6B,KAAhBxB,GAAKI,SAAkB,KAAM,GAE9D7U,GAAMuV,iBACK,IAAA,MAAA3/B,KAAKuoB,GAAKG,MAAMmR,aAGvB,GAFJzP,GAAM3O,UAAY,OAEdkgB,GAAOz5B,OAAS,EAAG,CACjBy5B,GAAOz5B,OAAS,IAAMkoB,GAAMqV,YAActX,GAAkC,IAAhBwT,GAAOz5B,QAC9Dy5B,GAAOz5B,QAAU,MAAKkoB,GAAMqV,YAActX,GAAkB,EAAoB,EAAhBwT,GAAOz5B,SAChFkoB,GAAM8V,UAAY,SAELI,GAAAzB,GAAK7/B,KAAMgtB,EAAa,IAAPC,EAAyB,IAAZ1B,EAAiBJ,GAASlX,MAAoB,IAAZsX,GAC7E+V,GAAazB,GAAKr2B,OAAQwjB,EAAa,IAAPC,EAA0B,KAAZ1B,EAA8B,IAAZA,EAAkBJ,GAASlX,MAAoB,IAAZsX,GACnG+V,+BAAyCzB,GAAK/1B,cAAekjB,EAAa,KAAPC,EAA0B,IAAZ1B,EAA8B,IAAZA,EAAkBJ,GAASlX,MAAoB,IAAZsX,GACtI+V,GAAkCzB,qBAAAA,GAAK71B,UAAWgjB,EAAa,KAAPC,EAA0B,IAAZ1B,EAA6B,IAAZA,EAAkBJ,GAASlX,MAAoB,IAAZsX,GAE1HH,GAAMqV,YAAc,EACpBrV,GAAM+V,aAAa,EAAG,EAAG,EAAG,EAAGnU,EAAMC,GAC/B,MAAAsU,EAAmB,GAAZhW,GAAkBoR,GAAOz5B,OAAS,IAvoCpCqN,IAAc,EAAIvI,KAAKypB,IAAIlhB,EAAIvI,KAAK6Y,GAAK,GAuoCEsI,CAAiC,IAAhBwT,GAAOz5B,QAAgB,GACxFs+B,EAAmB,IAAZjW,EACToR,GAAOz5B,QAAU,MAAKkoB,GAAMqV,YAActX,GAAkB,EAAoB,EAAhBwT,GAAOz5B,SAC3EkoB,GAAMnO,UAAUyK,GAAUpJ,QAAUgf,GAAImE,YAAcnE,GAAI92B,WAAY+6B,EAAO,GAAIC,EAAO,EAAGD,EAAMC,EACnG,CAEApW,GAAMqV,YAAc,EACdrV,GAAA+V,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG5V,GAAaoR,GAAOz5B,OAAS,IAAOimB,GAAkC,IAAhBwT,GAAOz5B,QAAgB,GAAKimB,GAAmC,IAAjByT,GAAQ15B,SAAiB,MAC3J28B,GAAKxG,WACDjO,GAAA6V,KAAsB,IAAZ1V,2BAChBH,GAAM8V,UAAY,QACZ9V,GAAAgW,SAASjX,GAAKzR,SAAUyS,GAASlX,MAAoB,IAAZsX,EAA8B,MAAZA,GAC7D6N,GAAQ9a,UACJ8M,GAAA6V,KAAsB,IAAZ1V,EAAAA,yBACVH,GAAAgW,SAASjX,GAAKrR,OAAQqS,GAASlX,MAAoB,IAAZsX,EAA8B,KAAZA,KAGnEH,GAAM8V,UAAY,SACZ9V,GAAA6V,KAAsB,KAAZ1V,EAAAA,yBAChBH,GAAMgW,SAASvB,GAAK1nB,MAAO6U,EAAkB,MAAZzB,GACjCH,GAAMqV,YAAc9D,GAAOz5B,OAAS,IAAOimB,GAAkC,IAAhBwT,GAAOz5B,QAAgB,EAAIimB,GAAmC,IAAjByT,GAAQ15B,QAC5GkoB,GAAA6V,KAAsB,IAAZ1V,EAAAA,yBAChBH,GAAMgW,SAASvB,GAAKO,OAAQpT,EAAkB,KAAZzB,GAElCH,GAAMqV,YAAc,EACdrV,GAAA+V,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG5V,GAAaoR,GAAOz5B,OAAS,IAAO,EAAIimB,GAAkC,IAAhBwT,GAAOz5B,QAAgBimB,GAAmC,IAAjByT,GAAQ15B,SAAiB,MAC9JkoB,GAAM8V,UAAY,QAClBI,GAAazB,GAAKj2B,MAAOuhB,GAASlX,MAAoB,IAAZsX,EAAkBJ,GAAShX,OAAqB,IAAZoX,EAA8B,IAAZA,EAAkByB,EAAOzB,GACzHH,GAAM8V,UAAY,OACLI,GAAAzB,GAAK7/B,KAAkB,IAAZurB,EAAkBJ,GAAShX,OAAqB,IAAZoX,EAA8B,IAAZA,EAAkByB,EAAOzB,GACvGH,GAAMuV,iBAENvV,GAAM3O,UAAY,OACdkgB,GAAOz5B,OAAS,IAAMkoB,GAAMqV,YAActX,GAAkC,IAAhBwT,GAAOz5B,QAClEkoB,GAAMqV,YAAc,EAAItX,GAAmC,IAAjByT,GAAQ15B,QACjDkoB,GAAA6V,KAAsB,GAAZ1V,EAAH,yBACbH,GAAM8V,UAAY,OACZ9V,GAAAgW,SAAY/X,GAAAA,GAASE,GAAK2W,MAAQtC,GAAYF,GAAUA,OAAYrU,GAASuU,MAAa9K,GAAQje,OAAoB,IAAZ0W,EAA8B,GAAZA,GAC5HH,GAAAgW,SAASjX,GAAK/U,OAAQ+V,GAASlX,MAAoB,KAAZsX,EAA8B,GAAZA,GAC/DH,GAAM8V,UAAY,QACZ9V,GAAAgW,SAASpD,GAAWG,OAAQhT,GAASlX,MAAoB,IAAZsX,EAA8B,GAAZA,GACjEsU,GAAKxG,UAAYA,GAAS/a,UAC5B8M,GAAM8V,UAAY,QAClB,CAAC/W,GAAKtS,SAAS,GAAIsS,GAAKtS,SAAS,GAAIsS,GAAKtS,SAAS,GAAIsS,GAAKtS,SAAS,GAAIsS,GAAKtS,SAAS,GAAIsS,GAAKtS,SAAS,GAAIsS,GAAKtS,SAAS,IAAIyY,SAAQ,CAACoR,EAAKxF,KAErI9Q,GAAA3O,UADa,CAAC,UAAW,UAAW,OAAQ,UAAW,OAAQ,UAAW,QACnDyf,GAC7B9Q,GAAMgW,SAASM,EAAIz0B,WAAYke,GAASlX,MAAoB,IAAZsX,EAAkBJ,GAAShX,OAAS,EAAIoX,GAAa2Q,EAAM,KAAO,GAAG,IAEvH9Q,GAAM3O,UAAY,OAClB2O,GAAM8V,UAAY,OACZ9V,GAAAgW,kBAAkBjX,GAAKlR,aAA0B,IAAZsS,EAAkBJ,GAAShX,OAAS,EAAgB,IAAZoX,GAC7EH,GAAAgW,SAAS,SAASjX,GAAKpR,aAA0B,IAAZwS,EAAkBJ,GAAShX,OAAS,EAAgB,IAAZoX,GACnFH,GAAM8V,UAAY,SAClB/W,GAAKrS,OAAOwY,SAAQ,CAACoR,EAAKxF,KAElB9Q,GAAA3O,UADa,CAAC,OAAQ,UAAW,UAAW,UAAW,WAChCyf,GACvB9Q,GAAAgW,SAASM,EAAIz0B,WAAYse,GAAa2Q,EAAM,KAAQ,IAAK/Q,GAAShX,OAAqB,GAAZoX,EAAe,KAGhGoR,GAAOz5B,QAAU,KAAOy5B,GAAOz5B,OAAS,EAAGkoB,GAAMqV,YAAc,EAAItX,GAAkB,EAAoB,EAAhBwT,GAAOz5B,QAC/FkoB,GAAMqV,YAAc,EAAItX,GAAmC,IAAjByT,GAAQ15B,QACnDy5B,GAAOz5B,QAAU,KAA8B,MAAvB28B,GAAKQ,gBAAwBR,GAAKQ,eAAejV,IACzEuR,GAAOz5B,QAAU,KAAsB,MAAfqmB,GAAK1T,QAAgB0T,GAAK1T,OAAOuV,GAAOsS,GAASH,GAAY,KACrF1V,GAAcvJ,SAASghB,GAAgB7f,UAC3C2L,GAAMuV,gBACR,CArPegB,EAAA,MAAA,IACDC,GAAW,CACTA,IAAA,EACZxtB,EAAMyqB,OACG5W,GAAA3F,UAAU1C,IAAI,YACvBwL,GAAMyW,yBAA2B,cACjCzW,GAAMuV,iBACNvV,GAAMqV,YAAc,EACdqB,MAAAA,EAAc/B,GAAWC,eAC/B5U,GAAMnO,UAAU6kB,KAAgBtgB,EAAWsgB,EAAa3W,GAAU,IAClEC,GAAM3O,UAAY,OAClB2O,GAAMqV,YAAc1V,GAAIU,WACxBL,GAAM1O,SAAS,EAAG,EAAGyO,GAASlX,MAAOkX,GAAShX,QAC9C9T,KAAKmkB,YAAW,KACd,IAAKod,GAAW,OAChB,MAAMG,EAAa,CAAC,KAAM,KAAM,KAAM,MAAMn0B,QAAQqlB,GAAUzwB,MAAM,EAAG,GAAGw/B,qBAC1E5tB,EAAMjR,KAAKm6B,GAAgByE,YAAAA,EAAa,EAAI,EAAIA,QAAiC,CAAEE,MAAM,IACzFpF,GAAQx5B,QACRw5B,GAAQ15B,OACRgnB,GAAKvgB,MAAQ1E,OAAO,OAAOg9B,KAAKjP,KAChCkP,GAAWhY,GAAKvQ,QAAyB,IAAjBmR,GAAIY,SAAgBtD,GAAY1mB,MAAK,GAC5D,IACL,CACgB,MAAZwgC,IAqPN,SAAiBC,GACfhX,GAAMuV,iBACNvV,GAAMoV,UAAU,EAAG,EAAGrV,GAASlX,MAAOkX,GAAShX,QAC/CiX,GAAMqV,YAAc,EACdqB,MAAAA,EAAc/B,GAAWC,eAC/B5U,GAAMnO,UAAU6kB,KAAgBtgB,EAAWsgB,EAAa3W,GAAU,IAClEC,GAAM3O,UAAY,OAClB2O,GAAMqV,YAAc1V,GAAIU,WACxBL,GAAM1O,SAAS,EAAG,EAAGyO,GAASlX,MAAOkX,GAAShX,QAC9CiX,GAAMyW,yBAA2B,kBACjCzW,GAAMqV,YAAc,EACpB,MAAM4B,EAAI,mBACVjX,GAAM+V,aAAahW,GAASlX,MAAQkX,GAAShX,OAASkuB,EAAG,GAAIlX,GAAShX,OAASkuB,EAAGlX,GAAShX,OAAQgX,GAAShX,OAASkuB,EAAG,GACxHjX,GAAM1O,SAAS,EAAG,EAAG,EAAGyM,GAAmBmZ,GAA+B,KAAzBzF,GAAQ35B,OAAS,QAClEkoB,GAAMuV,iBACNvV,GAAMyW,yBAA2B,mBACjC,MAAMU,GAAQpX,GAASlX,MAAQkX,GAAShX,OAASkuB,IAAM,GAAK,EAAIA,GAChEjX,GAAM+V,aAAaoB,EAAO,IAAK,EAAG,EAAGA,EAAO,IAAKxX,GAAIiC,KAAc,EAAPuV,EAAUxX,GAAIkC,KAAc,IAAPsV,GACjFnX,GAAMnO,UAAUqgB,GAAIkF,WAAY,IAAK,GAAI,KAAM,KAC/CpX,GAAMqV,YAAc6B,IAAMzF,GAAQ35B,OAAS,KAAQ,KACnDkoB,GAAMnO,UAAUqgB,GAAImF,WAAY,IAAK,KACrCrX,GAAMyW,yBAA2B,cACjCzW,GAAMqV,YAAc,EACpBrV,GAAMnO,UAAUqgB,GAAIoF,WAAY,IAAMvZ,GAAmBmZ,GAAsB,KAAjBzF,GAAQ35B,SAAkB,IAAK,GAAI,GAAI,IAErGkoB,GAAM3O,UAAY,OAClB2O,GAAM8V,UAAY,OAClBI,GAAahZ,GAAU3mB,OAAS2mB,GAAU6X,YAAa,IAAMhX,GAAmBmZ,GAAsB,KAAjBzF,GAAQ35B,SAAkB,IAAK,IAAK,GAAI,MAC7H,MAAMy/B,EAAYrB,GAAarO,GAAW,IAAM9J,GAAmBmZ,GAAsB,KAAjBzF,GAAQ35B,SAAkB,IAAK,IAAK,GAAI,KAChHkoB,GAAM6V,KAAO,2BAEb7V,GAAMqV,YAAc6B,GAA+B,MAAzBzF,GAAQ35B,OAAS,OAC3C,MAAM0/B,EAAY,IAA6C,IAAvCN,GAA+B,MAAzBzF,GAAQ35B,OAAS,OACzC2/B,EAAY,IAA6C,IAAvCP,GAA+B,MAAzBzF,GAAQ35B,OAAS,OACzCkoB,GAAAnO,UAAUqgB,GAAIwF,WAAY,IAAMF,EAAY,EAAG,IAAMA,EAAY,EAAGA,EAAWA,GACrFxX,GAAMnO,UAAUqgB,GAAIyF,MAAM5Y,GAAKhR,YAAa,IAAM0pB,EAAY,EAAG,IAAMA,EAAY,EAAGA,EAAWA,GAEjGzX,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,MAC3CkoB,GAAM3O,UAAY2lB,EAAS5nB,aAC3B4Q,GAAMgW,SAASgB,EAAS3nB,WAAY,IAAK,KACzC2Q,GAAM3O,UAAY,OAClB2O,GAAM8V,UAAY,SAClB9V,GAAMgW,SAASgB,EAAS1nB,UAAW,KAAM,KACzC0Q,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,OAC3CkoB,GAAM8V,UAAY,QAClB9V,GAAMgW,SAASgB,EAASznB,WAAY,KAAM,KAC1CyQ,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,MAC3CkoB,GAAM8V,UAAY,OAClB9V,GAAMgW,SAASjX,GAAKrR,OAAQ,IAAK,KACjCsS,GAAMgW,SAASjX,GAAKjS,SAASjL,WAAY,KAAM,KAC/Cme,GAAM3O,UAAY2lB,EAASvnB,eACrBuQ,GAAAgW,SAAuB,IAAdrW,GAAI9kB,MAAc,GAAKm8B,EAAStnB,aAAa/Y,QAAQ,UAAWgpB,GAAI9kB,MAAM0S,QAAQ,IAAK,IAAM3Q,KAAKyV,IAAIklB,EAAW,KAAM,KACtIvX,GAAM3O,UAAY2lB,EAASrnB,eAC3BqQ,GAAMgW,SAASgB,EAASpnB,aAAc,KAAM,KAC5CoQ,GAAM3O,UAAY,OAClB2O,GAAM8V,UAAY,SAClB9V,GAAM6V,KAAO,2BACb7V,GAAMqV,YAAc6B,GAA+B,GAAzBzF,GAAQ35B,OAAS,OAC3CkoB,GAAMgW,SAASjX,GAAKzR,SAAU,KAAM,KACpC0S,GAAM6V,KAAO,2BACb7V,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,MAC3CkoB,GAAMgW,SAASjX,GAAK5R,QAAQtL,WAAY,IAAK,KAC7Cme,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,OAC3CkoB,GAAMgW,SAASjX,GAAK/R,KAAKnL,WAAY,KAAM,KAC3Cme,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,OACrCkoB,GAAAgW,SAASjX,GAAKtS,SAAS,GAAG5K,WAAY,KAAM,KAClDme,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,OACrCkoB,GAAAgW,SAASjX,GAAKtS,SAAS,GAAG5K,WAAY,KAAM,KAClDme,GAAM6V,KAAO,2BACb,MAAM+B,EAAaV,GAAsG,GAAhG/Y,GAAK2T,UAAY,EAAIL,GAAQ35B,OAASqmB,GAAK2T,UAAY,GAAML,GAAQ35B,OAASqmB,GAAK2T,YAC5G9R,GAAMqV,YAAc,GAAM6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,MAAe8/B,EAChE5X,GAAM3O,UAAY,OAClB2O,GAAMxK,KAAK,IAAIqiB,OAAO,2FACtB7X,GAAMqV,YAAc,GAAM6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,OAAe8/B,EAChE5X,GAAM3O,UAAY,OAClB2O,GAAMxK,KAAK,IAAIqiB,OAAO,2FACtB7X,GAAM3O,UAAY,OAClB2O,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,MAAe8/B,EACpD5X,GAAAgW,SAAS,UAAUjX,GAAKtS,SAAS,KAAM,IAAK,KAC5CuT,GAAAgW,SAAS,SAASjX,GAAKtS,SAAS,KAAM,IAAK,KACjDuT,GAAMqV,YAAc6B,GAA+B,KAAzBzF,GAAQ35B,OAAS,OAAe8/B,EACpD5X,GAAAgW,SAAmBjX,UAAAA,GAAKtS,SAAS,KAAM,KAAM,KAC7CuT,GAAAgW,SAAkBjX,SAAAA,GAAKtS,SAAS,KAAM,KAAM,KAClDuT,GAAMuV,iBACNvV,GAAMyW,yBAA2B,mBACjCzW,GAAMqV,YAAc,EACpBrV,GAAM3O,UAAY,OACZqjB,MAAAA,EAAUC,GAAWmD,WAC3B9X,GAAMnO,UAAU6iB,KAAYte,EAAWse,EAAS3U,GAAU,IAC1DC,GAAM1O,SAAS,EAAG,EAAGyO,GAASlX,MAAOkX,GAAShX,QAC9CiX,GAAMyW,yBAA2B,aACnC,CAhVwBsB,CAAQhB,IAC9B3mB,GAAIilB,YAAc,EACZqB,MAAAA,EAAc/B,GAAWC,eAC/BxkB,GAAIyB,UAAU6kB,KAAgBtgB,EAAWsgB,EAAavmB,GAAQ,MAC9DC,GAAIiB,UAAY,OAChBjB,GAAIilB,YAAc,GAClBjlB,GAAIkB,SAAS,EAAG,EAAGnB,GAAOtH,MAAOsH,GAAOpH,QACxCqH,GAAIilB,YAAc,EAClBjlB,GAAIyB,UAAUkO,IAAW5P,GAAOtH,MAAQkX,GAASlX,OAAS,EAAG,GAE7DuH,GAAIqmB,yBAA2B,aAC3BrmB,GAAAylB,KAAsB,GAAZ1V,EAAH,yBACX/P,GAAIiB,UAAY,OAChBjB,GAAIilB,YAAc,GAClBjlB,GAAI0lB,UAAY,QACZ1lB,GAAA4lB,YAAY/gC,KAAKwlB,GAAG,OAAOxlB,KAAKwlB,GAAG,GAAG5c,KAAK,4BAAmCsS,GAAOtH,MAAQkX,GAASlX,OAAS,EAAgB,GAAZsX,EAAiBhQ,GAAOpH,OAAqB,GAAZoX,GACxJ/P,GAAIqmB,yBAA2B,aACjC,IAxlBA,MAAMuB,GAAcC,KAAyC,WAA7B3lC,SAAS4lC,iBAAgCzQ,GAAQF,GAAG,SAAiBqK,MACrGt/B,SAASC,iBAAiB,mBAAoBylC,IAC9C1lC,SAASC,iBAAiB,WAAYylC,IACtC,IAAIxB,IAAY,EACZO,GAAW,KACf,MAAMtC,GAAO,CACXC,QAAS,KACT5T,QAAS,KACTqX,YAActuB,MACdgrB,SAAU,EACVjgC,KAAM,GACNwJ,OAAQ,GACRM,YAAa,GACbE,QAAS,GACTJ,MAAO,GACPuO,MAAO,GACPioB,OAAQ,GACR/G,UAAU,EACVgH,eAAgB,KAChBC,eAAgB,MAElB,SAASlB,GAAQl2B,EAAmB3B,GAClCk2B,GAAYz6B,YAAYC,MACnB48B,GAAA0D,YAAcnvB,EAAMjR,KAAK+F,EAAM,CAClC3B,QAASA,QAAAA,EAAU,IAAM,EACzBi8B,aAAczY,GAAI9kB,MAClBw9B,SAAU1Y,GAAIa,YACd6S,SAAUhF,GAAUnb,QAAU,EAAI,GAEtC,CACA7L,eAAe4sB,GAAUn2B,EAAwB3B,GAC1C2B,EAAAiO,aAAe5P,QAAAA,EAAU,IAAM,EACpC2B,EAAKw6B,aAAe3Y,GAAI9kB,MACxBiD,EAAKy6B,OAAQ,QACPz6B,EAAK/F,MACb,CACA,MAAMo8B,GAAe,IAAIpgB,EAAU,CAEjCC,eAAiBpe,GAAgBu8B,IAAav8B,EAAE+B,KAAO/B,EAAEwf,SACzDnB,eAAAA,CAAgBre,GAAa,IAAA4iC,EACrB3F,MAAAA,GAAQV,GAAYv8B,EAAE+B,MAAQ/B,EAAEwf,UAC9BC,QAAAA,GAAYzf,EACpBoqB,GAAMqV,YAAc,EACpBrV,GAAM+V,aAAkC,EAArBpW,GAAIS,eAAoB,EAAG,EAAwB,EAArBT,GAAIS,eAAoBxqB,EAAEyV,QAASzV,EAAE0V,oBAErF+J,EAAQzY,KAAKC,MAAMg2B,EAAOxd,EAAQvf,wBAAYuf,EAAQA,EAAQvf,OAAS,IAAInE,KAAKquB,IACjFA,GAAM3O,UAAYzb,EAAEwb,MACpB4O,GAAMqV,YAAc,EAAIxC,EACxB,MAAM4F,EAAK,MAAQ,MAAS5F,EAAO,QAAUA,EAAO,QAAUA,EAAO,OAC1D35B,IAAAA,MAAAA,KAAKtD,EAAE0f,UAAW,CAC3B,MAAMojB,EAAKx/B,EAAE,IAAM,EAAI25B,GAAQ,EAAIA,EAAO,IACpC7S,GAAA1O,SAASonB,EAAK97B,KAAKypB,IAAIntB,EAAE,IAAMu/B,EAAK,EAAGC,EAAK97B,KAAKohB,IAAI9kB,EAAE,IAAMu/B,EAAK,EAAGA,EAAIA,EACjF,CACF,IAEIrE,GAAc,IAAIrgB,EAAU,CAEhCC,eAAiBpe,GAAeu8B,IAAav8B,EAAE+B,KAAO/B,EAAEwf,SACxDnB,eAAAA,CAAgBre,GACd,MAAMi9B,GAAQV,GAAYv8B,EAAE+B,MAAQ/B,EAAEwf,SAChC4K,GAAA+V,aAAa,EAAG,EAAG,EAAG,EAAGngC,EAAEyV,QAASzV,EAAE0V,SAC5C0U,GAAM6V,aAAelW,GAAIS,gBAAkB,IAAM,OAAS,MAASyS,EAAO,QAAUA,EAAO,QAAUA,EAAO,gCAC5G7S,GAAM8V,UAAY,SAClB9V,GAAM3O,UAAYzb,EAAEwb,MACpB4O,GAAMqV,YAAc,EAAIxC,EACxB7S,GAAMgW,SAASpgC,EAAE6T,KAAM,EAAyB,KAArBkW,GAAIS,eACjC,IAEIkU,GAAe,CACnB5d,KAAM,GACN6d,QAAAA,CAASxT,EAAwBzjB,GACzB,MAAEoZ,KAAAA,GAAS5kB,KAEb,GADJ4kB,EAAK5gB,OAAS,EACO,IAAjB6pB,GAAIY,SAAgB,CACtB,MAAMoY,EAAW/7B,KAAKyV,IAAIugB,GAAW3iB,KAAM,KAC3C,IAAA,MAAWra,KAAKmrB,EAAO,CACrB,GAAInrB,EAAEgjC,OAAQ,SACR9sB,MAAAA,EAAYlW,EAAE0H,QAAUA,EACf,IAAX1H,EAAErB,KACAuX,EAAY6sB,IAAejiB,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,IAC/D,IAAX1V,EAAErB,KACPuX,EAAY6sB,IAAejiB,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,IAC/D,IAAX1V,EAAErB,KACPqB,EAAEijC,YAAkBniB,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,GACnEQ,EAAY6sB,IAAejiB,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,IACpE,IAAX1V,EAAErB,MAAgBuX,EAAY6sB,IAAejiB,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,GAC9G,CACS,MAAA,GAAAmc,GAAQF,GAAG,QACT,IAAA,MAAA3xB,KAAKg7B,GAAWla,KACpB9gB,EAAE4V,WAAekL,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,IACtE1V,EAAE2V,WAAemL,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,IAC1D,aAAX1V,EAAErB,OAA0BmiB,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,IAChF1V,EAAEoW,WAAapW,EAAEqW,UAAcyK,EAAAA,EAAK5gB,QAAU,IAAIuW,EAAWzW,EAAEyV,QAASzV,EAAE0V,QAAS,EAAG1V,GAIhG,EACA4+B,OAAAA,CAAQzT,EAAwBzjB,EAAiBuL,GACzC,MAAE6N,KAAAA,GAAS5kB,KACjB,IAAA,MAAW4I,KAAQqmB,EAAO,CACxB,GAAIrmB,EAAKk+B,OAAQ,SACX9sB,MAAAA,EAAYpR,EAAK4C,QAAUA,EACjC,GAAIwO,EAAY,GAAK,MACjB,KAAc,IAAdpR,EAAKnG,MAAcuX,EAAY,KACnC,GAAIA,GAAqBpR,KAAAA,EAAKusB,WAAa,IAAMvsB,EAAKo+B,WAGpDp+B,EAAKqV,OAAS,EACTgP,GAAAjP,SAAS,EAAGpV,EAAKnG,MACtBmG,EAAKk+B,QAAS,OACLl+B,GAAc,IAAdA,EAAKnG,KAAY,CAE1B,GAAIuX,EAAY,EACd,IAAA,MAAWkmB,KAActb,EACC,IAApBsb,EAAWz9B,OACXw9B,GAAeC,EAAYt3B,GAAQmO,IACvCmpB,EAAWzlB,YAAa,IAGxB,GAAgB,IAAhB7R,EAAKqV,QACP,IAAA,MAAWiiB,KAActb,EACnBsb,GAAoB,IAApBA,EAAWz9B,QACXw9B,GAAeC,EAAYt3B,GAAQmO,GAEvC,CAAAnO,EAAKqV,OAAS,EACd,KAAA,OAEOjE,EAAY,IACrB9C,EAAMjR,KAAKm6B,GAAI6G,SAAU,CAAEV,SAAU1Y,GAAIc,cAC5B0T,GAAA3f,IAAIO,EAAS5H,QAAQzS,EAAKksB,SAAUlsB,EAAKmsB,SAAUnsB,IAC3DqkB,GAAAjP,SAAS,EAAG,GACjBpV,EAAKk+B,QAAS,EAChB,MAAA,GACuB,IAAdl+B,EAAKnG,KAAY,CAEtBuX,GAAAA,EAAY,GAAqB,IAAhBpR,EAAKqV,OACxB,IAAA,MAAWiiB,KAActb,EACC,IAApBsb,EAAWz9B,OAEXw9B,GAAeC,EAAYt3B,GAAQmO,IACvCmpB,EAAWzlB,YAAa,IAGxB,GAAgB,IAAhB7R,EAAKqV,OACP,IAAA,MAAWiiB,KAActb,EAAM,CAGzB,GAFoB,IAApBsb,EAAWz9B,MAEXw9B,GAAeC,EAAYt3B,GAAQmO,EAAO,SAC1C,IAAAmwB,EAAW/G,GAAiBD,EAAYt3B,GACxCu+B,EAAYv+B,EACZw+B,GAAW,EACJC,IAAAA,MAAAA,KAAYz+B,EAAKkrB,UAAW,CACrC,GAAIuT,EAASppB,OAAQ,SACjBopB,GAAAA,EAAS77B,QAAUA,EAAU,IAAM,MACnCy0B,GAAAA,GAAeC,EAAYmH,GAAYtwB,EAAO,SAC5CuwB,MAAAA,EAAenH,GAAiBD,EAAYmH,GAC9CC,EAAeJ,IACNA,EAAAI,EACCH,EAAAE,EACDD,GAAA,EAEf,CAEI,GAAoB,MAApBlH,EAAW/7B,OACbgjC,GAAAA,EAAUlpB,OAAS,GACdmpB,EAAU,WACN,IAAClH,EAAW/7B,MAAMgW,UAC3BgtB,EAAUlpB,OAAS,EACnBiiB,EAAW/7B,MAAMgW,SAAU,GACtBitB,GAAU,KAEnB,MACSptB,EAAY,IACrB9C,EAAMjR,KAAKm6B,GAAImH,SAAU,CAAEhB,SAAU1Y,GAAIc,cAC5B0T,GAAA3f,IAAIO,EAAS5H,QAAQzS,EAAKksB,SAAUlsB,EAAKmsB,SAAUnsB,IAC3DqkB,GAAAjP,SAAS,EAAG,GACjBpV,EAAKk+B,QAAS,EAChB,KACK,CAEL,GAAkB,IAAdl+B,EAAKnG,MAAcmG,EAAKm+B,YAAa,CAElC,IAAAjhC,YAAYC,MAAQ6C,EAAKm+B,aAAen+B,EAAKE,UAAY,KAAQF,EAAK8pB,cAErE9pB,EAAKo+B,WAAa,GAAM,GACnBp+B,EAAKo+B,WAAa,GAAM,EADW3E,GAAA3f,IAAIO,EAAS5H,QAAQzS,EAAKksB,SAAUlsB,EAAKmsB,SAAUnsB,IAEtFA,EAAKo+B,WAAa,GAAM,GAAgB3E,GAAA3f,IAAIO,EAAS/H,KAAKtS,EAAKksB,SAAUlsB,EAAKmsB,SAAUnsB,IAC5FA,EAAAm+B,YAAcjhC,YAAYC,OAE7BiU,EAAYpR,EAAK8pB,YAAc,GAAK,CACjC9pB,EAAKqV,QAAQgP,GAAKjP,SAASpV,EAAKqV,OAASrV,EAAKo+B,WAAY,GAC3DhtB,EAAYpR,EAAK8pB,YAAc,IAAG9pB,EAAKk+B,QAAS,GACpD,QACF,CACAl+B,EAAK4+B,YAAa,CACpB,CACA,IAAA,MAAWtH,KAActb,EAAM,CAC7B,GAAIhc,EAAKm+B,YAAa,CAEpB,GAAwB,IAApB7G,EAAWz9B,KAAY,SAC3B,GAAIw9B,GAAeC,EAAYt3B,IAASmO,EAAO,CAC7CnO,EAAK4+B,YAAa,EAClB,KACF,CACA,QACF,CACItH,GAAoB,IAApBA,EAAWz9B,MAEXy9B,EAAW1lB,QAEXylB,GAAeC,EAAYt3B,GAAQmO,EAAO,SAC1C0wB,IAAAA,EAAaztB,EACbktB,EAAW/G,GAAiBD,EAAYt3B,GACxCu+B,EAAYv+B,EACZw+B,GAAW,EACJC,IAAAA,MAAAA,KAAYz+B,EAAKkrB,UAAW,CACjCuT,GAAAA,EAASppB,QACTopB,EAASN,YAAa,SACpBW,MAAAA,EAAgBL,EAAS77B,QAAUA,EACzC,GAAIk8B,EAAgB,GAAK,MACrBL,GAAkB,IAAlBA,EAAS5kC,MAAcilC,EAAgB,KACvCzH,GAAeC,EAAYmH,GAAYtwB,EAAO,SAC5CuwB,MAAAA,EAAenH,GAAiBD,EAAYmH,GAC9CC,EAAeJ,IACJO,EAAAC,EACFR,EAAAI,EACCH,EAAAE,EACDD,GAAA,EAEf,CACA,GAAIK,EAAa,IAAM,CACrB,GAAIvH,EAAWzlB,WAAY,SAC3B0sB,EAAUlpB,OAAS,EACTkpB,EAAAxS,QAAU7uB,YAAYC,KAAI,KAC/B,CACL,MAAM4hC,EAAQR,EACTla,GAAA/O,QAAQpT,KAAKoc,IAAIugB,EAAsC,MAApBE,EAAAA,EAAMxS,aAAsB,IACpEje,EAAMjR,KAAKm6B,GAAIwH,SAAU,CAAErB,SAAU1Y,GAAIc,cACrC8Y,EAAa,KACfE,EAAMX,WAAa,EACN3E,GAAA3f,IAAIO,EAAS/H,KAAKysB,EAAM7S,SAAU6S,EAAM5S,SAAU4S,IAC/DrF,GAAY5f,IAAImB,EAAQC,MAAM6jB,EAAM7S,SAAU6S,EAAM5S,YAC3C0S,EAAa,KACtBE,EAAMX,WAAa,EACN3E,GAAA3f,IAAIO,EAAS5H,QAAQssB,EAAM7S,SAAU6S,EAAM5S,SAAU4S,IAClErF,GAAY5f,IAAImB,EAAQC,MAAM6jB,EAAM7S,SAAU6S,EAAM5S,YAC3C0S,GAAsBE,KAAAA,EAAMxS,WAAa,GAClDwS,EAAMX,WAAa,EACN3E,GAAA3f,IAAIO,EAAS5H,QAAQssB,EAAM7S,SAAU6S,EAAM5S,SAAU4S,KACzDF,GAAsBE,KAAAA,EAAMxS,WAAa,GAClDwS,EAAMX,WAAa,EACN3E,GAAA3f,IAAIO,EAAS5H,QAAQssB,EAAM7S,SAAU6S,EAAM5S,SAAU4S,IAClErF,GAAY5f,IAAImB,EAAQE,KAAK4jB,EAAM7S,SAAU6S,EAAM5S,aAEnD4S,EAAMX,WAAa,EACN3E,GAAA3f,IAAIO,EAAS/H,KAAKysB,EAAM7S,SAAU6S,EAAM5S,SAAU4S,IAC/DrF,GAAY5f,IAAImB,EAAQE,KAAK4jB,EAAM7S,SAAU6S,EAAM5S,YAElC,IAAf4S,EAAMllC,OAAYklC,EAAM1pB,OAAS0pB,EAAMX,WAC7C,CACIG,GAAAA,EAAUlpB,QACPgP,GAAAjP,SAASmpB,EAAUlpB,OAAQ,GAChCkpB,EAAUL,QAAS,IAETK,EAAAJ,YAAcjhC,YAAYC,MACpCohC,EAAUK,YAAa,GAEzBtH,EAAW1lB,QAAS,EACpB2sB,EAAUU,WAAaJ,GAClBL,EAAU,KACjB,CACIzR,GAAQF,GAAG,SAAW7sB,EAAKm+B,aAAen+B,EAAK4+B,aACjD5+B,EAAKqV,OAAS,EACTgP,GAAAjP,SAAS,EAAG,GACjBpV,EAAKk+B,QAAS,EAElB,CACF,CACF,GAEI1E,GAAkB,IAAIngB,EAAU,CAEpCC,eAAiBpe,GAAmBA,EAAE+B,OAAS,EAC/Csc,eAAAA,CAAgBre,GACdoqB,GAAMqV,YAAc,IACdrV,GAAA+V,aAAa,EAAG,EAAG,EAAG,EAAGngC,EAAEyV,QAASzV,EAAE0V,SAC5C0U,GAAM3O,UAAYzb,EAAEwb,MACpB4O,GAAM4Z,YACA5Z,GAAA6Z,IAAI,EAAG,EAAmB,GAAhBla,GAAIQ,UAAiB,EAAG,EAAIvjB,KAAK6Y,IACjDuK,GAAMxK,MACR,IAEIskB,GAAW,IAAIC,EAAc5pB,IAmEnC,SAAS6pB,GAAOjjC,GACRkjC,MAAAA,EAAO9pB,GAAOmP,wBACb,MAAA,CACLpa,GAAInO,EAAImjC,QAAUD,EAAKE,MAAQhqB,GAAOiqB,YAAcjqB,GAAOtH,OAASsH,GAAOtH,MAAQkX,GAASlX,OAAS,EACrGqZ,GAAInrB,EAAIsjC,QAAUJ,EAAKK,KAAOnqB,GAAOoqB,aAAepqB,GAAOpH,OAE/D,CAvEA+wB,GAASU,cAAc,CACrBC,iBAAAA,CAAkB99B,GACVm0B,MAAAA,EAAMn0B,EAAI+9B,QACRx1B,EAAAA,EAAGgd,EAAAA,GAAM8X,GAAOr9B,GACZ,IAARm0B,EAAWF,GAAWC,SAAS,QAAS,EAAG3rB,EAAGgd,GACjC,IAAR4O,EAAWF,GAAWC,SAAS,QAAS,EAAG3rB,EAAGgd,GAClD0O,GAAWC,SAAS,QAAS,GAAKC,EAAK5rB,EAAGgd,GAClCwP,GAAAb,SAAS3rB,EAAGgd,EAC3B,EACAyY,iBAAAA,CAAkBh+B,GACVm0B,MAAAA,EAAMn0B,EAAIi+B,SACR11B,EAAAA,EAAGgd,EAAAA,GAAM8X,GAAOr9B,GACxB,IAAA,IAAS/G,EAAI,EAAGA,EAAI,GAAIA,IAAM,EAExBk7B,EAAMl7B,EAAGg7B,GAAWK,OAAO,QAASr7B,EAAGsP,EAAGgd,GAC9B0O,GAAAQ,WAAW,QAASx7B,EAExC,EACAilC,eAAAA,CAAgBl+B,GACd,MAAMm0B,EAAMn0B,EAAI+9B,OACJ,IAAR5J,EAAsBF,GAAAQ,WAAW,QAAS,GAC7B,IAARN,EAAsBF,GAAAQ,WAAW,QAAS,GACnCR,GAAAQ,WAAW,QAAS,GAAKN,EAC3C,IAGFgJ,GAASgB,iBAAiB,CACxBC,eAAAA,CAAgBp+B,GACV8qB,GAAQF,GAAG,UACC,UAAZ5qB,EAAIgB,IAAiBkf,GAAShW,QACgD,MAAzE+pB,GAAWla,KAAKya,MAAKv7B,GAAgB,aAAXA,EAAErB,MAAuBqB,EAAEwV,KAAOzO,EAAIQ,QACvEyzB,GAAWC,SAAS,WAAYl0B,EAAIQ,KAAM69B,IAAKA,KAEnD,EACAC,aAAAA,CAAct+B,GACR8qB,GAAQF,GAAG,SACC,UAAZ5qB,EAAIgB,KAA4BizB,GAAAQ,WAAW,WAAYz0B,EAAIQ,KACjE,IAEFlI,KAAK1C,iBAAiB,QAAQ,KAC5Bq+B,GAAWnc,MAAM,WAAU,IAG7BqlB,GAASoB,cAAc,CACrBC,kBAAAA,CAAmBx+B,GACN/G,IAAAA,MAAAA,KAAK+G,EAAIy+B,eAAgB,CAClC,MAAQl2B,EAAAA,EAAGgd,EAAAA,GAAM8X,GAAOpkC,GACxBg7B,GAAWC,SAAS,QAASj7B,EAAEylC,WAAYn2B,EAAGgd,GACjCwP,GAAAb,SAAS3rB,EAAGgd,EAC3B,CACF,EACAoZ,iBAAAA,CAAkB3+B,GACL/G,IAAAA,MAAAA,KAAK+G,EAAIy+B,eAAgB,CAClC,MAAQl2B,EAAAA,EAAGgd,EAAAA,GAAM8X,GAAOpkC,GACxBg7B,GAAWK,OAAO,QAASr7B,EAAEylC,WAAYn2B,EAAGgd,EAC9C,CACF,EACAqZ,gBAAAA,CAAiB5+B,GACf,IAAA,MAAW/G,KAAK+G,EAAIy+B,eAA2BxK,GAAAQ,WAAW,QAASx7B,EAAEylC,WACvE,EACAG,mBAAAA,CAAoB7+B,GAElB,IAAA,MAAW/G,KAAK+G,EAAIy+B,eAA2BxK,GAAAQ,WAAW,QAASx7B,EAAEylC,WACvE,IAUF,MAAMnmB,GAAa,CACjBxa,KAAM,CAAC,EACPya,MAAO,CAAC,EACR,YAAMjB,CAAOtf,EAAc6c,EAAkBjR,EAAeuV,GAAY,GACjEjkB,KAAA4I,KAAK9F,GAAQ,IAAIkhB,EAAWrE,EAAKjR,EAAOuV,GAChC,QAATnhB,IAAqB9C,KAAA4I,KAAK+gC,OAAS,IAAI3lB,QTt1B/CzO,eAAiCoK,EAAkBL,EAAeM,EAAQ,KAClE,MAAAC,EAAWR,ESq1B6D,WTp1BxEf,EAAMF,EAAUuB,EAAI5I,MAAO4I,EAAI1I,OAAQ,CAAE6I,oBAAoB,IAC/DxB,EAAAyB,UAAUJ,EAAK,EAAG,GACtB,IAAA,IAASK,EAAK,EAAGA,EAAKL,EAAI1I,OAAQ+I,GAAMJ,EACtC,IAAA,IAASK,EAAK,EAAGA,EAAKN,EAAI5I,MAAOkJ,GAAML,EAAO,CAC5C,MAAMM,EAAU5B,EAAImB,aAAaQ,EAAID,EAAIJ,EAAOA,GAChD,IAAA,IAAS9b,EAAI,EAAGA,EAAIoc,EAAQlU,KAAKhI,OAAS,EAAGF,IAC3Coc,EAAQlU,KAAS,EAAJlI,GAAS+b,EAAS,GAC/BK,EAAQlU,KAAS,EAAJlI,EAAQ,GAAK+b,EAAS,GACnCK,EAAQlU,KAAS,EAAJlI,EAAQ,GAAK+b,EAAS,GACnCK,EAAQlU,KAAS,EAAJlI,EAAQ,IAAM+b,EAAS,GAAK,IAEvCvB,EAAA6B,aAAaD,EAASD,EAAID,EAChC,CAEK,OAAA5H,kBAAkBkG,EAAID,OAC/B,CSq0BgEurB,CAAWjqB,GAAiBjR,GAC1F,EACA,cAAMm7B,CAASC,EAAmBp7B,EAAe2R,EAAiBC,EAAiBypB,GAAY,EAAOzmB,GACpG,MAAM0mB,QAAe5pB,EAAS0pB,EAAMzpB,EAAQC,GACtC2pB,EAAaD,EAAO1hC,KAAIiN,SAAa,IAAIyO,QAAiBtE,EAAUC,EAAK,+BAAgCjR,KACzGw7B,EAAUF,EAAO1hC,KAAIiN,SAAa,IAAIyO,QAAiBtE,EAAUC,EAAK,+BAAgCjR,KAC5Go7B,EAAKvyB,QACLvX,KAAKqjB,MAAM8mB,QAAU,CACnB5mB,cAAerjB,QAAQob,IAAI2uB,GAC3BxmB,WAAYsmB,EAAY,EAAI,EAC5BzmB,SAA6B,EAAnBtb,OAAOsb,IAAiB,KAEpCtjB,KAAKqjB,MAAM+mB,KAAO,CAChB7mB,cAAerjB,QAAQob,IAAI4uB,GAC3BzmB,WAAYsmB,EAAY,EAAI,EAC5BzmB,SAA6B,EAAnBtb,OAAOsb,IAAiB,KAEpC0mB,EAAO5W,SAAQzT,GAAOA,EAAIpI,SAC5B,GAGF8yB,OAAO5pC,iBAAiB,QAAQ,KA8DtB,WA5DC4d,GAAAA,GAAA+G,UAAU1C,IAAI,QAGrBsK,GAAS,gBMv3BbzX,gBACE+0B,gBAAAA,EAAmBC,QACnBC,aAAAA,EAAgBD,QAChBE,cAAAA,EAAgBp3B,EAACk3B,EAAcG,EAAeC,KAA9Bt3B,GAChBu3B,eAAAA,EAAiBx7B,SACjBy7B,yBAAAA,EAA2B9iC,UACzB,IACI+iC,MAAAA,EAAWhnC,CAACO,EAAgBtB,KAC1BN,MAAAA,E/BiGwBwC,IACpB,OAARA,EAAqB,YACb,IAARA,EAA0B,YACvBA,EAAIxB,YAAYX,K+BpGRioC,CAAmB1mC,GAE5B,IAAA2mC,EAAW5iC,OAAO/D,GAClByR,EAAS1N,OAAO/D,GACpB,GAAIA,aAAiBjE,MAAO,CAAA,IAAA6qC,EACpBpnC,MAAAA,EAAuB,QAAvBA,EAAQQ,EAAMR,aAAS,IAAAonC,EAAAA,EAAA,sBACJD,EAArB3mC,EAAMvB,OAASL,EAAiB4B,EAAMtB,QAC1B,GAAGsB,EAAMvB,SAASuB,EAAMtB,UACxC,MAAMi8B,EAAMn7B,EAAM6M,QAAQs6B,GAAY,EAC7Bl1B,EAALkpB,EAAc,GAAGgM,MAAannC,EAAMyB,MAAM05B,EAAMgM,EAAShnC,UAC/C,GAAGgnC,UAAiBnnC,EAAM6C,MAAM,MAAMqF,KAAK,WAC3D,CACe,MAAXhJ,IAA4BioC,EAAAjoC,GAC1B,MAAAmoC,EAAa,IAAIzoC,MAASuoC,EAAStkC,MAAM,MAAM,KAC/CykC,EAAgB1oC,IAAAA,MAASqT,IAC/B20B,EAAcS,EAAY3pB,MAAMwG,WAAWojB,GAAU,EAElDhoC,KAAA1C,iBAAiB,SAAcoC,GAAAioC,EAASjoC,EAAEwB,MAAOxB,EAAEE,WACxDI,KAAK1C,iBAAiB,sBAAsBoC,GAAKioC,EAASjoC,EAAEuoC,UAC5D,MAAMC,EAAU91B,MAAMzS,EAAcwoC,EAAyB9pC,KAC3D,IAAKA,IAAgB,OAAA,EACf+pC,MAAAA,QAAgBzoC,kBAChB0oC,EAAa1oC,GAAAA,yBACb2oC,EAAa3oC,GAAAA,oBAInB,OAFgBwnC,EAAKxnC,KAAAA,gB/BkKlB,YAAmB4oC,GAClBvkC,MAAAA,EAAM/B,MAAMumC,KAAKD,EAAK,aAActmC,MAAQsmC,EAAK,GAAKA,GAAM5nC,GAAK,IAAI2S,IAAI3S,EAAG0kB,UAAUojB,OACtFC,EAAS,UAAWC,SAAcA,CAAK,CAA9B,CAA+B3kC,GACxC4kC,EAAO1jB,GAAO,IAAInoB,SAAQ,CAACK,EAASJ,KACxC,IAAKkoB,EAA4F,YAArFloB,EAAO,IAAIuE,aAAa,yBAAyByC,EAAI4E,KAAK,QAAS,iBACzEigC,MAAAA,EAASxrC,SAASsT,cAAc,UACtCk4B,EAAOt3B,OAAS,IAAMnU,EAAQyrC,GAC9BA,EAAOprC,QAAU,IAAMmrC,EAAKF,EAAMzsB,OAAO3a,OAAOgT,MAAKnX,GAAKC,EAAQD,KAAIyV,OAAMlT,GAAK1C,EAAO0C,KACxFmpC,EAAOx1B,IAAM6R,EACRG,SAASyjB,OAAMD,EAAOE,YAAc,aACzC1rC,SAAS4jB,KAAKzC,YAAYqqB,EAAM,IAElC,OAAOD,EAAKF,EAAMzsB,OAAO3a,MAC3B,C+B9KU0nC,CAAOb,GAAMv1B,OAFDlT,GAAa4nC,EAAcc,EAAS1oC,EAAEE,QAAQ8B,QAAQ,KAAM2mC,IAAU,MAGnFhqC,MACSipC,EAAAc,EAASE,GAAS,IACzB,EAFc,EAUnB,SANElqB,MAAM6qB,QAAQ,gBAAiB,CAAEC,IAAK,WAE5C/B,EAAgB,qBAC0B,IAAzBgC,UAAUC,YAA4BD,UAAUE,SAAS9jB,SAAS,UAAyC,IAA7B4jB,UAAUG,iBAC5E7B,IAY/B,SAA0BJ,GACxB,GAAI8B,UAAUI,UAAUhkB,SAAS,eAAgB,CAE/C,MAAMikB,EAAc,0BAA0B3H,KAAKsH,UAAUI,WACvD/0B,EAAO,oCACM,MAAfg1B,GAAuBr/B,WAAWq/B,EAAY,IAAM,OAAMnC,EAAa7yB,EAC7E,CACF,CAlBEi1B,CAAiBpC,UACNa,EAAQ,gBAAiB,6BAA6B,IAAMnoC,EAAY,uBAA8B,OAAA,EACjHonC,EAAgB,aAChB,MAAMuC,EAAyD,MAAzC,IAAIC,OAAQC,YAAY,aAC1C,UAAO1B,EAAQ,UAAW,4BAA4B,KAAOwB,GAAiB3pC,EAAY,eAAsB,OAAA,EACpHgU,EAAMmkB,KAAKwR,EAAgB1pC,KAAK2B,aAAe3B,KAAK6pC,UAAUC,uBACxDC,MAAAA,EAAiB1sC,SAASsT,cAAc,UAAUq5B,UAAU,cAAczkB,SAAS,mBACrF,aAAO2iB,EAAQ,WAAY,uBAAuB,KAAO6B,GAAkBhqC,EAAY,iBAY7FqS,eAA2Bs1B,SACKxoC,EAAYC,gBACKuoC,GACjD,CAdQuC,CAAYvC,GACX,IAFqG,CAG9G,CNk0BcvoC,CAAa,CACrBgoC,gBAAiBtd,GACjBwd,aAAc3iB,GACd4iB,cAAeziB,GACf4iB,eAAgBA,IAAMjf,GAAoB3F,MAAMqnB,QAAU,OAC1DxC,yBAA0BA,KACxBxO,GAAQjb,SAAU,EACVib,GAAAhb,UAAU+D,UAAU1C,IAAI,YAChC2Z,GAAQ70B,MAAMka,aAAe,eAAA,IAE7B,aACEkd,OAAO,yBACP0O,MAAAA,QA8CV/3B,eAA4B8S,GAEpB,MAAA1Q,cADa41B,MAAMllB,IACD1Q,OACpB,IACK,OAAAE,KAAKC,MAAMH,SAKX3B,GACGgS,OAAAA,GAAA,uBAAwBzG,MAAMwG,WAAW,eAAgB/R,EAAcjT,mBAAmB4U,MAAS,GACtG,IACT,CACF,CA3DsB61B,CAAaC,KAAK,iDAAiD13B,OAAM,IAAM,QAAS,CAExG5I,MAAO,CAAC,EACR+J,MAAO,CAAC,EACRw2B,YAAa,CAAC,EACdx1B,OAAQ,UAuDd3C,eAA4B+3B,GAMtBK,IAAAA,EAAY,EACZC,EAAW,EACf,MAAMC,EAA+B,CAAA,EAC9BtpC,OAAAsP,OAAOg6B,EAAMP,EAAIngC,OACjB5I,OAAAsP,OAAOg6B,EAAMP,EAAIp2B,OAExB,MAAM42B,EAAO,GACT,MAAe,QAAfR,EAAIp1B,QACN41B,EAAKnqC,QAAQY,OAAO6Y,QAAQkwB,EAAIngC,OAAO7E,KAAIiN,OAAOzS,EAAM0T,MACtD,MAAO6R,EAAK0lB,GAAOv3B,EAAI9P,MAAM,KACrBynB,QAAAC,IAAI/F,EAAK0lB,SACXR,MAAMllB,EAAK,CAAE2lB,eAAgB,gBAAiBv2B,MAAKlC,SAAWxN,EAAEkmC,SAAQx2B,MAAKlC,UAC3EoK,MAAAA,QAAYvH,kBAAkB61B,GACpC7N,GAAIt9B,GAAQ6c,EACHqN,GAAA,QAAQliB,KAAKC,MAAM4iC,IAAcG,EAAK9pC,OAAS,QAAO,IAC9D+R,OAAM,KACP63B,IACY/lB,GAAA,0BAA0B,IAAIpR,IAAI4R,EAAKG,SAASzY,YAAYA,aAAY,GACrF,KAEH+9B,EAAKnqC,QAAQY,OAAO6Y,QAAQkwB,EAAIp2B,OAAO5O,KAAIiN,OAAOzS,EAAM0T,YAChD+2B,MAAM/2B,EAAK,CAAEw3B,eAAgB,gBAAiBv2B,MAAKlC,SAAWxN,EAAEmmC,gBAAez2B,MAAKlC,UACxF6qB,GAAIt9B,SAAcoU,EAAMtP,OAAOyN,GACtB2X,GAAA,QAAQliB,KAAKC,MAAM4iC,IAAcG,EAAK9pC,OAAS,QAAO,IAC9D+R,OAAM,KACP63B,IACY/lB,GAAA,0BAA0B,IAAIpR,IAAID,EAAKgS,SAASzY,YAAYA,aAAY,GACrF,MAGE+9B,EAAAnqC,QAAQY,OAAO6Y,QAAQywB,GAAMvlC,KAAIiN,OAAOzS,EAAM0T,MACjD,MAAO6R,EAAK0lB,GAAOv3B,EAAI9P,MAAM,WACvB6mC,MAAMllB,EAAK,CAAE2lB,eAAgB,gBAAiBv2B,MAAKlC,SAAWxN,EAAEkmC,SAAQx2B,MAAKlC,UAC3EoK,MAAAA,QAAYvH,kBAAkB61B,GACpC,GAAW,MAAPF,GAAeA,EAAIzlB,WAAW,KAAM,CAChCtc,MAAAA,EAAO4S,EAAOhX,OAAO+X,EAAK3X,OAAO+lC,EAAIzoC,MAAM,KACjDqa,EAAIpI,QACA6oB,GAAAt9B,SAAcoU,EAAMtP,OAAOoE,GAAM+J,OAAMR,UACzC,MAAM44B,QAAcZ,MAAMD,EAAII,YAAY5qC,GAAO,CAC/CkrC,eAAgB,gBACfv2B,MAAKlC,SAAWzR,EAAEmqC,SACrB,OAAO71B,kBAAkB+1B,GAAO12B,KAAKmH,EAAOoC,WAAWvJ,MAAKlC,SAAY2B,EAAMtP,OAAOgZ,KAAK7K,OAAOC,IACnF6R,GAAA,4BAA4B/kB,KAAQkT,EAAIjT,sCAC7CmU,EAAMk3B,KAAK,KACnB,GAEL,MAAOhO,GAAIt9B,GAAQ6c,EACVqN,WAAQliB,KAAKC,MAAM4iC,IAAcG,EAAK9pC,OAAS,QAAO,IAC9D+R,OAAaC,IACdmY,QAAQ9pB,MAAM2R,GACJgS,GAAA,MAAM4lB,qBAA6B,0BAA0B,IAAIn3B,IAAI4R,EAAKG,SAASzY,YAAYA,cAAc,EAAI,GAC5H,WAGC7P,QAAQob,IAAIwyB,GACX,CAAEH,UAAAA,EAAWC,SAAAA,EACtB,CAjHUS,CAAaf,SO74BD/3B,eAAM+3B,EAA8BlN,GACxD,MAAMhjB,EAAU,CAAC,MAAO,QAAS,OAAQ,SAAU,WAAY,aAAc,OAAQ,SAAU,UAAW,QAAS,UAAW,YAC7G,MAAbkwB,EAAIngC,QAAemgC,EAAIngC,MAAQ,IAC7B,MAAEA,MAAAA,GAAUmgC,EAClB,IAAA,MAAWgB,KAASlxB,EACE,MAAhBjQ,EAAMmhC,KAAgBnhC,EAAMmhC,GAAS,SAEvClO,GAAW,MAAXA,EAAImO,IAAa,CACbjwB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,OAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,4CACtB3F,EAAImO,UAAYn2B,kBAAkBkG,EAAID,OACxC,CACI+hB,GAAa,MAAbA,EAAIuO,MAAe,CACfrwB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,4CACtB3F,EAAIuO,YAAcv2B,kBAAkBkG,EAAID,OAC1C,CACI+hB,GAAY,MAAZA,EAAIwO,KAAc,CACdtwB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,OAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,4CACtB3F,EAAIwO,WAAax2B,kBAAkBkG,EAAID,OACzC,CACI+hB,GAAc,MAAdA,EAAIyO,OAAgB,CAChBvwB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,4CACtB3F,EAAIyO,aAAez2B,kBAAkBkG,EAAID,OAC3C,CACI+hB,GAAgB,MAAhBA,EAAI0O,SAAkB,CAClBxwB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,OAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,sCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,sCACtB3F,EAAI0O,eAAiB12B,kBAAkBkG,EAAID,OAC7C,CACI+hB,GAAkB,MAAlBA,EAAI2O,WAAoB,CACpBzwB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,sCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,sCACtB3F,EAAI2O,iBAAmB32B,kBAAkBkG,EAAID,OAC/C,CACI+hB,GAAY,MAAZA,EAAI4O,KAAc,CACd1wB,MAAAA,EAAMF,EAAU,KAAM,MAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,OAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,0CACtB3F,EAAI4O,WAAa52B,kBAAkBkG,EAAID,OACzC,CACI+hB,GAAc,MAAdA,EAAI6O,OAAgB,CAChB3wB,MAAAA,EAAMF,EAAU,KAAM,MAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,0CACtB3F,EAAI6O,aAAe72B,kBAAkBkG,EAAID,OAC3C,CACI+hB,GAAe,MAAfA,EAAI8O,QAAiB,CACjB5wB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,OAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,sCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,0CACtB3F,EAAI8O,cAAgB92B,kBAAkBkG,EAAID,OAC5C,CACI+hB,GAAa,MAAbA,EAAI+O,MAAe,CACf7wB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,OAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,4CACtB3F,EAAI+O,YAAc/2B,kBAAkBkG,EAAID,OAC1C,CACI+hB,GAAe,MAAfA,EAAIgP,QAAiB,CACjB9wB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIkwB,UAAY,GAChBlwB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,wCACtBznB,EAAImwB,YAAc,UAClBnwB,EAAIowB,OAAO,IAAI3I,OAAO,4CACtB3F,EAAIgP,cAAgBh3B,kBAAkBkG,EAAID,OAC5C,CACI+hB,GAAY,MAAZA,EAAIiP,KAAc,CACdC,MAAAA,EAAa,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAChFC,EAAW,CAAC,QAAS,QAAS,SAAU,SAAU,SAAU,SAAU,SACtEjxB,EAAMF,EAAU,IAAK,MAC3B,IAAA,IAASta,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1Bwa,EAAIiB,UAAY,OAChBjB,EAAIkB,SAAS,EAAO,IAAJ1b,EAAS,IAAK,KAC9Bwa,EAAIiB,UAAY,UAChBjB,EAAIkB,SAAS,GAAQ,IAAJ1b,EAAU,GAAI,IAAK,KAChCwa,EAAAiB,UAAY+vB,EAAWxrC,GACrB0rC,MAAAA,EAAMD,EAASzrC,GACf+c,EAAO,GACP3X,GAAS,IAAa,EAAP2X,GAAY,EACxBskB,IAAAA,IAAAA,EAAI,EAAGA,EAAI,GAAIA,IAClBqK,GAAAA,GAAOrK,EAAI,EAAG,CACV,MAAA/xB,EAAIlK,EAAQi8B,EAAI,EAAItkB,EACpBuP,EAAIlnB,EAAQ4B,KAAKC,MAAMo6B,EAAI,GAAKtkB,EAAW,IAAJ/c,EAC7Cwa,EAAIkB,SAASpM,EAAGgd,EAAGvP,EAAMA,EAC3B,CAEJ,CACAuf,EAAIiP,WAAaj3B,kBAAkBkG,EAAID,OACzC,CACI+hB,GAAgB,MAAhBA,EAAIqP,SAAkB,CAClBnxB,MAAAA,EAAMF,EAAU,IAAK,MAC3BE,EAAImwB,YAAc,OAClB,IAAA,IAAS3qC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MAAMi9B,EAAOj9B,EAAI,GACbwa,EAAAkwB,WAAa,EAAIzN,IAAS,EAAI,GAClCziB,EAAIilB,YAAc,EAAIxC,EAChBhqB,MAAAA,EAAQgqB,GAAQ,GAAM,IACxBziB,EAAAoxB,WAAW,IAAM34B,EAAQ,EAAO,IAAJjT,EAAU,IAAMiT,EAAQ,EAAGA,EAAOA,EACpE,CACAqpB,EAAIqP,eAAiBr3B,kBAAkBkG,EAAID,OAC7C,CACI+hB,GAAkB,MAAlBA,EAAImF,WAAoB,CACpBjnB,MAAAA,EAAMF,EAAU,KAAM,KAC5BE,EAAIiB,UAAY,OAChBjB,EAAIilB,YAAc,GAClBjlB,EAAIkB,SAAS,EAAG,EAAG,KAAM,KACzBlB,EAAIiB,UAAY,UAGhBjB,EAAIkB,SAAS,EAAG,GAAI,KAAM,KAC1BlB,EAAIilB,YAAc,EAClBjlB,EAAIiB,UAAY,QAChBjB,EAAI0lB,UAAY,QAChB1lB,EAAIylB,KAAO,mBACPzlB,EAAA4lB,SAAS,OAAQ,IAAK,KACtB5lB,EAAA4lB,SAAS,aAAc,KAAM,KACjC5lB,EAAI0lB,UAAY,SAChB1lB,EAAIylB,KAAO,mBACPzlB,EAAA4lB,SAAS,UAAW,IAAK,KACzB5lB,EAAA4lB,SAAS,OAAQ,IAAK,KACtB5lB,EAAA4lB,SAAS,MAAO,KAAM,KACtB5lB,EAAA4lB,SAAS,OAAQ,KAAM,KAC3B9D,EAAImF,iBAAmBntB,kBAAkBkG,EAAID,OAC/C,CACI+hB,GAAkB,MAAlBA,EAAIkF,WAAoB,CACpBhnB,MAAAA,EAAMF,EAAU,IAAK,KACrBuxB,EAAWrxB,EAAIsxB,qBAAqB,GAAI,EAAG,IAAK,GAC7CD,EAAAE,aAAa,EAAG,uBAChBF,EAAAE,aAAa,EAAG,iBACzBvxB,EAAIiB,UAAYowB,EAChBrxB,EAAIkB,SAAS,GAAI,GAAI,IAAK,IAC1B4gB,EAAIkF,iBAAmBltB,kBAAkBkG,EAAID,OAC/C,CACI+hB,GAAkB,MAAlBA,EAAIoF,WAAoB,CACpBlnB,MAAAA,EAAMF,EAAU,GAAI,IAC1BE,EAAIiB,UAAY,OAChBjB,EAAIkB,SAAS,EAAG,EAAG,EAAG,IACtB4gB,EAAIoF,iBAAmBptB,kBAAkBkG,EAAID,OAC/C,CACA,MAAMyxB,EAAW,CAAC,WAAY,OAAQ,aAAc,aAAc,aAAc,cAChF,IAAA,MAAWxB,KAASwB,EACA,MAAd1P,EAAIkO,KACFlO,EAAAkO,SAAel2B,kBAAkBgG,EAAU,EAAG,GAAGC,SAGrD+hB,GAAiB,MAAjBA,EAAI92B,UAAmB,CACnBgV,MAAAA,EAAMF,EAAU,KAAM,GAC5BE,EAAIiB,UAAY,OAChBjB,EAAIkB,SAAS,EAAG,EAAG,KAAM,GACzB4gB,EAAI92B,gBAAkB8O,kBAAkBkG,EAAID,OAC9C,CACI+hB,GAAmB,MAAnBA,EAAI+D,YAAqB,CACrB7lB,MAAAA,EAAMF,EAAU,KAAM,IAC5BE,EAAIiB,UAAY,UAChBjB,EAAIkB,SAAS,EAAG,EAAG,KAAM,IACzBlB,EAAIiB,UAAY,OAChBjB,EAAIkB,SAAS,KAAM,EAAG,EAAG,IACzB4gB,EAAI+D,kBAAoB/rB,kBAAkBkG,EAAID,OAChD,CACoB,MAAhB+hB,EAAIwH,WAAkBxH,EAAIwH,SAAW1wB,EAAM64B,SAAS,KAAO,IAAK,KAChD,MAAhB3P,EAAI6G,WAAkB7G,EAAI6G,SAAW/vB,EAAM64B,SAAS,IAAM,KAAM,KAChD,MAAhB3P,EAAImH,WAAkBnH,EAAImH,SAAWrwB,EAAM64B,SAAS,KAAO,KAAM,KAC5C,MAArB3P,EAAI4P,gBAA2B5P,EAAA4P,cAAgB94B,EAAM+4B,MAAM,QACtC,MAArB7P,EAAI8P,gBAA2B9P,EAAA8P,cAAgBh5B,EAAM+4B,MAAM,QACtC,MAArB7P,EAAI+P,gBAA2B/P,EAAA+P,cAAgBj5B,EAAM+4B,MAAM,QACtC,MAArB7P,EAAIgQ,gBAA2BhQ,EAAAgQ,cAAgBl5B,EAAM+4B,MAAM,OACjE,CP0sBUI,CAAM/C,EAAKlN,UACXlgC,QAAQob,IAFE,CAAC,MAAO,QAAS,OAAQ,SAAU,WAAY,aAAc,OAAQ,SAAU,UAAW,QAAS,WAEzFhT,KAAIiN,SAAW6N,GAAWhB,OAAOte,EAAGs8B,GAAIt8B,GAAmB,KAAOkE,OAAOslC,EAAIngC,MAAMrJ,GAAG4C,MAAM,KAAK,cAErH0c,GAAWymB,SAASzJ,GAAIqP,SAAU,KAAOznC,OAAOslC,EAAIngC,MAAMsiC,SAAS/oC,MAAM,KAAK,KACpF05B,GAAIkQ,mBAAqBl4B,kBAAkB,IAAIm4B,UAAU,IAAIC,kBAAkB,GAAG9sB,KAAK,GAAI,EAAG,IAC9F0c,GAAIqQ,mBAAqBr4B,kBAAkB,IAAIm4B,UAAU,IAAIC,kBAAkB,GAAG9sB,KAAK,KAAM,EAAG,IAChG0c,GAAImE,kBAAoB7kB,EAAU0gB,GAAI92B,UAAW,WACjD82B,GAAIsQ,kBAAoBhxB,EAAU0gB,GAAI92B,UAAW,WACjD82B,GAAIyF,YAAczlB,EAASggB,GAAIiP,MAC/BjP,GAAIiP,KAAK93B,QACL6oB,GAAAgO,KAAOl3B,EAAMk3B,KAAK,GAKb,IALc,MAEf5jC,MAAAA,EAAI4T,EAAU,EAAG,GACvB,OAAA5T,EAAEuV,UAAUqgB,GAAI92B,UAAW,EAAG,GACvBkB,EAAEiV,aAAa,EAAG,EAAG,EAAG,GAAGzT,KAAK,EACzC,EALuB,IASvBghB,GAAS,aACK/C,GAAA7E,UAAUI,OAAO,YACnBuG,GAAA3G,UAAUI,OAAO,YAC7BmQ,GAAQzxB,cAAc,IAAIyR,YAAY,YANpCqS,GAAU,4BAQN,KACP,CAAErnB,MAAM,IA8EX,MAAMkiC,GAAa,CACjB8N,QAAQ,EACRxjC,MAAO,KACP64B,QAAAA,GACE,OAAKhmC,KAAKmN,MACHnN,KAAKmN,MAAM8oB,KADMmK,GAAIqQ,YAE9B,EACA3N,YAAAA,GACO,OAAA9iC,KAAKmN,MACHnN,KAAK2wC,OAAS3wC,KAAKmN,MAAMgpB,KAAOn2B,KAAKmN,MAAM8oB,KAD1BmK,GAAIqQ,YAE9B,GAuQF,SAASjN,GAASt7B,EAAcmmB,GAC9B,MAAMuiB,EAAK,EAAI3kB,GAAmC,IAAjByT,GAAQ15B,QAC9B,IAAA,MAAAlC,KAAK+pB,GAAIyB,cAClB,GAAIpnB,EAAOF,OAAOlE,EAAE+sC,SAAWnR,GAAQ15B,OAAS,IAAM,CACpDkoB,GAAMqV,YAAcz/B,EAAEkqB,MAChBE,GAAA+V,aAAangC,EAAEwwB,KAAOsc,EAAI9sC,EAAE0wB,MAAO1wB,EAAE0wB,KAAOoc,EAAI9sC,EAAEwwB,KAAMzG,GAAIiC,MAAQhsB,EAAEyV,QAAUsU,GAAIiC,MAAQ8gB,EAAI9sC,EAAE0V,SAClG,MAAAs3B,GAAQhtC,EAAEitC,OAAqB,MAAZ1iB,EAAoBJ,GAAShX,QAAUnT,EAAEktC,OAAS,KACrE3M,EAAOyM,EAAOhtC,EAAEmtC,OAASntC,EAAEotC,OAC3B5M,EAAOwM,EAAOhtC,EAAEqtC,OACtBjjB,GAAMnO,UAAUjc,EAAEstC,OAAOttC,EAAEutC,QAAU7mB,GAAUpJ,QAAU6L,GAAKjR,WAAa,IAAKqoB,EAAO,GAAIC,EAAO,EAAGD,EAAMC,EAC7G,CAEFpW,GAAMqV,YAAc,CACtB,CACA,SAASa,GAAazsB,EAAcvE,EAAWgd,EAAWvP,EAAcywB,GAChEpjB,GAAA6V,KAAO,GAAGljB,0BAChB,MAAMZ,EAAKiO,GAAMqjB,YAAY55B,GAAMZ,MACnC,OAAIkJ,EAAKqxB,IAAUpjB,GAAM6V,KAAUljB,EAAOZ,EAAKqxB,4BACzCpjB,GAAAgW,SAASvsB,EAAMvE,EAAGgd,GACjBnQ,CACT,CA6FA,SAASmlB,GAAK/+B,GACZ,OAAIA,EAAM,EAAU,EAChBA,EAAM,EAAU,EACbA,CACT,CAaA,SAASu9B,GAAQh7B,GACT,MAAA4oC,EAAK5oC,EAAKirB,SAAWhG,GAAIW,UACzBijB,EAAM5jB,GAAIS,gBACX1lB,EAAKosB,SAAWpsB,EAAKk+B,QAA0B,MAAhBl+B,EAAK+rB,UACzCzG,GAAM+V,aAAawN,EAAM7oC,EAAK0rB,KAAMmd,EAAM7oC,EAAK4rB,MAAOid,EAAM7oC,EAAK4rB,KAAMid,EAAM7oC,EAAK0rB,KAAM1rB,EAAK2Q,QAAS3Q,EAAK4Q,SACvF,MAAhB5Q,EAAK+rB,SACPzG,GAAMqV,YAAc36B,EAAKolB,QAAUplB,EAAKqsB,WAAaA,GAAU7T,QAAU,IAAO,GAC5EiL,GAAK2W,QAAa9U,GAAAqV,aAAez4B,KAAKoc,IAAI,GAAKuZ,GAAY73B,EAAK4C,SAAW,IAAK,IAEpF4X,GAAWxa,KAAK4oC,EAAK,QAAU,OAAO3xC,KAAKquB,MAErCA,GAAAqV,YAAc,EAAI6B,IAAMt/B,YAAYC,MAAQ6C,EAAK+rB,SAAW,KACvDvR,GAAAxa,KAAK+gC,OAAO9pC,KAAKquB,KAEhC,CACA,SAASyV,GAAS/6B,GACV,MAAA4oC,EAAK5oC,EAAKirB,SAAWhG,GAAIW,UACzBijB,EAAM5jB,GAAIS,gBACX1lB,EAAKosB,SAAWpsB,EAAKk+B,QAA0B,MAAhBl+B,EAAK+rB,UACzCzG,GAAM+V,aAAawN,EAAM7oC,EAAK0rB,KAAMmd,EAAM7oC,EAAK4rB,MAAOid,EAAM7oC,EAAK4rB,KAAMid,EAAM7oC,EAAK0rB,KAAM1rB,EAAK2Q,QAAS3Q,EAAK4Q,SACvF,MAAhB5Q,EAAK+rB,UACPzG,GAAMqV,YAAc36B,EAAKolB,QAAUplB,EAAKqsB,WAAaA,GAAU7T,QAAU,IAAO,GAC5EiL,GAAK2W,QAAa9U,GAAAqV,aAAez4B,KAAKoc,IAAI,GAAKuZ,GAAY73B,EAAK4C,SAAW,IAAK,IACpF4X,GAAWxa,KAAK4oC,EAAK,SAAW,QAAQ3xC,KAAKquB,KAIjD,CACA,SAASwV,GAAS96B,EAAqB4C,GAC/B,MAAAgmC,EAAK5oC,EAAKirB,SAAWhG,GAAIW,UACzBijB,EAAM5jB,GAAIS,eAChB,IAAK1lB,EAAKosB,SAAWpsB,EAAK4C,QAAU5C,EAAK8pB,YAAclnB,EAAS,OAChE0iB,GAAMqV,YAAc36B,EAAKolB,QAAUplB,EAAKqsB,WAAaA,GAAU7T,QAAU,IAAO,GAC5EiL,GAAK2W,QAAa9U,GAAAqV,aAAez4B,KAAKoc,IAAI,GAAKuZ,GAAY73B,EAAK4C,SAAW,IAAK,IACpF0iB,GAAM+V,aAAawN,EAAM7oC,EAAK0rB,KAAMmd,EAAM7oC,EAAK4rB,MAAOid,EAAM7oC,EAAK4rB,KAAMid,EAAM7oC,EAAK0rB,KAAM1rB,EAAK2Q,QAAS3Q,EAAK4Q,SACrGk4B,MAAAA,EAAa7jB,GAAIoC,OAASwhB,EAAM7oC,EAAKG,MAAQ8kB,GAAI9kB,MACjD4oC,EAAaD,EAAa9oC,EAAK8pB,YACjC9pB,EAAK4C,QAAUA,GACjB4X,GAAWxa,KAAK4oC,EAAK,aAAe,YAAYptB,KAAK8J,IAC1C9K,GAAAxa,KAAK4oC,EAAK,SAAW,QAAQpwC,KAAK8sB,IAAQyjB,EAAYA,IAC5DvuB,GAAWxa,KAAK4oC,EAAK,SAAW,QAAQpwC,KAAK8sB,IAAQyjB,EAAYA,EAAaD,GAAclmC,EAAU5C,EAAK4C,UAClH4X,GAAWxa,KAAKsmC,QAAQ7qB,KAAK6J,IAAQyjB,EACvC,CACA,SAAS9N,GAAUj7B,GACX,MAAA4oC,EAAK5oC,EAAKirB,SAAWhG,GAAIW,UACzBijB,EAAM5jB,GAAIS,gBACX1lB,EAAKosB,SAAWpsB,EAAKk+B,QAA0B,MAAhBl+B,EAAK+rB,UACzCzG,GAAM+V,aAAawN,EAAM7oC,EAAK0rB,KAAMmd,EAAM7oC,EAAK4rB,MAAOid,EAAM7oC,EAAK4rB,KAAMid,EAAM7oC,EAAK0rB,KAAM1rB,EAAK2Q,QAAS3Q,EAAK4Q,SACvF,MAAhB5Q,EAAK+rB,UACPzG,GAAMqV,YAAc36B,EAAKolB,QAAUplB,EAAKqsB,WAAaA,GAAU7T,QAAU,IAAO,GAC5EiL,GAAK2W,QAAa9U,GAAAqV,aAAez4B,KAAKoc,IAAI,GAAKuZ,GAAY73B,EAAK4C,SAAW,IAAK,IACpF4X,GAAWxa,KAAK4oC,EAAK,UAAY,SAAS3xC,KAAKquB,KAInD,CA9bAtD,GAAenqB,iBAAiB,UAAU,KACxCoiC,GAAW8N,OAAS/lB,GAAexJ,OAAA,IAErCwJ,GAAe1mB,cAAc,IAAI+Q,MAAM,WA4bvC,MAAM28B,OAAiBrlB,IACvB,MAAMslB,GAKGpuC,WAAAA,CAAY0J,GAJZ1H,EAAAzF,KAAA,SACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,WACAyF,EAAAzF,KAAA,WAEAA,KAAAmN,MAAQA,EACbnN,KAAK8xC,QAAU,KACf9xC,KAAK+xC,QAAU,KACf/xC,KAAKgyC,QAAU,IACjB,CACA,WAAaC,GACP,OAAgB,MAAhBjyC,KAAK8xC,UAAiB9xC,KAAK8xC,cAAgBpyB,EAAU1f,KAAKmN,MAAO,YAC9DnN,KAAK8xC,OACd,CACA,WAAaI,GACqB,OAAAlyC,KAAK+xC,cAAgB7xC,QAAQK,QAAQ,MAC9DP,KAAK+xC,OACd,CACA,WAAaI,GACP,OAAgB,MAAhBnyC,KAAKgyC,UAAiBhyC,KAAKgyC,cAAgBtyB,EAAU1f,KAAKmN,MAAO,YAC9DnN,KAAKgyC,OACd,EAEF,MAAMI,GAAmBjlC,IACvB,MAAMklC,EAAYT,GAAWnW,IAAItuB,IAAU,IAAI0kC,GAAU1kC,GACpDykC,OAAAA,GAAWjV,IAAIxvB,IAAmBykC,GAAAlW,IAAIvuB,EAAOklC,GAC3CA,CAAAA,EAOT,SAAS7T,GAAO8T,EAAO,GACrB,IAAI1nC,EAAS0nC,EACb,OAAI1nC,EAAS,KAAa,GAAGA,MACxBA,GAAU,MAAQ,KAAgBA,GAAAA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,KAAgBA,GAAAA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,QAAgBA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,KAAgBA,GAAAA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,KAAa,GAAGA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,KAAgBA,GAAAA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,KAAa,GAAGA,EAAO6Q,QAAQ,QACjD7Q,GAAU,MAAQ,KAAgBA,GAAAA,EAAO6Q,QAAQ,QAC5C7Q,GAAA,QAAgBA,MAC5B,CACA,MAAM2nC,GAAmB9vC,IACjBwxB,MAAAA,EAAQ,CAAEue,GAAI,CAAC,EAAG,GAAIC,GAAI,CAAC,EAAG,GAAIC,GAAI,CAAC,EAAG,IAAKC,GAAI,CAAC,EAAG,IAAKC,GAAI,CAAC,GAAI,KACvEC,IAAAA,GAAWrnB,GAAiB/mB,OAAS,MAAMw4B,cAC3C6V,EAAuC,EAA5B9qC,OAAOyjB,GAAYhnB,OAClC,GAAa,IAAThC,EAAY,CACRswC,MAAAA,EAAO9e,EAAM4e,GACfC,EAAWC,EAAK,KAAID,EAAWC,EAAK,IACpCD,EAAWC,EAAK,KAAID,EAAWC,EAAK,IAC5BtnB,GAAAhnB,MAAQquC,EAAS/iC,WAC7B0b,GAAYhnB,MAAQgnB,GAAYhnB,KAAA,MAAA,GACd,IAAThC,EAAY,CAAA,IAAAuwC,EAAAC,EACfC,MAAAA,EAAO3uC,OAAO2uC,KAAKjf,GACrBA,EAAM4e,GAAS,GAAKC,EAAoBD,EAA+CG,QAA/CH,EAAAK,EAAK7T,MAAYxzB,GAAAooB,EAAMpoB,GAAK,IAAMinC,eAAaE,EAAAA,EAAA,KAClF/e,EAAM4e,GAAS,GAAKC,IAAoBD,EAAoD,QAApDA,EAAAK,EAAK3tC,UAAU85B,MAAKxzB,GAAOooB,EAAMpoB,GAAK,IAAMinC,WAAQG,IAAAA,EAAAA,EAAK,MACzFznB,GAAA/mB,MAAQouC,EAAQM,cACjC3nB,GAAiB/mB,MAAQ+mB,GAAiB/mB,KAC5C,CAGA,MAAO,CAFY+mB,GAAiB/mB,OAAS,KACzBgnB,GAAYhnB,OAAS,KACRsH,KAAK,OAAW,EAkFnDwJ,eAAewqB,KACTpK,GAAAA,GAAQF,GAAG,QAAS,CAClB,IAACxK,GAAYxmB,MAEf,YADA4nB,GAAKhoB,MAAM,WAGFP,IAAAA,MAAAA,KAAKuoB,GAAKC,OAAOqR,eAAgB75B,IACtCoT,EAAAjR,KAAKm6B,GAAIgO,KAAM,CAAErJ,MAAM,EAAMqO,OAAO,IACtCvlB,GAAA0D,eAAelF,GAAKgnB,OAAOrY,GAAOS,IAAIxQ,GAAYxmB,SAChDyN,MAAAA,EAAM+oB,GAAUQ,IAAIxQ,GAAYxmB,OAChCyT,EAASgjB,GAAaO,IAAIxQ,GAAYxmB,OAC5CwoB,GAAKvgB,MAAQ1E,OAAO,OAAOg9B,KAAKjP,KACf,MAAblI,GAAI1jB,OAAe8iB,GAAK9mB,MAAM0nB,GAAI1jB,MAAMZ,WAAY2I,EAAKgG,EAAQiT,GAAY1mB,aAmCrF8Q,gBACE+9B,OAAAA,EAAUv7B,SACR,UACS,IAAA,MAAAjU,KAAK+pB,GAAIpnB,MAClB3C,EAAEmtC,OAAS,OACXntC,EAAEqtC,OAAS,KACTrtC,EAAAstC,OAAS,CAAChR,GAAI92B,UAAW82B,GAAImE,YAAa,KAAMnE,GAAIsQ,aACtD5sC,EAAEktC,OAAS,EACXltC,EAAEotC,OAAS,EACXptC,EAAE+sC,QAAS,EACX/sC,EAAEutC,QAAS,EACXvtC,EAAEitC,QAAS,EAEb,IAAA,MAAWjtC,KAAKq3B,GACVlQ,GAAAA,GAAYxmB,QAAUX,EAAEqG,MAAO,CAC7BrG,GAAY,MAAZA,EAAEoK,OAAgB,CACpBolC,EAAO,YACP,QACF,CACA,MAAM1sC,EAAOinB,GAAIpnB,MAAMuB,OAAOlE,EAAEoK,SAChC,GAAY,MAARtH,EAAc,CACT0sC,EAAA,eAAexvC,EAAEoK,UACxB,QACF,CACI,IAAAf,EAAmB,MAAXrJ,EAAEqJ,MAAgB,KAAO,OAAAgsB,EAAA2B,GAAIW,IAAI33B,EAAEqJ,aAAV,EAAAgsB,EAAkBlD,KAClD9oB,IACY,MAAXrJ,EAAEqJ,OAAsBmmC,EAAA,SAASxvC,EAAEqJ,SACvCA,EAAQizB,GAAIkQ,cAEd1pC,EAAKqqC,OAAS9jC,EAAM4J,MACpBnQ,EAAKuqC,OAAShkC,EAAM8J,OACdo7B,MAAAA,EAAYD,GAAgBjlC,GAClCvG,EAAKwqC,aAAelxC,QAAQob,IAAI,CAACnO,EAAOklC,EAAUF,QAASE,EAAUH,QAASG,EAAUJ,UACtE,MAAdnuC,EAAEsK,WACJxH,EAAKoqC,OAAgC,KAAvBlmC,KAAK4S,IAAI5Z,EAAEsK,UAAmBjB,EAAM8J,OAC7CrQ,EAAAmqC,OAASjtC,EAAEsK,SAAW,GAEd,MAAXtK,EAAE4K,QAAe9H,EAAKoqC,OAASltC,EAAE4K,OACrB,MAAZ5K,EAAEwK,SAAgB1H,EAAKsqC,OAASptC,EAAEwK,QACZ,MAAtBxK,EAAE0K,mBAA0B5H,EAAKiqC,OAAS/sC,EAAE0K,kBAC1B,MAAlB1K,EAAEgL,eAAsBlI,EAAKyqC,OAASvtC,EAAEgL,cACtB,MAAlBhL,EAAEkL,eAAsBpI,EAAKmqC,OAASjtC,EAAEkL,aAC9C,CAEJ,CA9EUukC,CAAa,CAAED,OAAQzrB,KAC7B,MAAM2rB,EAAMzY,GAAKU,IAAIzQ,GAAUvmB,QAAU,CAAEyS,MAAOA,EAAMk3B,KAAKvgB,GAAI1jB,MAAO6pB,WAAa,IAAM7c,MAAO,MAClG0W,GAAIkB,QAAUykB,EAAIt8B,MAClB2W,GAAImB,QAAUwkB,EAAIr8B,MACNupB,GAAA7S,GAAIkB,QAAQzL,SAAWuK,GAAI9kB,MAC7B43B,IAAA,EACGC,IAAA,EACFC,IAAA,EACDL,GAAA,EACL9V,GAAetJ,SAASqe,GAAOr5B,QAAQ,KAC5Ci7B,GAAcn4B,QACdu2B,GAAOx5B,OACP+hC,GAASjJ,WACTpJ,GAAQH,KAAK,OAAM,KACd,CACLG,GAAQH,KAAK,QACbwS,GAASyL,WACTv8B,EAAMyqB,OACNN,GAAcM,OAEF+C,IAAA,EACDO,GAAA,KACX7C,GAAgBzf,QAChB0f,GAAa1f,QACb2f,GAAY3f,QACZ8c,GAAOt5B,QACPu5B,GAAQv5B,QACRw5B,GAAQx5B,QACEm6B,GAAA,EACEC,GAAA,EACAG,GAAA,EACD58B,IAAAA,MAAAA,KAAKuoB,GAAKljB,IAAIw0B,eAAgB75B,GAC3C,CACF,CA8CAyR,eAAeuqB,KACTnK,GAAQF,GAAG,SAAWiP,KACtB/O,GAAQF,GAAG,SACM,MAAf5H,GAAImB,SAAiBnB,GAAImB,QAAQ9oB,QACrCu5B,GAAOv5B,QACHwkB,GAAetJ,SAAWwf,IAAYlB,GAAQx5B,QACxCo6B,GAAAE,GACVtpB,EAAMyqB,OACAzqB,EAAAjR,KAAKm6B,GAAIgO,KAAM,CAAErJ,MAAM,EAAMqO,OAAO,IAC1Czd,GAAQH,KAAK,WAEM,MAAf3H,GAAImB,eAAuBmT,GAAUtU,GAAImB,QAASwR,GAAU3S,GAAI9kB,OACpE02B,GAAOx5B,OACHykB,GAAetJ,SAAWwf,IAAYlB,GAAQz5B,OAC9C06B,KAAYC,IAAYsB,GAAQrU,GAAIkB,QAASyR,GAAU3S,GAAI9kB,OAE/D4sB,GAAQH,KAAK,SAEjB,CA9LAO,GAAYwc,IAAkB,GAC9B/mB,GAAiB/qB,iBAAiB,UAAU,IAAMs1B,GAAYwc,GAAgB,KAC9E9mB,GAAYhrB,iBAAiB,UAAU,IAAMs1B,GAAYwc,GAAgB,KACzE7mB,GAAajrB,iBAAiB,UAAiBoK,IAC7C,MAAM6oC,EAAS1rC,OAAQ6C,EAAIS,OAA4B7G,OACvDopB,GAAIa,YAAc5jB,KAAKyV,IAAI,EAAG,EAAImzB,GAClC7lB,GAAIc,YAAc7jB,KAAKyV,IAAI,EAAGmzB,GAC9BxzC,QAAQK,UAAUkX,KAAKqoB,IAASroB,KAAKqoB,GAAO,IAE9C7hB,GAAO4X,IAAI,eAAgBnK,IAC3BjB,GAAchqB,iBAAiB,UAAiBoK,IAC9CgjB,GAAIY,SAAY5jB,EAAIS,OAA4B8V,QAAU,EAAI,CAAA,IAEhEqJ,GAAcvmB,cAAc,IAAI+Q,MAAM,WACtCmnB,GAAO9a,SAAS7gB,iBAAiB,UAAiBoK,IAChDgjB,GAAI6C,gBAAiB7lB,EAAIS,OAA4B8V,QAAU,GAAM,EAAC,IAExEgb,GAAO9a,SAASpd,cAAc,IAAI+Q,MAAM,WACxC4V,GAASnqB,SAAW,KAClB,MAAMizC,EAAK7Y,GAAIW,IAAI5Q,GAASpmB,OAC5Bo+B,GAAW11B,MAAQwmC,GAAM,KACrBA,GAAIA,EAAGvd,SAAQ,EAErBnL,GAAYxqB,iBAAiB,SAAU+7B,IAAU,WAEzCtyB,MAAAA,EAAQ1J,SAASsT,cAAc,SAC9BvP,OAAAsP,OAAO3J,EAAO,CAAEzH,KAAM,SAAU8d,IAAK,GAAI2G,IAAK,IAAMziB,MAAO,KAClEyF,EAAM8b,MAAMS,SAAW,+BACjBvc,EAAAzJ,iBAAiB,UAAU,WACzBgE,MAAAA,EAAQuD,OAAOhI,KAAKyE,OACtBA,EAAQ,KAAIzE,KAAKyE,MAAQ,MACzBA,EAAQ,MAAMzE,KAAKyE,MAAQ,QAC/B48B,GAAcS,aAAa95B,OAAOhI,KAAKyE,OAAM,IAExCwZ,GAAA4X,IAAI,iBAAkB3rB,GAAO,GAC3BoyB,GAAAjb,UAAUM,YAAYzX,GACtBoyB,GAAAhb,SAAS7gB,iBAAiB,UAAU,WAC3CyJ,EAAMkb,UAAUtlB,OAAO,YAAaE,KAAKohB,SACrCphB,KAAKohB,QAASlX,EAAMhG,cAAc,IAAI+Q,MAAM,WAC3CosB,GAAcS,aAAa,EAAC,IAEnCxF,GAAShb,SAASpd,cAAc,IAAI+Q,MAAM,WAlBK,GAqBjD0gB,GAAQl1B,iBAAiB,UAAU,WACjC4d,GAAO+G,UAAUtlB,OAAO,OAAQE,KAAKy1B,GAAG,SACxCzJ,GAAU5G,UAAUtlB,OAAO,OAAQE,KAAK01B,GAAG,SAC3C5K,GAAQrmB,MAAQzE,KAAKy1B,GAAG,QAAU,KAAO,KACzC1K,GAAStmB,MAAQzE,KAAKy1B,GAAG,SAAW,KAAO,KAC3C1K,GAAS3F,UAAUtlB,OAAO,WAAYE,KAAKy1B,GAAG,SACnC3xB,IAAAA,MAAAA,KA7iDiBtD,SAASY,KAAKmmB,iBA6iDvB,0BAA2BzjB,EAAEshB,UAAUtlB,OAAO,WAAYE,KAAK01B,GAAG,QAEvF,IACA5K,GAAQrqB,iBAAiB,SAAS,WAOxB,WALFT,KAAKolB,UAAUwuB,SAAS,cACvB5zC,KAAAolB,UAAU1C,IAAI,kBACbqd,KACD//B,KAAAolB,UAAUI,OAAO,cAEhB,EACV,IACAuF,GAAStqB,iBAAiB,SAAS,WAOzB,WALFT,KAAKolB,UAAUwuB,SAAS,cACvB5zC,KAAAolB,UAAU1C,IAAI,kBACbod,KACD9/B,KAAAolB,UAAUI,OAAO,cAEhB,EACV,IACA+E,GAAY9pB,iBAAiB,SAAS,WAC9BgE,MAAAA,EAAQuD,OAAOhI,KAAKyE,OACtBA,SAAczE,KAAKyE,MAAQ,QAC3BA,EAAQ,MAAKzE,KAAKyE,MAAQ,MAChC,IACAmxB,GAAQC,IAAIF,GAAS,UAAU,IAAMtJ,GAAK2W,MAAQ,WAAa,KAC/DpN,GAAQC,IAAI3K,GAAY,UAAU5f,GAAU,CAAC,GAAI,QAAS,QAAS,WAAWtD,OAAQsD,EAA6B7G,UACnHmxB,GAAQC,IAAI1K,GAAa,UAAU7f,GAAWA,EAA6B7G,QAC3EmxB,GAAQC,IAAIF,GAAS,UAAUrqB,GAAWA,EAAmBmqB,GAAG,SAAW,SAAW,KAiHtF,MAOMoe,GAAaC,CAACC,EAAqBrwC,KAC7B0nB,GAAA3qB,iBAAiB,QARZuzC,EAACtwC,EAAsBuwC,KACtC,IAAI7sB,EAAQ,EACZ,MAAO,KACLC,aAAaD,GACLA,EAAAjkB,KAAKmkB,WAAW5jB,EAUvB,IAVsC,CAAA,EAILwwC,EAAS,KACvC9oB,GAAU3mB,QAAUsvC,IACbrwC,IACT0nB,GAAU3mB,MAAQ,GAClB2mB,GAAUlnB,cAAc,IAAI+Q,MAAM,UAAQ,IAEvC,EAEHk/B,GAAYC,CAACtxC,EAAcY,IAAyB,IAAIyd,EAASre,GAAM+e,aAAama,GAAS3a,WAAW1e,KAAKe,GACnH2oB,GAAKQ,UAAY,SAASwnB,EAAU,GAAIC,EAAc,IAC9CC,MAAAA,EAAQ/zC,SAASsT,cAAc,OAC/BygC,EAAAnvB,UAAU1C,IAAI,aAAc,QAC5BrB,MAAAA,EAAY7gB,SAASsT,cAAc,OAC/BuN,EAAA+D,UAAU1C,IAAI,aAAc,QAChC8xB,MAAAA,EAAMh0C,SAASsT,cAAc,OAC/B0gC,EAAApvB,UAAU1C,IAAI,YAClB8xB,EAAI3uB,UAAYwuB,EACVI,MAAAA,EAAUj0C,SAASsT,cAAc,OAC/B2gC,OAAAA,EAAArvB,UAAU1C,IAAI,gBACtB+xB,EAAQ5uB,UAAYyuB,EACpBG,EAAQh0C,iBAAiB,eAAe,IAAM8zC,EAAMx/B,UAC1CsM,EAAAyF,OAAO0tB,EAAKC,GACtB/S,uBAAsB,KACnB3Y,GAAE,SAA4BjC,OAAOytB,EAAOlzB,GAC7CqgB,uBAAsB,KACd6S,EAAAnvB,UAAUI,OAAO,QACbnE,EAAA+D,UAAUI,OAAO,OAAM,GAClC,IAEG+uB,EAAA9zC,iBAAiB,SAAS,KACxB8zC,EAAAnvB,UAAU1C,IAAI,QACd6xB,EAAA9zC,iBAAiB,iBAAiB,KACtC8zC,EAAM/uB,QAAO,IAELnE,EAAA+D,UAAU1C,IAAI,QACdrB,EAAA5gB,iBAAiB,iBAAiB,KAC1C4gB,EAAUmE,QAAO,GAClB,IAEIivB,CACT,EACApoB,GAAKzpB,MAAQ,CAACiT,EAAM,KAAOwW,GAAKQ,UAAU,YAAiFhX,oEAAAA,SAC3HwW,GAAKhoB,MAAQ,CAACwR,EAAM,KAAOwW,GAAKQ,UAAU,YAAiFhX,oEAAAA,SAC3HwW,GAAK/T,OAAcvQ,GAAAA,EACnBskB,GAAKpT,IAAM1D,UACT,MAAMm/B,QAAepiC,EAAEmF,MAAKrI,GAAKA,EAAEyvB,UACxB,IAAA,MAAA/6B,KAAK4wC,EAAOC,SACrB,GAAe,YAAX7wC,EAAErB,KAAoBoxC,GAAW/vC,EAAE8wC,KAAK,GAAI9wC,EAAE8wC,KAAK,SAAE,GACrC,WAAX9wC,EAAErB,KAAqBqB,EAAA8wC,KAAK,GAAG7rB,QAAC,IACrB,WAAXjlB,EAAErB,KACN,MAAM,IAAI+b,UAAkC1a,wBAAAA,EAAErB,QADrB0xC,GAAUrwC,EAAE8wC,KAAK,GAAI9wC,EAAE8wC,KAAK,GACD,CAEnD,OAAAzmB,QAAAC,IAAIsmB,GACLA,CAAAA,EAETroB,GAAKpT,IAAI2lB,OAAO,0BAChBvS,GAAKpT,IAAI2lB,OAAO,uBAChBvS,GAAKpT,IAAI2lB,OAAO,yBAChBvS,GAAKpT,IAAI2lB,OAAO,uBAChBvS,GAAKpT,IAAI2lB,OAAO,yBAChBvS,GAAKpT,IAAI2lB,OAAO,wBAChBvS,GAAKpT,IAAI2lB,OAAO,gCAChBvS,GAAKpT,IAAI2lB,OAAO,iCAEhBz7B,KAAKR,KAAO0pB,GACL,MAAM1pB,GAAO0pB,GACpBA,GAAKY,KAAOA,GACZZ,GAAKwB,IAAMA,GACXxB,GAAK+T,IAAMA,GACX/T,GAAKnV,MAAQA,EACbmV,GAAKW,SAAWA,GAChBX,GAAKxE,YAAcA,GACnBwE,GAAKrE,UAAYA,GACjBqE,GAAKgV,cAAgBA,GACrBhV,GAAKsT,QAAUA,GACftT,GAAK0O,KAAOA,GACZ1O,GAAKjB,UAAYA,GACjBiB,GAAKrB,UAAYA,GACjBqB,GAAKpB,YAAcA,GACnBoB,GAAK4O,UAAYA,GACjB5O,GAAKjJ,WAAaA,GAClBiJ,GAAKlY,OAASA,EACdkY,GAAK/W,UAAYA,EACjB+W,GAAKpO,OAASA,GACdoO,GAAKsW,KAAOA,GACZtW,GAAK2W,OAAQ,EACb3W,GAAKnmB,MAAQqP,SAAWogB,GAAQF,GAAG,SAAWqK,KAC9Cv7B,OAAOC,eAAe6nB,GAAM,UAAW,CACrCoP,IAAKA,IAAM9F,GAAQF,GAAG,UAGxBlxB,OAAOC,eAAe6nB,GAAM,OAAQ,CAClCoP,IAAKA,IAAM+E,GACX9E,GAAAA,CAAIruB,GAcM,WAZFsoB,GAAAA,GAAQF,GAAG,SAAWiP,GAAW,OAC/BmQ,MAAAA,EAAYlf,GAAQF,GAAG,QACzBof,SAAiB/U,KACrBU,GAAUnzB,EAAIwgB,GAAI9kB,MACRu3B,GAAAE,GACV3S,GAAIqG,qBAKA2gB,SAAiB/U,KAAU/pB,MAAMoY,QAAQiQ,OAEvC,EACV","x_google_ignoreList":[7,8,9,10,15]}