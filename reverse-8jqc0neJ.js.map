{"version":3,"file":"reverse-8jqc0neJ.js","sources":["../src/plugins/demo/reverse.js"],"sourcesContent":["// 规范判定线事件\nfunction arrangeLineEvent(events) {\n  const oldEvents = JSON.parse(JSON.stringify(events)); // 深拷贝\n  const newEvents = [\n    {\n      // 以1-1e6开头\n      startTime: 1 - 1e6,\n      endTime: 0,\n      start: oldEvents[0] ? oldEvents[0].start : 0,\n      end: oldEvents[0] ? oldEvents[0].start : 0,\n      start2: oldEvents[0] ? oldEvents[0].start2 : 0,\n      end2: oldEvents[0] ? oldEvents[0].start2 : 0\n    }\n  ];\n  oldEvents.push({\n    // 以1e9结尾\n    startTime: 0,\n    endTime: 1e9,\n    start: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end : 0,\n    end: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end : 0,\n    start2: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end2 : 0,\n    end2: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end2 : 0\n  });\n  for (const i2 of oldEvents) {\n    // 保证时间连续性\n    const i1 = newEvents[newEvents.length - 1];\n    if (i2.startTime > i2.endTime) continue;\n    if (i1.endTime > i2.endTime) {\n      // i1吃掉i2\n    } else if (i1.endTime === i2.startTime) newEvents.push(i2);\n    else if (i1.endTime < i2.startTime) {\n      newEvents.push({\n        startTime: i1.endTime,\n        endTime: i2.startTime,\n        start: i1.end,\n        end: i1.end,\n        start2: i1.end2,\n        end2: i1.end2\n      }, i2);\n    } else if (i1.endTime > i2.startTime) {\n      newEvents.push({\n        startTime: i1.endTime,\n        endTime: i2.endTime,\n        start: (i2.start * (i2.endTime - i1.endTime) + i2.end * (i1.endTime - i2.startTime)) / (i2.endTime - i2.startTime),\n        end: i1.end,\n        start2: (i2.start2 * (i2.endTime - i1.endTime) + i2.end2 * (i1.endTime - i2.startTime)) / (i2.endTime - i2.startTime),\n        end2: i1.end2\n      });\n    }\n  }\n  // 合并相同变化率事件\n  const newEvents2 = [newEvents.shift()];\n  for (const i2 of newEvents) {\n    const i1 = newEvents2[newEvents2.length - 1];\n    const d1 = i1.endTime - i1.startTime;\n    const d2 = i2.endTime - i2.startTime;\n    if (i2.startTime === i2.endTime) {\n      // 忽略0长度事件\n    } else if (i1.end === i2.start && i1.end2 === i2.start2 && (i1.end - i1.start) * d2 === (i2.end - i2.start) * d1 && (i1.end2 - i1.start2) * d2 === (i2.end2 - i2.start2) * d1) {\n      i1.endTime = i2.endTime;\n      i1.end = i2.end;\n      i1.end2 = i2.end2;\n    } else newEvents2.push(i2);\n  }\n  return JSON.parse(JSON.stringify(newEvents2));\n}\nclass JudgeLineEvent {\n  constructor(start, end, start2, end2, startTime, endTime) {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.start = start;\n    this.end = end;\n    this.start2 = start2;\n    this.end2 = end2;\n  }\n}\nclass Note {\n  constructor(type, time, positionX, holdTime, speed) {\n    this.type = type;\n    this.time = time;\n    this.positionX = positionX;\n    this.holdTime = holdTime;\n    this.speed = speed;\n    this.floorPosition = 0;\n  }\n}\nclass SpeedEvent {\n  constructor(value, startTime, endTime) {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.floorPosition = 0;\n    this.value = value;\n  }\n}\nclass JudgeLine {\n  constructor() {\n    this.numOfNotes = 0;\n    this.numOfNotesAbove = 0;\n    this.numOfNotesBelow = 0;\n    this.bpm = 120;\n    /** @type {SpeedEvent[]} */\n    this.speedEvents = [];\n    /** @type {Note[]} */\n    this.notesAbove = [];\n    /** @type {Note[]} */\n    this.notesBelow = [];\n    /** @type {JudgeLineEvent[]} */\n    this.judgeLineDisappearEvents = [];\n    /** @type {JudgeLineEvent[]} */\n    this.judgeLineMoveEvents = [];\n    /** @type {JudgeLineEvent[]} */\n    this.judgeLineRotateEvents = [];\n  }\n  updateSefp() {\n    let y = 0;\n    this.speedEvents.sort((a, b) => a.startTime - b.startTime);\n    for (const i of this.speedEvents) {\n      if (i.startTime < 0) i.startTime = 0;\n      i.floorPosition = y;\n      y += (i.endTime - i.startTime) * i.value / this.bpm * 1.875;\n    }\n    this.speedEvents[this.speedEvents.length - 1].endTime = 1e9;\n    for (const j of this.notesAbove) {\n      let owo = 0;\n      let owo2 = 0;\n      let owo3 = 0;\n      for (const k of this.speedEvents) {\n        if (j.time % 1e9 > k.endTime) continue;\n        if (j.time % 1e9 < k.startTime) break;\n        owo = k.floorPosition;\n        owo2 = k.value;\n        owo3 = j.time % 1e9 - k.startTime;\n      }\n      j.floorPosition = owo + owo2 * owo3 / this.bpm * 1.875;\n      // if (j.type === 3) j.speed *= owo2;\n    }\n    for (const j of this.notesBelow) {\n      let owo = 0;\n      let owo2 = 0;\n      let owo3 = 0;\n      for (const k of this.speedEvents) {\n        if (j.time % 1e9 > k.endTime) continue;\n        if (j.time % 1e9 < k.startTime) break;\n        owo = k.floorPosition;\n        owo2 = k.value;\n        owo3 = j.time % 1e9 - k.startTime;\n      }\n      j.floorPosition = owo + owo2 * owo3 / this.bpm * 1.875;\n      // if (j.type === 3) j.speed *= owo2;\n    }\n  }\n  updateDe() {\n    this.judgeLineDisappearEvents.sort((a, b) => a.startTime - b.startTime);\n    this.judgeLineMoveEvents.sort((a, b) => a.startTime - b.startTime);\n    this.judgeLineRotateEvents.sort((a, b) => a.startTime - b.startTime);\n    this.judgeLineDisappearEvents = arrangeLineEvent(this.judgeLineDisappearEvents);\n    this.judgeLineMoveEvents = arrangeLineEvent(this.judgeLineMoveEvents);\n    this.judgeLineRotateEvents = arrangeLineEvent(this.judgeLineRotateEvents);\n  }\n}\nclass Chart {\n  constructor() {\n    this.formatVersion = 3;\n    this.offset = 0;\n    this.numOfNotes = 0;\n    /** @type {JudgeLine[]} */\n    this.judgeLineList = []; // Array.from(Array(24), () => new JudgeLine);\n  }\n}\n/** @type {Map<AudioBuffer,boolean>|null} */\nlet kfcFkXqsVw50 = null;\nhook.before.set('kfcFkXqsVw50', () => {\n  if (!(kfcFkXqsVw50 instanceof Map)) return;\n  const /** @type {AudioBuffer} */ bgm = hook.bgms.get(hook.selectbgm.value).audio;\n  for (let i = 0; i < bgm.numberOfChannels; i++) bgm.getChannelData(i).reverse();\n  kfcFkXqsVw50.set(bgm, hook.awawa = !kfcFkXqsVw50.get(bgm));\n  hook.modify = hook.awawa ? a => reverse(a, bgm.duration) : a => a;\n});\n/**\n *\n * @param {Chart} chart json\n * @param {number} duration time/s\n */\nexport function reverse(chart, duration) {\n  const chartNew = new Chart();\n  chartNew.offset = -chart.offset;\n  for (const i of chart.judgeLineList) {\n    const judgeLine = new JudgeLine();\n    const tb = duration * i.bpm / 1.875;\n    judgeLine.bpm = i.bpm;\n    for (const j of i.speedEvents) judgeLine.speedEvents.push(new SpeedEvent(j.value, tb - j.endTime, tb - j.startTime));\n    for (const j of i.notesAbove) {\n      if (j.type === 3) judgeLine.notesAbove.push(new Note(j.type, tb - j.time, j.positionX, 1, j.speed * j.holdTime));\n      else judgeLine.notesAbove.push(new Note(j.type, tb - j.time, j.positionX, j.holdTime, j.speed));\n      judgeLine.numOfNotesAbove++;\n    }\n    for (const j of i.notesBelow) {\n      if (j.type === 3) judgeLine.notesBelow.push(new Note(j.type, tb - j.time, j.positionX, 1, j.speed * j.holdTime));\n      else judgeLine.notesBelow.push(new Note(j.type, tb - j.time, j.positionX, j.holdTime, j.speed));\n      judgeLine.numOfNotesBelow++;\n    }\n    judgeLine.numOfNotes += judgeLine.numOfNotesAbove + judgeLine.numOfNotesBelow;\n    chartNew.numOfNotes += judgeLine.numOfNotes;\n    //\n    judgeLine.updateSefp();\n    i.judgeLineDisappearEvents = arrangeLineEvent(i.judgeLineDisappearEvents);\n    i.judgeLineMoveEvents = arrangeLineEvent(i.judgeLineMoveEvents);\n    i.judgeLineRotateEvents = arrangeLineEvent(i.judgeLineRotateEvents);\n    for (const j of i.judgeLineDisappearEvents) judgeLine.judgeLineDisappearEvents.push(new JudgeLineEvent(j.end, j.start, j.end2, j.start2, tb - j.endTime, tb - j.startTime));\n    for (const j of i.judgeLineMoveEvents) judgeLine.judgeLineMoveEvents.push(new JudgeLineEvent(j.end, j.start, j.end2, j.start2, tb - j.endTime, tb - j.startTime));\n    for (const j of i.judgeLineRotateEvents) judgeLine.judgeLineRotateEvents.push(new JudgeLineEvent(j.end, j.start, j.end2, j.start2, tb - j.endTime, tb - j.startTime));\n    judgeLine.updateDe();\n    chartNew.judgeLineList.push(judgeLine);\n  }\n  return JSON.parse(JSON.stringify(chartNew)); // 规范判定线事件\n}\n/**\n * @param {HTMLElement} elem\n * @param {()=>any} activeFn\n * @param {()=>any} doneFn\n */\nfunction longPress(elem, activeFn, doneFn, failFn) {\n  let timer = null;\n  elem.addEventListener('mousedown', awaIn);\n  elem.addEventListener('mouseup', awaOut);\n  elem.addEventListener('mouseleave', awaOut);\n  elem.addEventListener('touchstart', awaIn, { passive: true });\n  elem.addEventListener('touchend', awaOut);\n  elem.addEventListener('touchcancel', awaOut);\n  function awaIn() {\n    timer = requestAnimationFrame(awaIn);\n    if (activeFn()) {\n      cancelAnimationFrame(timer);\n      doneFn();\n      elem.removeEventListener('mousedown', awaIn);\n      elem.removeEventListener('mouseup', awaOut);\n      elem.removeEventListener('mouseleave', awaOut);\n      elem.removeEventListener('touchstart', awaIn);\n      elem.removeEventListener('touchend', awaOut);\n      elem.removeEventListener('touchcancel', awaOut);\n    }\n  }\n  function awaOut() {\n    cancelAnimationFrame(timer);\n    failFn();\n  }\n}\n(function() {\n  const tt = document.querySelector('.title');\n  if (!(tt instanceof HTMLElement)) return;\n  let pressTime = NaN;\n  const revolveWorld = () => {\n    if (isNaN(pressTime)) pressTime = performance.now();\n    tt.style.cssText += `;filter:hue-rotate(${(performance.now() - pressTime) / 4}deg)`;\n    if (performance.now() - pressTime > 3473 && Math.random() * 401 < 1) return 1;\n    return 0;\n  };\n  longPress(tt, revolveWorld, () => {\n    hook.fireModal('<p>Tip</p>', '<p>Reverse Mode is on...</p>');\n    kfcFkXqsVw50 = new Map();\n    setInterval(revolveWorld, 20);\n  }, () => {\n    tt.style.cssText += ';filter:hue-rotate(0deg);';\n    pressTime = NaN;\n  });\n}());\n"],"names":["arrangeLineEvent","events","oldEvents","JSON","parse","stringify","newEvents","startTime","endTime","start","end","start2","end2","push","length","i2","i1","newEvents2","shift","d1","d2","JudgeLineEvent","constructor","this","Note","type","time","positionX","holdTime","speed","floorPosition","SpeedEvent","value","JudgeLine","numOfNotes","numOfNotesAbove","numOfNotesBelow","bpm","speedEvents","notesAbove","notesBelow","judgeLineDisappearEvents","judgeLineMoveEvents","judgeLineRotateEvents","updateSefp","y","sort","a","b","i","j","owo","owo2","owo3","k","updateDe","Chart","formatVersion","offset","judgeLineList","kfcFkXqsVw50","reverse","chart","duration","chartNew","judgeLine","tb","hook","before","set","Map","bgm","bgms","get","selectbgm","audio","numberOfChannels","getChannelData","awawa","modify","tt","document","querySelector","HTMLElement","pressTime","NaN","revolveWorld","isNaN","performance","now","style","cssText","Math","random","elem","activeFn","doneFn","failFn","timer","awaIn","requestAnimationFrame","cancelAnimationFrame","removeEventListener","awaOut","addEventListener","passive","longPress","fireModal","setInterval"],"mappings":"AACA,SAASA,EAAiBC,GAClBC,MAAAA,EAAYC,KAAKC,MAAMD,KAAKE,UAAUJ,IACtCK,EAAY,CAChB,CAEEC,WAAW,OACXC,QAAS,EACTC,MAAOP,EAAU,GAAKA,EAAU,GAAGO,MAAQ,EAC3CC,IAAKR,EAAU,GAAKA,EAAU,GAAGO,MAAQ,EACzCE,OAAQT,EAAU,GAAKA,EAAU,GAAGS,OAAS,EAC7CC,KAAMV,EAAU,GAAKA,EAAU,GAAGS,OAAS,IAG/CT,EAAUW,KAAK,CAEbN,UAAW,EACXC,QAAS,IACTC,MAAOP,EAAUA,EAAUY,OAAS,GAAKZ,EAAUA,EAAUY,OAAS,GAAGJ,IAAM,EAC/EA,IAAKR,EAAUA,EAAUY,OAAS,GAAKZ,EAAUA,EAAUY,OAAS,GAAGJ,IAAM,EAC7EC,OAAQT,EAAUA,EAAUY,OAAS,GAAKZ,EAAUA,EAAUY,OAAS,GAAGF,KAAO,EACjFA,KAAMV,EAAUA,EAAUY,OAAS,GAAKZ,EAAUA,EAAUY,OAAS,GAAGF,KAAO,IAEjF,IAAA,MAAWG,KAAMb,EAAW,CAE1B,MAAMc,EAAKV,EAAUA,EAAUQ,OAAS,GACpCC,EAAGR,UAAYQ,EAAGP,SAClBQ,EAAGR,QAAUO,EAAGP,UAETQ,EAAGR,UAAYO,EAAGR,UAAWD,EAAUO,KAAKE,GAC9CC,EAAGR,QAAUO,EAAGR,UACvBD,EAAUO,KAAK,CACbN,UAAWS,EAAGR,QACdA,QAASO,EAAGR,UACZE,MAAOO,EAAGN,IACVA,IAAKM,EAAGN,IACRC,OAAQK,EAAGJ,KACXA,KAAMI,EAAGJ,MACRG,GACMC,EAAGR,QAAUO,EAAGR,WACzBD,EAAUO,KAAK,CACbN,UAAWS,EAAGR,QACdA,QAASO,EAAGP,QACZC,OAAQM,EAAGN,OAASM,EAAGP,QAAUQ,EAAGR,SAAWO,EAAGL,KAAOM,EAAGR,QAAUO,EAAGR,aAAeQ,EAAGP,QAAUO,EAAGR,WACxGG,IAAKM,EAAGN,IACRC,QAASI,EAAGJ,QAAUI,EAAGP,QAAUQ,EAAGR,SAAWO,EAAGH,MAAQI,EAAGR,QAAUO,EAAGR,aAAeQ,EAAGP,QAAUO,EAAGR,WAC3GK,KAAMI,EAAGJ,OAGd,CAED,MAAMK,EAAa,CAACX,EAAUY,SAC9B,IAAA,MAAWH,KAAMT,EAAW,CAC1B,MAAMU,EAAKC,EAAWA,EAAWH,OAAS,GACpCK,EAAKH,EAAGR,QAAUQ,EAAGT,UACrBa,EAAKL,EAAGP,QAAUO,EAAGR,UACvBQ,EAAGR,YAAcQ,EAAGP,UAEbQ,EAAGN,MAAQK,EAAGN,OAASO,EAAGJ,OAASG,EAAGJ,SAAWK,EAAGN,IAAMM,EAAGP,OAASW,IAAQL,EAAGL,IAAMK,EAAGN,OAASU,IAAOH,EAAGJ,KAAOI,EAAGL,QAAUS,IAAQL,EAAGH,KAAOG,EAAGJ,QAAUQ,GACzKH,EAAGR,QAAUO,EAAGP,QAChBQ,EAAGN,IAAMK,EAAGL,IACZM,EAAGJ,KAAOG,EAAGH,MACRK,EAAWJ,KAAKE,GACxB,CACD,OAAOZ,KAAKC,MAAMD,KAAKE,UAAUY,GACnC,CACA,MAAMI,EACJC,WAAAA,CAAYb,EAAOC,EAAKC,EAAQC,EAAML,EAAWC,GAC/Ce,KAAKhB,UAAYA,EACjBgB,KAAKf,QAAUA,EACfe,KAAKd,MAAQA,EACbc,KAAKb,IAAMA,EACXa,KAAKZ,OAASA,EACdY,KAAKX,KAAOA,CACb,EAEH,MAAMY,EACJF,WAAAA,CAAYG,EAAMC,EAAMC,EAAWC,EAAUC,GAC3CN,KAAKE,KAAOA,EACZF,KAAKG,KAAOA,EACZH,KAAKI,UAAYA,EACjBJ,KAAKK,SAAWA,EAChBL,KAAKM,MAAQA,EACbN,KAAKO,cAAgB,CACtB,EAEH,MAAMC,EACJT,WAAAA,CAAYU,EAAOzB,EAAWC,GACvBe,KAAAhB,UAAYA,EACjBgB,KAAKf,QAAUA,EACfe,KAAKO,cAAgB,EACrBP,KAAKS,MAAQA,CACd,EAEH,MAAMC,EACJX,WAAAA,GACEC,KAAKW,WAAa,EAClBX,KAAKY,gBAAkB,EACvBZ,KAAKa,gBAAkB,EACvBb,KAAKc,IAAM,IAEXd,KAAKe,YAAc,GAEnBf,KAAKgB,WAAa,GAElBhB,KAAKiB,WAAa,GAElBjB,KAAKkB,yBAA2B,GAEhClB,KAAKmB,oBAAsB,GAE3BnB,KAAKoB,sBAAwB,EAC9B,CACDC,UAAAA,GACE,IAAIC,EAAI,EACHtB,KAAAe,YAAYQ,MAAK,CAACC,EAAGC,IAAMD,EAAExC,UAAYyC,EAAEzC,YAChD,IAAA,MAAW0C,KAAK1B,KAAKe,YACfW,EAAE1C,UAAY,IAAG0C,EAAE1C,UAAY,GACnC0C,EAAEnB,cAAgBe,EAClBA,IAAMI,EAAEzC,QAAUyC,EAAE1C,WAAa0C,EAAEjB,MAAQT,KAAKc,IAAM,MAExDd,KAAKe,YAAYf,KAAKe,YAAYxB,OAAS,GAAGN,QAAU,IAC7C0C,IAAAA,MAAAA,KAAK3B,KAAKgB,WAAY,CAC/B,IAAIY,EAAM,EACNC,EAAO,EACPC,EAAO,EACX,IAAA,MAAWC,KAAK/B,KAAKe,YACnB,KAAIY,EAAExB,KAAO,IAAM4B,EAAE9C,SACrB,CAAI0C,GAAAA,EAAExB,KAAO,IAAM4B,EAAE/C,UAAW,MAChC4C,EAAMG,EAAExB,cACRsB,EAAOE,EAAEtB,MACTqB,EAAOH,EAAExB,KAAO,IAAM4B,EAAE/C,SAAA,CAE1B2C,EAAEpB,cAAgBqB,EAAMC,EAAOC,EAAO9B,KAAKc,IAAM,KAElD,CACUa,IAAAA,MAAAA,KAAK3B,KAAKiB,WAAY,CAC/B,IAAIW,EAAM,EACNC,EAAO,EACPC,EAAO,EACX,IAAA,MAAWC,KAAK/B,KAAKe,YACnB,KAAIY,EAAExB,KAAO,IAAM4B,EAAE9C,SACrB,CAAI0C,GAAAA,EAAExB,KAAO,IAAM4B,EAAE/C,UAAW,MAChC4C,EAAMG,EAAExB,cACRsB,EAAOE,EAAEtB,MACTqB,EAAOH,EAAExB,KAAO,IAAM4B,EAAE/C,SAAA,CAE1B2C,EAAEpB,cAAgBqB,EAAMC,EAAOC,EAAO9B,KAAKc,IAAM,KAElD,CACF,CACDkB,QAAAA,GACOhC,KAAAkB,yBAAyBK,MAAK,CAACC,EAAGC,IAAMD,EAAExC,UAAYyC,EAAEzC,YAC7DgB,KAAKmB,oBAAoBI,MAAK,CAACC,EAAGC,IAAMD,EAAExC,UAAYyC,EAAEzC,YACxDgB,KAAKoB,sBAAsBG,MAAK,CAACC,EAAGC,IAAMD,EAAExC,UAAYyC,EAAEzC,YAC1DgB,KAAKkB,yBAA2BzC,EAAiBuB,KAAKkB,0BACtDlB,KAAKmB,oBAAsB1C,EAAiBuB,KAAKmB,qBACjDnB,KAAKoB,sBAAwB3C,EAAiBuB,KAAKoB,sBACpD,EAEH,MAAMa,EACJlC,WAAAA,GACOC,KAAAkC,cAAgB,EACrBlC,KAAKmC,OAAS,EACdnC,KAAKW,WAAa,EAElBX,KAAKoC,cAAgB,EACtB,EAGH,IAAIC,EAAe,KAaZ,SAASC,EAAQC,EAAOC,GACvBC,MAAAA,EAAW,IAAIR,EACrBQ,EAASN,QAAUI,EAAMJ,OACdT,IAAAA,MAAAA,KAAKa,EAAMH,cAAe,CACnC,MAAMM,EAAY,IAAIhC,EAChBiC,EAAKH,EAAWd,EAAEZ,IAAM,MAC9B4B,EAAU5B,IAAMY,EAAEZ,IAClB,IAAA,MAAWa,KAAKD,EAAEX,YAAa2B,EAAU3B,YAAYzB,KAAK,IAAIkB,EAAWmB,EAAElB,MAAOkC,EAAKhB,EAAE1C,QAAS0D,EAAKhB,EAAE3C,YACzG,IAAA,MAAW2C,KAAKD,EAAEV,WACD,IAAXW,EAAEzB,KAAYwC,EAAU1B,WAAW1B,KAAK,IAAIW,EAAK0B,EAAEzB,KAAMyC,EAAKhB,EAAExB,KAAMwB,EAAEvB,UAAW,EAAGuB,EAAErB,MAAQqB,EAAEtB,WACjGqC,EAAU1B,WAAW1B,KAAK,IAAIW,EAAK0B,EAAEzB,KAAMyC,EAAKhB,EAAExB,KAAMwB,EAAEvB,UAAWuB,EAAEtB,SAAUsB,EAAErB,QACxFoC,EAAU9B,kBAEZ,IAAA,MAAWe,KAAKD,EAAET,WACD,IAAXU,EAAEzB,KAAYwC,EAAUzB,WAAW3B,KAAK,IAAIW,EAAK0B,EAAEzB,KAAMyC,EAAKhB,EAAExB,KAAMwB,EAAEvB,UAAW,EAAGuB,EAAErB,MAAQqB,EAAEtB,WACjGqC,EAAUzB,WAAW3B,KAAK,IAAIW,EAAK0B,EAAEzB,KAAMyC,EAAKhB,EAAExB,KAAMwB,EAAEvB,UAAWuB,EAAEtB,SAAUsB,EAAErB,QACxFoC,EAAU7B,kBAEZ6B,EAAU/B,YAAc+B,EAAU9B,gBAAkB8B,EAAU7B,gBAC9D4B,EAAS9B,YAAc+B,EAAU/B,WAEjC+B,EAAUrB,aACVK,EAAER,yBAA2BzC,EAAiBiD,EAAER,0BAChDQ,EAAEP,oBAAsB1C,EAAiBiD,EAAEP,qBAC3CO,EAAEN,sBAAwB3C,EAAiBiD,EAAEN,uBAC7C,IAAA,MAAWO,KAAKD,EAAER,yBAA0BwB,EAAUxB,yBAAyB5B,KAAK,IAAIQ,EAAe6B,EAAExC,IAAKwC,EAAEzC,MAAOyC,EAAEtC,KAAMsC,EAAEvC,OAAQuD,EAAKhB,EAAE1C,QAAS0D,EAAKhB,EAAE3C,YAChK,IAAA,MAAW2C,KAAKD,EAAEP,oBAAqBuB,EAAUvB,oBAAoB7B,KAAK,IAAIQ,EAAe6B,EAAExC,IAAKwC,EAAEzC,MAAOyC,EAAEtC,KAAMsC,EAAEvC,OAAQuD,EAAKhB,EAAE1C,QAAS0D,EAAKhB,EAAE3C,YACtJ,IAAA,MAAW2C,KAAKD,EAAEN,sBAAuBsB,EAAUtB,sBAAsB9B,KAAK,IAAIQ,EAAe6B,EAAExC,IAAKwC,EAAEzC,MAAOyC,EAAEtC,KAAMsC,EAAEvC,OAAQuD,EAAKhB,EAAE1C,QAAS0D,EAAKhB,EAAE3C,YAC1J0D,EAAUV,WACVS,EAASL,cAAc9C,KAAKoD,EAC7B,CACD,OAAO9D,KAAKC,MAAMD,KAAKE,UAAU2D,GACnC,CA5CAG,KAAKC,OAAOC,IAAI,gBAAgB,KAC9B,KAAMT,aAAwBU,KAAM,OACpC,MAAiCC,EAAMJ,KAAKK,KAAKC,IAAIN,KAAKO,UAAU1C,OAAO2C,MAC3E,IAAA,IAAS1B,EAAI,EAAGA,EAAIsB,EAAIK,iBAAkB3B,IAAKsB,EAAIM,eAAe5B,GAAGY,UACrED,EAAaS,IAAIE,EAAKJ,KAAKW,OAASlB,EAAaa,IAAIF,IACrDJ,KAAKY,OAASZ,KAAKW,MAAQ/B,GAAKc,EAAQd,EAAGwB,EAAIR,UAAYhB,GAAKA,CAAAA,IAsElE,WAEQiC,MAAAA,EAAKC,SAASC,cAAc,UAClC,KAAMF,aAAcG,aAAc,OAClC,IAAIC,EAAYC,IAChB,MAAMC,EAAerC,KACfsC,MAAMH,KAAYA,EAAYI,YAAYC,OAC9CT,EAAGU,MAAMC,SAAkC,uBAAAH,YAAYC,MAAQL,GAAa,QACxEI,YAAYC,MAAQL,EAAY,MAAwB,IAAhBQ,KAAKC,SAAiB,EAAU,EACrE,IAlCX,SAAmBC,EAAMC,EAAUC,EAAQC,GACzC,IAAIC,EAAQ,KAOZ,SAASC,IACPD,EAAQE,sBAAsBD,GAC1BJ,MACFM,qBAAqBH,GACrBF,IACAF,EAAKQ,oBAAoB,YAAaH,GACtCL,EAAKQ,oBAAoB,UAAWC,GACpCT,EAAKQ,oBAAoB,aAAcC,GACvCT,EAAKQ,oBAAoB,aAAcH,GACvCL,EAAKQ,oBAAoB,WAAYC,GACrCT,EAAKQ,oBAAoB,cAAeC,GAE3C,CACD,SAASA,IACcL,qBAAAA,GACrBD,GACD,CAtBDH,EAAKU,iBAAiB,YAAaL,GACnCL,EAAKU,iBAAiB,UAAWD,GACjCT,EAAKU,iBAAiB,aAAcD,GACpCT,EAAKU,iBAAiB,aAAcL,EAAO,CAAEM,SAAS,IACtDX,EAAKU,iBAAiB,WAAYD,GAClCT,EAAKU,iBAAiB,cAAeD,EAkBvC,CAWEG,CAAU1B,EAAIM,GAAc,KACrBnB,KAAAwC,UAAU,aAAc,gCAC7B/C,MAAmBU,IACnBsC,YAAYtB,EAAc,GAAE,IAC3B,KACDN,EAAGU,MAAMC,SAAW,4BACpBP,EAAYC,GAAA,GAEb,CAnBH"}